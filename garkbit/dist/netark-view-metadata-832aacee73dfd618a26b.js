(self.webpackJsonp=self.webpackJsonp||[]).push([[67],{1039:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,r,u,l,a,s,f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(1),c=i(3),p=y(i(6)),h=y(i(236));function y(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n=d.Radio.channel("netark"),a=function(){var e=function(e){function t(){return m(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"templateContext",value:function(){return{mediaType:this.getOption("mediaType")}}}]),t}(c.View);return e.prototype.template=p.default.renderable((function(e){return p.default[e.mediaType]({controls:"",autoplay:"",src:e.url})})),e}.call(void 0),o=function(){var e=function(e){function t(){return m(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"getAudioUrl",value:function(){return this.getOption("mainModel").fileUrl(this.model.get("name"))}},{key:"linkClicked",value:function(e){var t,i;return e.preventDefault(),t=this.getAudioUrl(),i=new a({model:new d.Model({url:t}),mediaType:this.getOption("mediaType")}),this.showChildView("mediaView",i)}}]),t}(c.View);return e.prototype.template=p.default.renderable((function(e){var t;return t=(null!=e?e.title:void 0)||e.name,p.default.div(".listview-list-entry",(function(){return p.default.a(t+" ("+e.format+")"),p.default.div(".media-view")}))})),e.prototype.ui={link:"a",mediaView:".media-view"},e.prototype.regions={mediaView:"@ui.mediaView"},e.prototype.events={"click @ui.link":"linkClicked"},e}.call(void 0),r=function(){var e=function(e){function t(){return m(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"childViewOptions",value:function(){return{mainModel:this.model,mediaType:this.getOption("mediaType")}}}]),t}(c.CollectionView);return e.prototype.childView=o,e}.call(void 0),s=function(){var e=function(e){function t(){return m(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"filesButtonClicked",value:function(){var e,t,i,n,o,u,l,a;return i=this.model.get("files"),o=[],l=[],u=!1,i.forEach((function(e){if(e.name.endsWith(".mp3")&&o.push(e),"original"===e.source&&"Metadata"!==e.format&&l.push(e),"Ogg Video"===e.format)return l.push(e),u=!0})),e=o,n="audio",u&&(e=l,console.log("CFILES",e),n="video"),t=new d.Collection(e),a=new r({collection:t,model:this.model,mediaType:n}),this.showChildView("files",a),this.ui.filesButton.hide()}},{key:"notesButtonClicked",value:function(){return this.ui.notes.toggle()}}]),t}(c.View);return e.prototype.template=p.default.renderable((function(e){var t,i,o,r,u;return p.default.div(".listview-header",e.metadata.title),t=e.files,u=!1,t.forEach((function(e){if(!u){if("JPEG Thumb"===e.format)return u=e;if("Thumbnail"===e.format)return u=e}})),u&&(o=n.request("get-image-url",u.name,e),p.default.img({src:o})),p.default.raw(e.metadata.description),r="",(null!=(i=e.metadata)?i.notes:void 0)||(r="display:none"),p.default.button(".notes-button.btn.btn-info",{style:r},"Notes"),p.default.div(".notes.listview-list-entry",{style:"display:none"},(function(){return p.default.raw(e.metadata.notes)})),p.default.button(".files-button.btn.btn-primary","Files"),p.default.div(".files")})),e.prototype.ui={notes:".notes",notesButton:".notes-button",filesButton:".files-button",files:".files"},e.prototype.regions={files:"@ui.files"},e.prototype.events={"click @ui.notesButton":"notesButtonClicked","click @ui.filesButton":"filesButtonClicked"},e}.call(void 0),u=function(){var e=function(e){function t(){return m(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),t}(c.View);return e.prototype.template=p.default.renderable((function(){return p.default.div(".jsonview.listview-list-entry",{style:"overflow:auto"})})),e.prototype.behaviors={HasJsonView:{behaviorClass:h.default}},e}.call(void 0),l=function(){var e=function(e){function t(){return m(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"onRender",value:function(){var e,t;return console.log("MODEL IN MAINVIEW",this.model),e=new u({model:this.model}),this.showChildView("objectView",e),t=new s({model:this.model}),this.showChildView("metadataView",t)}}]),t}(c.View);return e.prototype.template=p.default.renderable((function(){return p.default.div(".metadata-view"),p.default.div(".object-view")})),e.prototype.ui={metadataView:".metadata-view",objectView:".object-view"},e.prototype.regions={metadataView:"@ui.metadataView",objectView:"@ui.objectView"},e}.call(void 0),t.default=l}}]);
//# sourceMappingURL=netark-view-metadata-832aacee73dfd618a26b.js.map