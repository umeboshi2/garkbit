(self.webpackJsonp=self.webpackJsonp||[]).push([[7],{180:function(e,t,n){"use strict";var o,r,i,l,c,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(4),r=n(1),i=n(2),n(81),c=n(3),n(83),r.Radio.channel("global"),r.Radio.channel("messages"),o=r.Radio.channel("sofi"),l=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.View),a(t,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"selectionChanged",value:function(e){var t,n,r;return n=this.ui.publisher.val(),t=this.getOption("comicCollection"),r=o.request("locals:get","currentQueryWhere"),"ALL"===n?delete r.publisher:r.publisher=n,o.request("locals:set","currentQueryWhere",r),t.state.currentPage=0,t.fetch({data:{where:r}}).done(function(){return t.state.currentPage=0,t.trigger("pageable:state:change")})}}]),t}();return e.prototype.ui={publisher:'select[name="select_publisher"]'},e.prototype.events={"change @ui.publisher":"selectionChanged"},e.prototype.template=c.renderable(function(e){return c.span(".input-group",function(){return c.label(".control-label",{for:"select_publisher"},"Publisher"),c.select(".form-control",{name:"select_publisher"},function(){var t,n,o,r,i,l;for(c.option({value:"ALL",selected:""},"All publishers"),l=[],t=0,o=(i=e.items).length;t<o;t++)r={value:(n=i[t]).publisher},l.push(c.option(r,n.publisher));return l})})}),e}.call(void 0),e.exports=l},181:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r,i,l,c,a,u;a=n(0),n(4),i=n(1),l=n(2),n(81),u=n(3),n(83),i.Radio.channel("global"),i.Radio.channel("messages"),r=i.Radio.channel("sofi"),c=function(){var e=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onComicCollectionChanged=e.onComicCollectionChanged.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.View),o(t,[{key:"initialize",value:function(e){return this.getOption("comicCollection").on("pageable:state:change",this.onComicCollectionChanged)}},{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"selectionChanged",value:function(e){var t,n,o;return n=this.ui.seriesgroup.val(),t=this.getOption("comicCollection"),o=r.request("locals:get","currentQueryWhere"),"ALL"===n?delete o.seriesgroup:o.seriesgroup=n,r.request("locals:set","currentQueryWhere",o),t.state.currentPage=0,t.fetch({data:{where:o}}).done(function(){return t.state.currentPage=0,t.trigger("pageable:state:change")})}},{key:"onComicCollectionChanged",value:function(e){var n,o,i=this;return function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}(this,t),n=this.ui.seriesgroup.val(),o=r.request("locals:get","currentQueryWhere"),(null!=(o=a.clone(o))?o.seriesgroup:void 0)&&delete o.seriesgroup,this.collection.fetch({data:{distinct:"seriesgroup",sort:"seriesgroup",where:o}}).done(function(){if(i.render(),i.ui.seriesgroup.val(n),null===i.ui.seriesgroup.val())return i.ui.seriesgroup.val("ALL")})}}]),t}();return e.prototype.ui={seriesgroup:'select[name="select_seriesgroup"]'},e.prototype.events={"change @ui.seriesgroup":"selectionChanged"},e.prototype.template=u.renderable(function(e){return u.span(".input-group",function(){return u.label(".control-label",{for:"select_seriesgroup"},"Series Group"),u.select(".form-control",{name:"select_seriesgroup"},function(){var t,n,o,r,i,l;for(u.option({value:"ALL",selected:""},"Every Series Group"),l=[],t=0,o=(i=e.items).length;t<o;t++)r={value:(n=i[t]).seriesgroup},l.push(u.option(r,n.seriesgroup));return l})})}),e}.call(void 0),e.exports=c},182:function(e,t,n){"use strict";var o,r,i,l,c,a,u,s,p,f,h,b,d,g,y,v,w,_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(4),r=n(1),a=n(2),v=n(3),n(83),n(102),n(90),h=n(181),p=n(180),u=n(268),c=r.Radio.channel("global"),r.Radio.channel("messages"),o=r.Radio.channel("sofi"),v.renderable(function(e){return v.div("default_entry_template")}),d=o.request("dbComicColumns"),g=["seriesgroup","series","issue"],y=v.renderable(function(e){return v.span(".input-group",function(){return v.label(".control-label",{for:"select_sortby"},"Sort by"),v.select(".form-control",{name:"select_sortby"},function(){var t,n,o,r,i;for(r={value:"default"},e===g&&(r.selected=""),v.option(r,"default"),i=[],n=0,o=d.length;n<o;n++)r={value:t=d[n]},e===t&&(r.selected=""),i.push(v.option(r,t));return i})})}),i=function(){var e=function(e){function t(){return m(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,a.View),_(t,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"selectionChanged",value:function(e){var t,n,r;return t=this.ui.collectionStatus.val(),n=this.getOption("comicCollection"),r=o.request("locals:get","currentQueryWhere"),"ALL"===t?delete r.list_id:r.list_id=t,o.request("locals:set","currentQueryWhere",r),n.fetch({data:{where:r}}).done(function(){return n.state.currentPage=0,n.trigger("pageable:state:change")})}}]),t}();return e.prototype.ui={collectionStatus:'select[name="select_collectionstatus"]'},e.prototype.events={"change @ui.collectionStatus":"selectionChanged"},e.prototype.template=v.renderable(function(e){return v.span(".input-group",function(){return v.label(".control-label",{for:"select_collectionstatus"},"Collection Status"),v.select(".form-control",{name:"select_collectionstatus"},function(){var t,n,o,r,i,l;for(v.option({value:"ALL",selected:""},"All Status"),l=[],t=0,o=(i=e.items).length;t<o;t++)r={value:(n=i[t]).id},l.push(v.option(r,n.name));return l})})}),e}.call(void 0),b=function(){var e=function(e){function t(){return m(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,a.View),_(t,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"sort_collection",value:function(){var e,t=this;return"default"===(e=this.ui.sort_by.val())&&(e=g),this.collection.state.sortColumn=e,this.collection.state.currentPage=0,this.collection.fetch({data:{where:o.request("locals:get","currentQueryWhere")}}).done(function(){return t.collection.trigger("pageable:state:change")})}}]),t}();return e.prototype.ui={sort_by:'select[name="select_sortby"]'},e.prototype.events={"change @ui.sort_by":"sort_collection"},e.prototype.template=v.renderable(function(e){var t;return t=e.collection.state.sortColumn,y(t)}),e}.call(void 0),c.request("main:app:AuthCollection"),f=o.request("db:clzcomic:SeriesGroupCollection"),s=o.request("db:clzcomic:PublisherCollection"),w={navigatorBox:".navigator-box",sortByBox:".sort-by-box",collectionStatusFilterBox:".collection-status-filter-box",publisherFilterBox:".publisher-filter-box",seriesgroupFilterBox:".seriesgroup-filter-box"},l=function(){var e=function(e){function t(){return m(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,a.View),_(t,[{key:"regions",value:function(){var e;return e={},Object.keys(w).forEach(function(t){return e[t]="@ui."+t}),e}},{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"showCollectionStatus",value:function(){var e,t=this;return(e=o.request("db:clzcollectionstatus:collection")).fetch().done(function(){var n;return n=new i({collection:e,comicCollection:t.collection}),t.showChildView("collectionStatusFilterBox",n)})}},{key:"showSeriesGroupSelect",value:function(){var e,t=this;return(e=new f).fetch({data:{distinct:"seriesgroup",sort:"seriesgroup"}}).done(function(){var n;return n=new h({collection:e,comicCollection:t.collection}),t.showChildView("seriesgroupFilterBox",n),window.sgview=n})}},{key:"showPublisherSelect",value:function(){var e,t=this;return(e=new s).fetch({data:{distinct:"publisher",sort:"publisher"}}).done(function(){var n;return n=new p({collection:e,comicCollection:t.collection}),t.showChildView("publisherFilterBox",n)})}},{key:"showSortBySelect",value:function(){var e;return e=new b({collection:this.collection}),this.showChildView("sortByBox",e)}},{key:"showNavigatorBox",value:function(){var e;return e=new u({collection:this.collection}),this.showChildView("navigatorBox",e)}},{key:"onRender",value:function(){if(this.showNavigatorBox(),this.showCollectionStatus(),this.showPublisherSelect(),this.showSeriesGroupSelect(),this.showSortBySelect(),this.getOption("workspaceSidebar"))return console.warn("workspaceSidebar!!!!!!!!")}}]),t}();return e.prototype.ui=w,e.prototype.template=v.renderable(function(e){return v.div(".navigator-box.listview-list-entry"),v.div(".sort-by-box.listview-list-entry"),v.div(".collection-status-filter-box.listview-list-entry"),v.div(".publisher-filter-box.listview-list-entry"),v.div(".seriesgroup-filter-box.listview-list-entry")}),e}.call(void 0),e.exports=l},267:function(e,t,n){"use strict";var o,r,i,l,c,a,u,s,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(4),r=n(1),l=n(2),s=n(3);var f=n(30);u=f.form_group_input_div,i=r.Radio.channel("global"),r.Radio.channel("messages"),o=r.Radio.channel("sofi"),i.request("main:app:AuthCollection"),c=o.request("db:ebcomicworkspace:WorkspaceCollection"),a=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.View),p(t,[{key:"initialize",value:function(){var e=this;return this.collection=new c,this.collection.fetch({data:{distinct:"name",sort:"name"}}).done(function(){return e.render()})}},{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"theWorkspaceChanged",value:function(e){return console.log("theWorkspaceChanged",e)}}]),t}();return e.prototype.className="listview-list-entry",e.prototype.ui={name_input:'select[name="select_workspace"]'},e.prototype.triggers={"change @ui.name_input":"workspace:changed"},e.prototype.template=s.renderable(function(e){return u({input_id:"input_wsname",label:"Workspace Name",input_attributes:{name:"name"}}),s.span(".input-group",function(){return s.label(".control-label",{for:"select_workspace"},"Workspace"),s.select(".form-control",{name:"select_workspace"},function(){var t,n,o,r,i,l;if(s.option({value:"UNATTACHED"},"Unattached Comics"),e.items.length){for(l=[],t=0,o=(i=e.items).length;t<o;t++)r={value:(n=i[t]).name},l.push(s.option(r,n.name));return l}return console.log("No workspaces!")})})}),e}.call(void 0),e.exports=a},268:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r,i,l,c,a,u;r=n(4),l=n(1),c=n(2),u=n(3),n(83),n(102),n(90),n(181),n(180),n(267),l.Radio.channel("global"),l.Radio.channel("messages"),i=l.Radio.channel("sofi"),u.renderable(function(e){return u.div("default_entry_template")}),i.request("dbComicColumns"),a=function(){var e=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.keydownHandler=e.keydownHandler.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.View),o(t,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"update_nav_buttons",value:function(){var e;if((e=this.collection.state.currentPage)?this.ui.prev_li.show():this.ui.prev_li.hide(),e!==this.collection.state.lastPage?this.ui.next_li.show():this.ui.next_li.hide(),0===this.collection.state.totalRecords)return this.ui.prev_li.hide(),this.ui.next_li.hide()}},{key:"handle_key_command",value:function(e){if("prev"===e||"next"===e)return this.get_another_page(e)}},{key:"keydownHandler",value:function(e){var n,o,r,i;for(n in function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}(this,t),r=[],o=this.keycommands)i=o[n],e.keyCode===i?r.push(this.handle_key_command(n)):r.push(void 0);return r}},{key:"toggle_sort_direction",value:function(e){var t,n=this;return(t=this.ui.dir_icon).hasClass("fa-arrow-up")?(t.removeClass("fa-arrow-up"),t.addClass("fa-arrow-down"),this.collection.state.sortDirection="desc"):(t.removeClass("fa-arrow-down"),t.addClass("fa-arrow-up"),this.collection.state.sortDirection="asc"),this.collection.fetch({data:{where:i.request("locals:get","currentQueryWhere")}}).done(function(){return n.collection.trigger("pageable:state:change")})}},{key:"onRender",value:function(){var e=this;return this.update_nav_buttons(),this.collection.on("pageable:state:change",function(){return e.update_nav_buttons()}),r("html").keydown(this.keydownHandler)}},{key:"onBeforeDestroy",value:function(){return this.collection.off("pageable:state:change"),r("html").unbind("keydown",this.keydownHandler)}},{key:"get_another_page",value:function(e){var t,n,o,r,l=this;if(r=i.request("locals:get","currentQueryWhere"),this.collection.queryParams.where=r,n=(t=this.collection.state.currentPage)===this.collection.state.lastPage,o=void 0,"prev"===e&&t?o=this.collection.getPreviousPage():"next"!==e||n||(o=this.collection.getNextPage()),o)return o.done(function(){return delete l.collection.queryParams.where})}},{key:"get_prev_page",value:function(){return this.get_another_page("prev")}},{key:"get_next_page",value:function(){return this.get_another_page("next")}}]),t}();return e.prototype.tagName="ul",e.prototype.className="pager",e.prototype.ui={prev_li:".previous",next_li:".next",prev_button:".prev-page-button",dir_button:".direction-button",dir_icon:".direction-icon",next_button:".next-page-button"},e.prototype.events={"click @ui.prev_button":"get_prev_page","click @ui.dir_button":"toggle_sort_direction","click @ui.next_button":"get_next_page"},e.prototype.childViewTriggers={"workspace:changed":"workspace:changed"},e.prototype.template=u.renderable(function(e){return u.li(".previous",function(){return u.span(".prev-page-button.btn",function(){return u.i(".fa.fa-arrow-left"),u.text("-previous")})}),u.li(".direction",function(){return u.span(".direction-button.btn",function(){return u.i(".direction-icon.fa.fa-arrow-up")})}),u.li(".next",function(){return u.span(".next-page-button.btn",function(){return u.text("next-"),u.i(".fa.fa-arrow-right")})})}),e.prototype.keycommands={prev:37,next:39},e}.call(void 0),e.exports=a}}]);
//# sourceMappingURL=sofi:views:createWorkspaceView~sofi:views:showWorkspaceView-181cd09e9ff2470276d9.js.map