(self.webpackJsonp=self.webpackJsonp||[]).push([[46,48],{172:function(t,e,n){"use strict";var o=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,i,l,c,d,p,h,g;s=n(4),i=n(1),l=n(2),g=n(3),h=n(222),i.Radio.channel("global"),i.Radio.channel("messages"),i.Radio.channel("hubby"),c=function(){var t=function(t){function e(){return a(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,l.View),o(e,[{key:"template",value:function(){}},{key:"onRender",value:function(){var t,e,n,i;return 1.5,n=this.getOption("page"),t=this.el,i=n.getViewport(1.5),t.height=i.height,t.width=i.width,e=t.getContext("2d"),n.render({canvasContext:e,viewport:i})}}]),e}();return t.prototype.tagName="canvas",t.prototype.className="canvas",t}.call(void 0),p=function(){var t=function(t){function e(){return a(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,l.View),o(e,[{key:"templateContext",value:function(){return{pdf:this.getOption("pdf"),barLength:10,barStopAt:4}}},{key:"onDomRefresh",value:function(){return this.updateNavButtons()}},{key:"getNextPage",value:function(t){return this.getAnotherPage(t,"next")}},{key:"getPreviousPage",value:function(t){return this.getAnotherPage(t,"prev")}},{key:"updateNavButtons",value:function(){var t,e,n,i,o,a,r;return o=this.getOption("page"),a=this.getOption("pdf"),o.pageIndex,e=o.pageIndex+1,1,n=a.numPages,r=this.ui.prevButton.parent(),1===e?r.hasClass("disabled")||r.addClass("disabled"):r.hasClass("disabled")&&r.removeClass("disabled"),i=this.ui.nextButton.parent(),e===n?i.hasClass("disabled")||i.addClass("disabled"):i.addClass("disabled")&&i.removeClass("disabled"),this.ui.numberedPage.parent().removeClass("active"),this.ui.numberedPage.removeClass("text-white"),this.ui.numberedPage.addClass("text-dark"),(t=s('[data-pagenumber="'+e+'"]')).parent().addClass("active"),t.removeClass("text-dark"),t.addClass("text-white")}},{key:"getAnotherPage",value:function(t,e){return t.preventDefault(),this.page,this.trigger("another:page",e)}},{key:"turnPage",value:function(t){var e;return t.preventDefault(),e=s(t.target).attr("data-pagenumber"),this.trigger("turn:page",e)}}]),e}();return t.prototype.tagName="ul",t.prototype.className="pagination",t.prototype.template=g.renderable(function(t){var e,n,i,o,a,r,u,s;for(1,(o=t.pdf.numPages)>t.barLength&&(e=!0,s=t.barStopAt,u=o-t.barStopAt),g.li(".page-item",function(){return g.a(".prev.page-link.bg-body-d5",function(){return g.i(".fa.fa-arrow-left")})}),n=!1,a=i=1,r=o;1<=r?i<=r:r<=i;a=1<=r?++i:--i)e&&s<=a&&a<=u?n||(n=!0,g.li(".page-item",function(){return g.a(".ellipsis-page.page-link.bg-body-d5.text-dark","...")})):g.li(".page-item",function(){return g.a(".numbered-page.page-link.bg-body-d5.text-dark",{data:{pagenumber:a}},a)});return g.li(function(){return g.a(".next.page-link.bg-body-d5",function(){return g.i(".fa.fa-arrow-right")})})}),t.prototype.ui={numberedPage:".numbered-page",prevButton:".prev",nextButton:".next"},t.prototype.events={"click @ui.numberedPage":"turnPage","click @ui.prevButton":"getPreviousPage","click @ui.nextButton":"getNextPage"},t}.call(void 0),d=function(){var t=function(t){function i(){a(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments));return t.showPage=t.showPage.bind(t),t}return u(i,l.View),o(i,[{key:"showPage",value:function(t){var e,n;return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,i),this.page=t,this.options.page=t,n=new c({pdf:this.pdf,page:t}),this.showChildView("content",n),e=new p({pdf:this.pdf,page:t}),this.showChildView("toolbar",e)}},{key:"onRender",value:function(){var t,e,n=this;return t=new l.View({template:g.renderable(function(){return g.text("status")})}),this.showChildView("status",t),e=this.model.get("url"),h.getDocument(e).then(function(t){return(n.pdf=t).getPage(1).then(function(t){return n.showPage(t)})})}},{key:"onChildviewTurnPage",value:function(t){var e,n,i=this;return t=parseInt(t),console.log("onChildviewTurnPage",t),n=this.getOption("pdf"),console.log("number is",t),e=this.getOption("page").pageIndex+1,t=t||0,console.log("number",t),e<t&&console.log("another page",e),t!==e&&(e=t),n.getPage(e).then(function(t){return i.showPage(t)})}},{key:"onChildviewAnotherPage",value:function(t){var e,n,i=this;return n=this.getOption("pdf"),e=this.getOption("page").pageIndex+1,"next"===t&&e<n.numPages?e+=1:"prev"===t&&(e-=1),n.getPage(e).then(function(t){return i.showPage(t)})}}]),i}();return t.prototype.template=g.renderable(function(t){return g.div(".toolbar"),g.div(".content"),g.div(".status")}),t.prototype.ui={toolbar:".toolbar",content:".content",status:".status"},t.prototype.regions={toolbar:"@ui.toolbar",content:"@ui.content",status:"@ui.status"},t}.call(void 0),t.exports=d},223:function(t,e){},224:function(t,e){},225:function(t,e){},226:function(t,e){},440:function(t,e,n){"use strict";var i,o,u,a,r,s,l,c,d,p,h,g,f,b,m,v,y,w,k,_=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n(4),s=n(1),p=n(2),k=n(3),n(138),n(20).default,c=n(45).default,g=n(172),d=s.Radio.channel("global"),s.Radio.channel("messages"),s.Radio.channel("hubby"),b=n(455),w=n(457),f=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"onRender",value:function(){var t;return t=new g({model:this.model}),this.showChildView("body",t)}}]),e}();return t.prototype.behaviors=[c],t.prototype.template=k.renderable(function(t){return k.div(".bg-body-d10.modal-content",function(){return k.div(".modal-header",function(){return k.h4(".modal-title","pdf view"),k.button(".close",{type:"button",data:{dismiss:"modal"}},function(){return k.span({"aria-hidden":"true"},function(){return k.raw("&times")})})}),k.div("#mbody.modal-body",function(){return k.canvas(".canvas")}),k.div(".modal-footer",function(){return k.button(".ok-button.btn.btn-primary",{type:"button",data:{dismiss:"modal"}},function(){return k.i(".fa.fa-check"),k.text(" OK")})})})}),t.prototype.ui={canvas:".canvas",body:".modal-body",close_btn:".ok-button"},t.prototype.regions={canvas:"@ui.canvas",body:"@ui.body"},t}.call(void 0),v=function(t){var e,n,i;return n=new s.Model({url:t}),(e=d.request("main:app:object").getView().getRegion("modal")).backdrop=!0,e.keyboard=!0,i=new f({model:n}),e.show(i)},y=function(t){var e;return e="M="+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"A")+"&ID="+t.id+"&GUID="+t.guid,"/api/dev/proxy/"+btoa("https://hattiesburg.legistar.com/View.ashx?"+e)},m=".text-center.bg-body-d10.pl-1.pr-1.pt-1.pb-2",m+=".border-light.rounded",l=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"onRender",value:function(){var t,e;if(t=this.model.get("agenda_status"),e=this.model.get("minutes_status"),"Final"!==t&&this.ui.agendaButton.attr({disabled:""}),"Final"!==e)return this.ui.minutesButton.attr({disabled:""})}},{key:"agendaLinkClicked",value:function(t){return t.preventDefault()}},{key:"minutesLinkClicked",value:function(t){return t.preventDefault()}},{key:"_loadPdf",value:function(t){var e,n,i;return console.warn("use loadPdf() instead"),n=new s.Model({url:t}),(e=d.request("main:app:object").getView().getRegion("modal")).backdrop=!0,e.keyboard=!0,i=new f({model:n}),e.show(i)}},{key:"agendaButtonClicked",value:function(t){var e;return t.preventDefault(),e=this.ui.agendaLink.attr("href"),v(e)}},{key:"minutesButtonClicked",value:function(t){var e;return t.preventDefault(),e=this.ui.minutesLink.attr("href"),v(e)}}]),e}();return t.prototype.template=k.renderable(function(i){var o;return o=".col-md-2.btn.btn-sm.pr-4",k.div(m,{style:"border:0.1rem solid"},function(){var t,e,n;return t="warning","Final"===i.agenda_status&&(t="info"),k.button(".agenda-btn"+o+".btn-"+t+".pull-left",function(){return k.img({src:b,style:"width:1rem"}),k.span(".text-light",{href:y(i)},"  Agenda: "+i.agenda_status)}),k.a(".col-md-8.ml-1.mr-1.text-dark",{href:"#hubby"},function(){return k.h5(".d-inline",""+i.title)}),e=i.minutes_status,t="warning",n="dark","Final"===e&&(t="info",n="light"),k.button(".minutes-btn"+o+".btn-"+t+".pull-right",function(){return k.img({src:w,style:"width:1rem"}),k.span(".text-"+n,{href:y(i,"M")},"  Minutes: "+i.minutes_status)})}),k.canvas(".canvas",{style:"display:none"})}),t.prototype.ui={agendaButton:".agenda-btn",agendaLink:".agenda-btn > span",minutesButton:".minutes-btn",minutesLink:".minutes-btn > span",canvas:".canvas"},t.prototype.events={"click @ui.agendaButton":"agendaButtonClicked","click @ui.agendaLink":"agendaLinkClicked","click @ui.minutesButton":"minutesButtonClicked","click @ui.minutesLink":"minutesLinkClicked"},t}.call(void 0),a=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"entryClicked",value:function(t){var e,n;return t.preventDefault(),e=this.model.get("link"),n=btoa("https://hattiesburg.legistar.com/"+e),v("/api/dev/proxy/"+n)}}]),e}();return t.prototype.tagName="li",t.prototype.className="list-group-item",t.prototype.template=k.renderable(function(t){var e;return e="http://hattiesburg.legistar.com/"+t.link,k.a({href:e},t.name)}),t.prototype.events={click:"entryClicked","click a":"entryClicked"},t}.call(void 0),r=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"onRender",value:function(){var t,e,n;return t=this.model.get("attachments"),e=new s.Collection(t),n=new p.CollectionView({tagName:"ul",className:"list-group",collection:e,childView:a}),this.showChildView("container",n)}},{key:"buttonClicked",value:function(){return this.ui.container.toggle()}}]),e}();return t.prototype.template=k.renderable(function(t){var e,n;return n="One Attachment",1<(e=t.attachments.length)&&(n=e+" Attachments"),k.span(".btn.btn-sm.btn-info",n),k.div(".attachments-container",{style:"display:none"})}),t.prototype.ui={button:".btn.btn-sm",container:".attachments-container"},t.prototype.regions={container:"@ui.container"},t.prototype.events={"click @ui.button":"buttonClicked"},t}.call(void 0),i=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"buttonClicked",value:function(){return this.ui.container.toggle()}}]),e}();return t.prototype.template=k.renderable(function(u){var t;return t="Action",1<u.actions.length&&(t="Actions"),k.span(".btn.btn-sm.btn-primary",t),k.div(".actions-container",{style:"display:none"},function(){return k.div(".hubby-meeting-item-actions",function(){var t,e,n,o,i,a,r;for(r=[],e=0,n=(a=u.actions).length;e<n;e++)t=a[e],i=/\r?\n/,o=t.action_text.split(i),r.push(k.div(".hubby-action-text",{width:80},function(){var t,e,n,i;for(k.hr(),i=[],t=0,e=o.length;t<e;t++)n=o[t],i.push(k.p(n));return i}));return r})})}),t.prototype.ui={button:".btn.btn-sm",container:".actions-container"},t.prototype.events={"click @ui.button":"buttonClicked"},t}.call(void 0),o=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"onRender",value:function(){var t,e,n;if((e=this.model.get("attachments"))&&e.length&&(n=new r({model:this.model}),this.showChildView("attachments",n)),(t=this.model.get("actions"))&&t.length)return n=new i({model:this.model}),this.showChildView("actions",n)}},{key:"headerClicked",value:function(t){return this.ui.content.toggle()}}]),e}();return t.prototype.className="hubby-meeting-item",t.prototype.template=k.renderable(function(e){return k.div(".header",function(){return k.div(".hubby-meeting-item-info",function(){var t;return t=e.mitem.agenda_num||"(--)",k.div(".hubby-meeting-item-agenda-num",t),k.div(".hubby-meeting-item-fileid",e.file_id),k.div(".hubby-meeting-item-status",e.status)})}),k.div(".content.hubby-meeting-item-content",function(){return k.p(".hubby-meeting-item-text",e.title),k.div(".btn-group",function(){return k.div(".agenda-item-attachments"),k.div(".agenda-item-actions")})})}),t.prototype.ui={header:".header",content:".content",attachments:".agenda-item-attachments",actions:".agenda-item-actions"},t.prototype.regions={attachments:"@ui.attachments",actions:"@ui.actions"},t.prototype.events={"click @ui.header":"headerClicked"},t}.call(void 0),u=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"templateContext",value:function(){return{agendaTitle:this.getOption("agendaTitle")}}},{key:"onRender",value:function(){var t;return t=new p.CollectionView({collection:this.collection,childView:o}),this.showChildView("agendaItems",t)}}]),e}();return t.prototype.template=k.renderable(function(t){return k.h3(".agenda-header.bg-body-d10",t.agendaTitle),k.div(".agenda-items")}),t.prototype.ui={agendaItems:".agenda-items"},t.prototype.regions={agendaItems:".agenda-items"},t}.call(void 0),h=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,p.View),_(e,[{key:"_showAgendaView",value:function(t,e,n){var i;if(e.length)return i=new u({collection:new s.Collection(e),agendaTitle:n}),this.showChildView(t,i)}},{key:"onRender",value:function(){var t,n,i,o,a,r;if(n=this.model.toJSON(),a=[],o=[],r=[],i=[],n.meeting_items.forEach(function(t){var e;return"public"===((e=n.items[t.item_id]).mitem=t).type?a.push(e):"policy"===t.type?o.push(e):"routine"===t.type?r.push(e):i.push(e)}),t=new l({model:this.model}),this.showChildView("header",t),this._showAgendaView("publicAgenda",a,"Public Agenda"),this._showAgendaView("policyAgenda",o,"Policy Agenda"),this._showAgendaView("routineAgenda",r,"Routine Agenda"),i.length)return new u({collection:new s.Collection(i),agendaTitle:"Agenda Items"})}}]),e}();return t.prototype.template=k.renderable(function(t){return k.div(".header"),k.div(".public-agenda"),k.div(".policy-agenda"),k.div(".routine-agenda")}),t.prototype.ui={header:".header",publicAgenda:".public-agenda",policyAgenda:".policy-agenda",routineAgenda:".routine-agenda"},t.prototype.regions={header:"@ui.header",publicAgenda:"@ui.publicAgenda",policyAgenda:"@ui.policyAgenda",routineAgenda:"@ui.routineAgenda"},t}.call(void 0),t.exports=h},455:function(t,e,n){t.exports=n(456)},456:function(t,e,n){t.exports=n.p+"emoji_u1f4cb-db0d3720790bcd2a17985868c063d379.svg"},457:function(t,e,n){t.exports=n(458)},458:function(t,e,n){t.exports=n.p+"emoji_u1f4dd-b8b0951b984bc2a822032eded83297cc.svg"}}]);
//# sourceMappingURL=hubby-meetingview-8a668418ae57d3dc7870.js.map