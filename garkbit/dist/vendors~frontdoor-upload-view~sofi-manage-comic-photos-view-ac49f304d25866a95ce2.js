(self.webpackJsonp=self.webpackJsonp||[]).push([[17],{127:function(e,i,t){"use strict";e.exports=function(e,i){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||i?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},158:function(e,i,t){var r,a,n;
/*!
 * bootstrap-fileinput v5.0.3
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2019, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD-3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */
/*!
 * bootstrap-fileinput v5.0.3
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2019, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD-3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */
!function(){"use strict";a=[t(4)],void 0===(n="function"==typeof(r=function(q){"use strict";var K,u;q.fn.fileinputLocales={},q.fn.fileinputThemes={},String.prototype.setTokens=function(e){var i=this.toString(),t,r;for(t in e){if(e.hasOwnProperty(t)){r=new RegExp("{"+t+"}","g");i=i.replace(r,e[t])}}return i},K={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",OBJECT_PARAMS:'<param name="controller" value="true" />\n'+'<param name="allowFullScreen" value="true" />\n'+'<param name="allowScriptAccess" value="always" />\n'+'<param name="autoPlay" value="false" />\n'+'<param name="autoStart" value="false" />\n'+'<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n'+'<span class="{previewFileIconClass}">{previewFileIcon}</span>\n'+"</div>",MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],logMessages:{ajaxError:"{status}: {error}. Error Details: {text}.",badDroppedFiles:"Error scanning dropped files!",badExifParser:"Error loading the piexif.js library. {details}",badInputType:'The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.',exifWarning:'To avoid this warning, either set "autoOrientImage" to "false" OR ensure you have loaded '+'the "piexif.js" library correctly on your page before the "fileinput.js" script.',invalidChunkSize:'Invalid upload chunk size: "{chunkSize}". Resumable uploads are disabled.',invalidThumb:'Invalid thumb frame with id: "{id}".',noResumableSupport:"The browser does not support resumable or chunk uploads.",noUploadUrl:'The "uploadUrl" is not set. Ajax uploads and resumable uploads have been disabled.',retryStatus:"Retrying upload for chunk # {chunk} for {filename}... retry # {retry}."},objUrl:window.URL||window.webkitURL,now:function(){return new Date},round:function(e){e=parseFloat(e);return isNaN(e)?0:Math.floor(Math.round(e))},getFileRelativePath:function(e){return String(e.relativePath||e.webkitRelativePath||K.getFileName(e)||null)},getFileId:function(e,i){var t=K.getFileRelativePath(e);if(typeof i==="function"){return i(e)}if(!e){return null}if(!t){return null}return e.size+"_"+t.replace(/\s/gim,"_")},getElapsed:function(e){var i=e,t="",r={},a={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};Object.keys(a).forEach(function(e){r[e]=Math.floor(i/a[e]);i-=r[e]*a[e]});q.each(r,function(e,i){if(i>0){t+=(t?" ":"")+i+e.substring(0,1)}});return t},debounce:function(t,r){var a;return function(){var e=arguments,i=this;clearTimeout(a);a=setTimeout(function(){t.apply(i,e)},r)}},stopEvent:function(e){e.stopPropagation();e.preventDefault()},getFileName:function(e){return e?e.fileName||e.name||"":""},createObjectURL:function(e){if(K.objUrl&&K.objUrl.createObjectURL&&e){return K.objUrl.createObjectURL(e)}return""},revokeObjectURL:function(e){if(K.objUrl&&K.objUrl.revokeObjectURL&&e){K.objUrl.revokeObjectURL(e)}},compare:function(e,i,t){return e!==undefined&&(t?e===i:e.match(i))},isIE:function(e){var i,t;if(navigator.appName!=="Microsoft Internet Explorer"){return false}if(e===10){return new RegExp("msie\\s"+e,"i").test(navigator.userAgent)}i=document.createElement("div");i.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e";t=i.getElementsByTagName("i").length;document.body.appendChild(i);i.parentNode.removeChild(i);return t},canAssignFilesToInput:function(){var e=document.createElement("input");try{e.type="file";e.files=null;return true}catch(e){return false}},getDragDropFolders:function(e){var i,t,r=e?e.length:0,a=0;if(r>0&&e[0].webkitGetAsEntry()){for(i=0;i<r;i++){t=e[i].webkitGetAsEntry();if(t&&t.isDirectory){a++}}}return a},initModal:function(e){var i=q("body");if(i.length){e.appendTo(i)}},isEmpty:function(e,i){return e===undefined||e===null||e.length===0||i&&q.trim(e)===""},isArray:function(e){return Array.isArray(e)||Object.prototype.toString.call(e)==="[object Array]"},ifSet:function(e,i,t){t=t||"";return i&&typeof i==="object"&&e in i?i[e]:t},cleanArray:function(e){if(!(e instanceof Array)){e=[]}return e.filter(function(e){return e!==undefined&&e!==null})},spliceArray:function(e,i,t){var r,a=0,n=[],o;if(!(e instanceof Array)){return[]}o=q.extend(true,[],e);if(t){o.reverse()}for(r=0;r<o.length;r++){if(r!==i){n[a]=o[r];a++}}if(t){n.reverse()}return n},getNum:function(e,i){i=i||0;if(typeof e==="number"){return e}if(typeof e==="string"){e=parseFloat(e)}return isNaN(e)?i:e},hasFileAPISupport:function(){return!!(window.File&&window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!K.isIE(9)&&(e.draggable!==undefined||e.ondragstart!==undefined&&e.ondrop!==undefined)},hasFileUploadSupport:function(){return K.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return false}},hasArrayBufferViewSupport:function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(e){return false}},hasResumableUploadSupport:function(){return K.hasFileUploadSupport()&&K.hasBlobSupport()&&K.hasArrayBufferViewSupport()&&(!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!!Blob.prototype.slice||false)},dataURI2Blob:function(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,t=K.hasBlobSupport(),r,a,n,o,l,s,d=(t||i)&&window.atob&&window.ArrayBuffer&&window.Uint8Array;if(!d){return null}if(e.split(",")[0].indexOf("base64")>=0){r=atob(e.split(",")[1])}else{r=decodeURIComponent(e.split(",")[1])}a=new ArrayBuffer(r.length);n=new Uint8Array(a);for(o=0;o<r.length;o+=1){n[o]=r.charCodeAt(o)}l=e.split(",")[0].split(":")[1].split(";")[0];if(t){return new Blob([K.hasArrayBufferViewSupport()?n:a],{type:l})}s=new i;s.append(a);return s.getBlob(l)},arrayBuffer2String:function(e){if(window.TextDecoder){return new TextDecoder("utf-8").decode(e)}var i=Array.prototype.slice.apply(new Uint8Array(e)),t="",r=0,a,n,o,l;a=i.length;while(r<a){n=i[r++];switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:o=i[r++];t+=String.fromCharCode((n&31)<<6|o&63);break;case 14:o=i[r++];l=i[r++];t+=String.fromCharCode((n&15)<<12|(o&63)<<6|(l&63)<<0);break}}return t},isHtml:function(e){var i=document.createElement("div");i.innerHTML=e;for(var t=i.childNodes,r=t.length;r--;){if(t[r].nodeType===1){return true}}return false},isSvg:function(e){return e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,i,t){switch(e){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(e.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(e.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return i&&!i.match(/[^\u0000-\u007f]/)?"application/text-plain":t}}}},addCss:function(e,i){e.removeClass(i).addClass(i)},getElement:function(e,i,t){return K.isEmpty(e)||K.isEmpty(e[i])?t:q(e[i])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(Math.random()*100)},htmlEncode:function(e,i){if(e===undefined){return i||null}return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(e,i){var t=e;if(!i){return t}q.each(i,function(e,i){if(typeof i==="function"){i=i()}t=t.split(e).join(i)});return t},cleanMemory:function(e){var i=e.is("img")?e.attr("src"):e.find("source").attr("src");K.revokeObjectURL(i)},findFileName:function(e){var i=e.lastIndexOf("/");if(i===-1){i=e.lastIndexOf("\\")}return e.split(e.substring(i,i+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,t=i.documentElement;if(t&&e&&!K.checkFullScreen()){if(t.requestFullscreen){t.requestFullscreen()}else{if(t.msRequestFullscreen){t.msRequestFullscreen()}else{if(t.mozRequestFullScreen){t.mozRequestFullScreen()}else{if(t.webkitRequestFullscreen){t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}}else{if(i.exitFullscreen){i.exitFullscreen()}else{if(i.msExitFullscreen){i.msExitFullscreen()}else{if(i.mozCancelFullScreen){i.mozCancelFullScreen()}else{if(i.webkitExitFullscreen){i.webkitExitFullscreen()}}}}}},moveArray:function(e,i,t,r){var a=q.extend(true,[],e);if(r){a.reverse()}if(t>=a.length){var n=t-a.length;while(n--+1){a.push(undefined)}}a.splice(t,0,a.splice(i,1)[0]);if(r){a.reverse()}return a},cleanZoomCache:function(e){var i=e.closest(".kv-zoom-cache-theme");if(!i.length){i=e.closest(".kv-zoom-cache")}i.remove()},closeButton:function(e){e=e?"close "+e:"close";return'<button type="button" class="'+e+'" aria-label="Close">\n'+'  <span aria-hidden="true">&times;</span>\n'+"</button>"},getRotation:function(e){switch(e){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(e,i){if(!e){return}e.style.transform=i;e.style.webkitTransform=i;e.style["-moz-transform"]=i;e.style["-ms-transform"]=i;e.style["-o-transform"]=i}},(u=function(e,i){var t=this;t.$element=q(e);t.$parent=t.$element.parent();if(!t._validate()){return}t.isPreviewable=K.hasFileAPISupport();t.isIE9=K.isIE(9);t.isIE10=K.isIE(10);if(t.isPreviewable||t.isIE9){t._init(i);t._listen()}t.$element.removeClass("file-loading")}).prototype={constructor:u,_cleanup:function(){var e=this;e.reader=null;e.clearFileStack();e.fileBatchCompleted=true;e.isError=false;e.cancelling=false;e.paused=false;e.lastProgress=0;e._initAjax()},_initAjax:function(){var e=this;e.ajaxQueue=[];e.ajaxRequests=[];e.ajaxQueueIntervalId=null;e.ajaxCurrentThreads=0;e.ajaxAborted=false},_init:function(e,i){var t=this,r,a=t.$element,n,o,l;t.options=e;q.each(e,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":t[e]=K.getNum(i);break;default:t[e]=i;break}});if(t.rtl){l=t.previewZoomButtonIcons.prev;t.previewZoomButtonIcons.prev=t.previewZoomButtonIcons.next;t.previewZoomButtonIcons.next=l}if(!isNaN(t.maxAjaxThreads)&&t.maxAjaxThreads<t.resumableUploadOptions.maxThreads){t.resumableUploadOptions.maxThreads=t.maxAjaxThreads}t._initFileManager();if(typeof t.autoOrientImage==="function"){t.autoOrientImage=t.autoOrientImage()}if(typeof t.autoOrientImageInitial==="function"){t.autoOrientImageInitial=t.autoOrientImageInitial()}if(!i){t._cleanup()}t.$form=a.closest("form");t._initTemplateDefaults();t.uploadFileAttr=!K.isEmpty(a.attr("name"))?a.attr("name"):"file_data";o=t._getLayoutTemplate("progress");t.progressTemplate=o.replace("{class}",t.progressClass);t.progressInfoTemplate=o.replace("{class}",t.progressInfoClass);t.progressPauseTemplate=o.replace("{class}",t.progressPauseClass);t.progressCompleteTemplate=o.replace("{class}",t.progressCompleteClass);t.progressErrorTemplate=o.replace("{class}",t.progressErrorClass);t.isDisabled=a.attr("disabled")||a.attr("readonly");if(t.isDisabled){a.attr("disabled",true)}t.isClickable=t.browseOnZoneClick&&t.showPreview&&(t.dropZoneEnabled||!K.isEmpty(t.defaultPreviewContent));t.isAjaxUpload=K.hasFileUploadSupport()&&!K.isEmpty(t.uploadUrl);t.dropZoneEnabled=K.hasDragDropSupport()&&t.dropZoneEnabled;if(!t.isAjaxUpload){t.dropZoneEnabled=t.dropZoneEnabled&&K.canAssignFilesToInput()}t.slug=typeof e.slugCallback==="function"?e.slugCallback:t._slugDefault;t.mainTemplate=t.showCaption?t._getLayoutTemplate("main1"):t._getLayoutTemplate("main2");t.captionTemplate=t._getLayoutTemplate("caption");t.previewGenericTemplate=t._getPreviewTemplate("generic");if(!t.imageCanvas&&t.resizeImage&&(t.maxImageWidth||t.maxImageHeight)){t.imageCanvas=document.createElement("canvas");t.imageCanvasContext=t.imageCanvas.getContext("2d")}if(K.isEmpty(a.attr("id"))){a.attr("id",K.uniqId())}t.namespace=".fileinput_"+a.attr("id").replace(/-/g,"_");if(t.$container===undefined){t.$container=t._createContainer()}else{t._refreshContainer()}n=t.$container;t.$dropZone=n.find(".file-drop-zone");t.$progress=n.find(".kv-upload-progress");t.$btnUpload=n.find(".fileinput-upload");t.$captionContainer=K.getElement(e,"elCaptionContainer",n.find(".file-caption"));t.$caption=K.getElement(e,"elCaptionText",n.find(".file-caption-name"));if(!K.isEmpty(t.msgPlaceholder)){r=a.attr("multiple")?t.filePlural:t.fileSingle;t.$caption.attr("placeholder",t.msgPlaceholder.replace("{files}",r))}t.$captionIcon=t.$captionContainer.find(".file-caption-icon");t.$previewContainer=K.getElement(e,"elPreviewContainer",n.find(".file-preview"));t.$preview=K.getElement(e,"elPreviewImage",n.find(".file-preview-thumbnails"));t.$previewStatus=K.getElement(e,"elPreviewStatus",n.find(".file-preview-status"));t.$errorContainer=K.getElement(e,"elErrorContainer",t.$previewContainer.find(".kv-fileinput-error"));t._validateDisabled();if(!K.isEmpty(t.msgErrorClass)){K.addCss(t.$errorContainer,t.msgErrorClass)}if(!i){t.$errorContainer.hide();t.previewInitId="preview-"+K.uniqId();t._initPreviewCache();t._initPreview(true);t._initPreviewActions();if(t.$parent.hasClass("file-loading")){t.$container.insertBefore(t.$parent);t.$parent.remove()}}else{if(!t._errorsExist()){t.$errorContainer.hide()}}t._setFileDropZoneTitle();if(a.attr("disabled")){t.disable()}t._initZoom();if(t.hideThumbnailContent){K.addCss(t.$preview,"hide-content")}},_initFileManager:function(){var u=this;u.fileManager={stack:{},processed:[],errors:[],loadedImages:{},totalImages:0,totalFiles:null,totalSize:null,uploadedSize:0,stats:{},initStats:function(e){var i={started:K.now().getTime()};if(e){u.fileManager.stats[e]=i}else{u.fileManager.stats=i}},getUploadStats:function(e,i,t){var r=u.fileManager,a=e?r.stats[e]&&r.stats[e].started||null:null;if(!a){a=K.now().getTime()}var n=(K.now().getTime()-a)/1e3,o=["B/s","KB/s","MB/s","GB/s","TB/s","PB/s","EB/s","ZB/s","YB/s"],l=n?i/n:0,s=u._getSize(l,o),d=t-i,f={fileId:e,started:a,elapsed:n,loaded:i,total:t,bps:l,bitrate:s,pendingBytes:d};if(e){r.stats[e]=f}else{r.stats=f}return f},exists:function(e){return q.inArray(e,u.fileManager.getIdList())!==-1},count:function(){return u.fileManager.getIdList().length},total:function(){var e=u.fileManager;if(!e.totalFiles){e.totalFiles=e.count()}return e.totalFiles},getTotalSize:function(){var r=u.fileManager;if(r.totalSize){return r.totalSize}r.totalSize=0;q.each(u.fileManager.stack,function(e,i){var t=parseFloat(i.size);r.totalSize+=isNaN(t)?0:t});return r.totalSize},add:function(e,i){if(!i){i=u.fileManager.getId(e)}if(!i){return}u.fileManager.stack[i]={file:e,name:K.getFileName(e),relativePath:K.getFileRelativePath(e),size:e.size,nameFmt:u._getFileName(e,""),sizeFmt:u._getSize(e.size)}},remove:function(e){var i=e.attr("data-fileid");if(i){u.fileManager.removeFile(i)}},removeFile:function(e){delete u.fileManager.stack[e];delete u.fileManager.loadedImages[e]},move:function(t,r){var a={},n=u.fileManager.stack;if(!t&&!r||t===r){return}q.each(n,function(e,i){if(e!==t){a[e]=i}if(e===r){a[t]=n[t]}});u.fileManager.stack=a},list:function(){var t=[];q.each(u.fileManager.stack,function(e,i){if(i&&i.file){t.push(i.file)}});return t},isPending:function(e){return q.inArray(e,u.fileManager.processed)===-1&&u.fileManager.exists(e)},isProcessed:function(){var i=true,t=u.fileManager;q.each(t.stack,function(e){if(t.isPending(e)){i=false}});return i},clear:function(){var e=u.fileManager;e.totalFiles=null;e.totalSize=null;e.uploadedSize=0;e.stack={};e.errors=[];e.processed=[];e.stats={};e.clearImages()},clearImages:function(){u.fileManager.loadedImages={};u.fileManager.totalImages=0},addImage:function(e,i){u.fileManager.loadedImages[e]=i},removeImage:function(e){delete u.fileManager.loadedImages[e]},getImageIdList:function(){return Object.keys(u.fileManager.loadedImages)},getImageCount:function(){return u.fileManager.getImageIdList().length},getId:function(e){return u._getFileId(e)},getIndex:function(e){return u.fileManager.getIdList().indexOf(e)},getThumb:function(e){var i=null;u._getThumbs().each(function(){if(q(this).attr("data-fileid")===e){i=q(this)}});return i},getThumbIndex:function(e){var i=e.attr("data-fileid");return u.fileManager.getIndex(i)},getIdList:function(){return Object.keys(u.fileManager.stack)},getFile:function(e){return u.fileManager.stack[e]||null},getFileName:function(e,i){var t=u.fileManager.getFile(e);if(!t){return""}return i?t.nameFmt||"":t.name||""},getFirstFile:function(){var e=u.fileManager.getIdList(),i=e&&e.length?e[0]:null;return u.fileManager.getFile(i)},setFile:function(e,i){if(u.fileManager.getFile(e)){u.fileManager.stack[e].file=i}else{u.fileManager.add(i,e)}},setProcessed:function(e){u.fileManager.processed.push(e)},getProgress:function(){var e=u.fileManager.total(),i=u.fileManager.processed.length;if(!e){return 0}return Math.ceil(i/e*100)},setProgress:function(e,i){var t=u.fileManager.getFile(e);if(!isNaN(i)&&t){t.progress=i}}}},_setUploadData:function(r,e){var a=this;q.each(e,function(e,i){var t=a.uploadParamNames[e]||e;if(K.isArray(i)){r.append(t,i[0],i[1])}else{r.append(t,i)}})},_initResumableUpload:function(){var b=this,e=b.resumableUploadOptions,_=K.logMessages;if(!b.enableResumableUpload){return}if(e.fallback!==false&&typeof e.fallback!=="function"){e.fallback=function(e){e._log(_.noResumableSupport);e.enableResumableUpload=false}}if(!K.hasResumableUploadSupport()&&e.fallback!==false){e.fallback(b);return}if(!b.uploadUrl&&b.enableResumableUpload){b._log(_.noUploadUrl);b.enableResumableUpload=false;return}e.chunkSize=parseFloat(e.chunkSize);if(e.chunkSize<=0||isNaN(e.chunkSize)){b._log(_.invalidChunkSize,{chunkSize:e.chunkSize});b.enableResumableUpload=false;return}b.resumableManager={init:function(e,i,t){var r=b.resumableManager,a=b.fileManager;r.currThreads=0;r.logs=[];r.stack=[];r.error="";r.chunkIntervalId=null;r.id=e;r.file=i.file;r.fileName=i.name;r.fileIndex=t;r.completed=false;r.testing=false;r.lastProgress=0;if(b.showPreview){r.$thumb=a.getThumb(e)||null;r.$progress=r.$btnDelete=null;if(r.$thumb&&r.$thumb.length){r.$progress=r.$thumb.find(".file-thumb-progress");r.$btnDelete=r.$thumb.find(".kv-file-remove")}}r.chunkSize=b.resumableUploadOptions.chunkSize*1024;r.chunkCount=r.getTotalChunks()},logAjaxError:function(e,i,t){if(b.resumableUploadOptions.showErrorLog){b._log(_.ajaxError,{status:e.status,error:t,text:e.responseText||""})}},reset:function(){var e=b.resumableManager;e.processed={}},setProcessed:function(e){var i=b.resumableManager,t=b.fileManager,r=i.id,a,n=i.$thumb,o=i.$progress,l=n&&n.length,s={id:l?n.attr("id"):"",index:t.getIndex(r),fileId:r};i.completed=true;i.lastProgress=0;t.uploadedSize+=i.file.size;if(l){n.removeClass("file-uploading")}if(e==="success"){if(b.showPreview){b._setProgress(101,o);b._setThumbStatus(n,"Success");b._initUploadSuccess(i.processed[r].data,n)}b.fileManager.removeFile(r);delete i.processed[r];b._raise("fileuploaded",[s.id,s.index,s.fileId]);if(t.isProcessed()){b._setProgress(101)}}else{if(b.showPreview){b._setThumbStatus(n,"Error");b._setPreviewError(n,true);b._setProgress(101,o,b.msgProgressError);b._setProgress(101,b.$progress,b.msgProgressError);b.cancelling=true}if(!b.$errorContainer.find('li[data-file-id="'+s.fileId+'"]').length){a=b.msgResumableUploadRetriesExceeded.setTokens({file:i.fileName,max:b.resumableUploadOptions.maxRetries,error:i.error});b._showFileError(a,s)}}if(t.isProcessed()){i.reset()}},check:function(){var e=b.resumableManager,t=true;q.each(e.logs,function(e,i){if(!i){t=false;return false}});if(t){clearInterval(e.chunkIntervalId);e.setProcessed("success")}},processedResumables:function(){var e=b.resumableManager.logs,i,t=0;if(!e||!e.length){return 0}for(i=0;i<e.length;i++){if(e[i]===true){t++}}return t},getUploadedSize:function(){var e=b.resumableManager,i=e.processedResumables()*e.chunkSize;return i>e.file.size?e.file.size:i},getTotalChunks:function(){var e=b.resumableManager,i=parseFloat(e.chunkSize);if(!isNaN(i)&&i>0){return Math.ceil(e.file.size/i)}return 0},getProgress:function(){var e=b.resumableManager,i=e.processedResumables(),t=e.chunkCount;if(t===0){return 0}return Math.ceil(i/t*100)},checkAborted:function(e){if(b.paused||b.cancelling){clearInterval(e);b.unlock()}},upload:function(){var t=b.resumableManager,r=b.fileManager,a=r.getIdList(),n="new",o;o=setInterval(function(){var e;t.checkAborted(o);if(n==="new"){b.lock();n="processing";e=a.shift();r.initStats(e);if(r.stack[e]){t.init(e,r.stack[e],r.getIndex(e));t.testUpload();t.uploadResumable()}}if(!r.isPending(e)&&t.completed){n="new"}if(r.isProcessed()){var i=b.$preview.find(".file-preview-initial");if(i.length){K.addCss(i,K.SORT_CSS);b._initSortable()}clearInterval(o);b._clearFileInput();b.unlock();setTimeout(function(){var e=b.previewCache.data;if(e){b.initialPreview=e.content;b.initialPreviewConfig=e.config;b.initialPreviewThumbTags=e.tags}b._raise("filebatchuploadcomplete",[b.initialPreview,b.initialPreviewConfig,b.initialPreviewThumbTags,b._getExtraData()])},b.processDelay)}},b.processDelay)},uploadResumable:function(){var e,i=b.resumableManager,t=i.chunkCount;for(e=0;e<t;e++){i.logs[e]=!!(i.processed[i.id]&&i.processed[i.id][e])}for(e=0;e<t;e++){i.pushAjax(e,0)}i.chunkIntervalId=setInterval(i.loopAjax,b.queueDelay)},testUpload:function(){var o=b.resumableManager,e=b.resumableUploadOptions,l,i,s=b.fileManager,d=o.id,t,r,a,n,f;if(!e.testUrl){o.testing=false;return}o.testing=true;l=new FormData;i=s.stack[d];b._setUploadData(l,{fileId:d,fileName:i.fileName,fileSize:i.size,fileRelativePath:i.relativePath,chunkSize:o.chunkSize,chunkCount:o.chunkCount});t=function(e){f=b._getOutData(l,e);b._raise("filetestbeforesend",[d,s,o,f])};r=function(e,i,t){f=b._getOutData(l,t,e);var r=b.uploadParamNames,a=r.chunksUploaded||"chunksUploaded",n=[d,s,o,f];if(!e[a]||!K.isArray(e[a])){b._raise("filetesterror",n)}else{if(!o.processed[d]){o.processed[d]={}}q.each(e[a],function(e,i){o.logs[i]=true;o.processed[d][i]=true});o.processed[d].data=e;b._raise("filetestsuccess",n)}o.testing=false};a=function(e,i,t){f=b._getOutData(l,e);b._raise("filetestajaxerror",[d,s,o,f]);o.logAjaxError(e,i,t);o.testing=false};n=function(){b._raise("filetestcomplete",[d,s,o,b._getOutData(l)]);o.testing=false};b._ajaxSubmit(t,r,n,a,l,d,o.fileIndex,e.testUrl)},pushAjax:function(e,i){b.resumableManager.stack.push([e,i])},sendAjax:function(l,s){var d=b.fileManager,f=b.resumableManager,e=b.resumableUploadOptions,i,t=f.chunkSize,u=f.id,r=f.file,a=f.$thumb,n=f.$btnDelete;if(f.processed[u]&&f.processed[u][l]){return}f.currThreads++;if(s>e.maxRetries){f.setProcessed("error");return}var c,p,o,g,m,h,v=r.slice?"slice":r.mozSlice?"mozSlice":r.webkitSlice?"webkitSlice":"slice",w=r[v](t*l,t*(l+1));c=new FormData;i=d.stack[u];b._setUploadData(c,{chunkCount:f.chunkCount,chunkIndex:l,chunkSize:t,chunkSizeStart:t*l,fileBlob:[w,f.fileName],fileId:u,fileName:f.fileName,fileRelativePath:i.relativePath,fileSize:r.size,retryCount:s});if(f.$progress&&f.$progress.length){f.$progress.show()}o=function(e){p=b._getOutData(c,e);if(b.showPreview){if(!a.hasClass("file-preview-success")){b._setThumbStatus(a,"Loading");K.addCss(a,"file-uploading")}n.attr("disabled",true)}b._raise("filechunkbeforesend",[u,l,s,d,f,p])};g=function(e,i,t){p=b._getOutData(c,t,e);var r=b.uploadParamNames,a=r.chunkIndex||"chunkIndex",n=b.resumableUploadOptions,o=[u,l,s,d,f,p];f.currThreads--;if(e.error){if(n.showErrorLog){b._log(_.retryStatus,{retry:s+1,filename:f.fileName,chunk:l})}f.pushAjax(l,s+1);f.error=e.error;b._raise("filechunkerror",o)}else{f.logs[e[a]]=true;if(!f.processed[u]){f.processed[u]={}}f.processed[u][e[a]]=true;f.processed[u].data=e;b._raise("filechunksuccess",o);f.check()}};m=function(e,i,t){p=b._getOutData(c,e);f.currThreads--;f.error=t;f.logAjaxError(e,i,t);b._raise("filechunkajaxerror",[u,l,s,d,f,p]);f.pushAjax(l,s+1)};h=function(){b._raise("filechunkcomplete",[u,l,s,d,f,b._getOutData(c)])};b._ajaxSubmit(o,g,h,m,c,u,f.fileIndex)},loopAjax:function(){var e=b.resumableManager;if(e.currThreads<b.resumableUploadOptions.maxThreads&&!e.testing){var i=e.stack.shift(),t;if(typeof i!=="undefined"){t=i[0];if(!e.processed[e.id]||!e.processed[e.id][t]){e.sendAjax(t,i[1])}else{if(e.processedResumables()>=e.getTotalChunks()){e.setProcessed("success");clearInterval(e.chunkIntervalId)}}}}}};b.resumableManager.reset()},_initTemplateDefaults:function(){var t=this,e,i,r,a,n,o,l,s,d,f,u,c,p,g,m,h,v,w,b,_,x,y,C,k,T,P,I,E,S,F,z,A,j,D,M,$,U,R,O,B,L;e="{preview}\n"+'<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n'+'<div class="input-group {class}">\n'+"  {caption}\n"+'<div class="input-group-btn input-group-append">\n'+"      {remove}\n"+"      {cancel}\n"+"      {pause}\n"+"      {upload}\n"+"      {browse}\n"+"    </div>\n"+"</div>";i='{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n'+"{remove}\n{cancel}\n{upload}\n{browse}\n";r='<div class="file-preview {class}">\n'+"    {close}"+'    <div class="{dropClass}">\n'+'    <div class="file-preview-thumbnails">\n'+"    </div>\n"+'    <div class="clearfix"></div>'+'    <div class="file-preview-status text-center text-success"></div>\n'+'    <div class="kv-fileinput-error"></div>\n'+"    </div>\n"+"</div>";n=K.closeButton("fileinput-remove");a='<i class="glyphicon glyphicon-file"></i>';o='<div class="file-caption form-control {class}" tabindex="500">\n'+'  <span class="file-caption-icon"></span>\n'+'  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n'+"</div>";l='<button type="{type}" tabindex="500" title="{title}" class="{css}" '+"{status}>{icon} {label}</button>";s='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>';d='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>';f='<div id="'+K.MODAL_ID+'" class="file-zoom-dialog modal fade" '+'tabindex="-1" aria-labelledby="'+K.MODAL_ID+'Label"></div>';u='<div class="modal-dialog modal-lg{rtl}" role="document">\n'+'  <div class="modal-content">\n'+'    <div class="modal-header">\n'+'      <h5 class="modal-title">{heading}</h5>\n'+'      <span class="kv-zoom-title"></span>\n'+'      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n'+"    </div>\n"+'    <div class="modal-body">\n'+'      <div class="floating-buttons"></div>\n'+'      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n'+"{prev} {next}\n"+"    </div>\n"+"  </div>\n"+"</div>\n";c='<div class="progress">\n'+'    <div class="{class}" role="progressbar"'+' aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n'+"        {status}\n"+"     </div>\n"+"</div>{stats}";L='<div class="text-info file-upload-stats">'+'<span class="pending-time">{pendingTime}</span> '+'<span class="upload-speed">{uploadSpeed}</span>'+"</div>";p=" <samp>({sizeText})</samp>";g='<div class="file-thumbnail-footer">\n'+'    <div class="file-footer-caption" title="{caption}">\n'+'        <div class="file-caption-info">{caption}</div>\n'+'        <div class="file-size-info">{size}</div>\n'+"    </div>\n"+"    {progress}\n{indicator}\n{actions}\n"+"</div>";m='<div class="file-actions">\n'+'    <div class="file-footer-buttons">\n'+"        {download} {upload} {delete} {zoom} {other}"+"    </div>\n"+"</div>\n"+"{drag}\n"+'<div class="clearfix"></div>';h='<button type="button" class="kv-file-remove {removeClass}" '+'title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n';v='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">'+"{uploadIcon}</button>";w='<a class="kv-file-download {downloadClass}" title="{downloadTitle}" '+'href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>';b='<button type="button" class="kv-file-zoom {zoomClass}" '+'title="{zoomTitle}">{zoomIcon}</button>';_='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>';x='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>';y='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}"'+' data-fileid="{fileid}" data-template="{template}"';C=y+'><div class="kv-file-content">\n';k=y+' title="{caption}"><div class="kv-file-content">\n';T="</div>{footer}\n</div>\n";P="{content}\n";R=" {style}";I='<div class="kv-preview-data file-preview-html" title="{caption}"'+R+">{data}</div>\n";E='<img src="{data}" class="file-preview-image kv-preview-data" title="{title}" '+'alt="{alt}"'+R+">\n";S='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly'+R+">"+"{data}</textarea>\n";F='<iframe class="kv-preview-data file-preview-office" '+'src="https://view.officeapps.live.com/op/embed.aspx?src={data}"'+R+"></iframe>";z='<iframe class="kv-preview-data file-preview-gdocs" '+'src="https://docs.google.com/gview?url={data}&embedded=true"'+R+"></iframe>";A='<video class="kv-preview-data file-preview-video" controls'+R+">\n"+'<source src="{data}" type="{type}">\n'+K.DEFAULT_PREVIEW+"\n</video>\n";j='\x3c!--suppress ALL --\x3e<audio class="kv-preview-data file-preview-audio" controls'+R+'>\n<source src="{data}" '+'type="{type}">\n'+K.DEFAULT_PREVIEW+"\n</audio>\n";D='<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash"'+R+">\n";$='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf"'+R+">\n";M='<object class="kv-preview-data file-preview-object file-object {typeCss}" '+'data="{data}" type="{type}"'+R+">\n"+'<param name="movie" value="{caption}" />\n'+K.OBJECT_PARAMS+" "+K.DEFAULT_PREVIEW+"\n</object>\n";U='<div class="kv-preview-data file-preview-other-frame"'+R+">\n"+K.DEFAULT_PREVIEW+"\n</div>\n";O='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>';B={width:"100%",height:"100%","min-height":"480px"};if(t._isPdfRendered()){$=t.pdfRendererTemplate.replace("{renderer}",t._encodeURI(t.pdfRendererUrl))}t.defaults={layoutTemplates:{main1:e,main2:i,preview:r,close:n,fileIcon:a,caption:o,modalMain:f,modal:u,progress:c,stats:L,size:p,footer:g,indicator:x,actions:m,actionDelete:h,actionUpload:v,actionDownload:w,actionZoom:b,actionDrag:_,btnDefault:l,btnLink:s,btnBrowse:d,zoomCache:O},previewMarkupTags:{tagBefore1:C,tagBefore2:k,tagAfter:T},previewContentTemplates:{generic:P,html:I,image:E,text:S,office:F,gdocs:z,video:A,audio:j,flash:D,object:M,pdf:$,other:U},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:B,text:B,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:B,other:{width:"auto",height:"100%","min-height":"480px"}},mimeTypeAliases:{"video/quicktime":"video/mp4"},fileTypeSettings:{image:function(e,i){return K.compare(e,"image.*")&&!K.compare(e,/(tiff?|wmf)$/i)||K.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return K.compare(e,"text/html")||K.compare(i,/\.(htm|html)$/i)},office:function(e,i){return K.compare(e,/(word|excel|powerpoint|office)$/i)||K.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(e,i){return K.compare(e,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||K.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(e,i){return K.compare(e,"text.*")||K.compare(i,/\.(xml|javascript)$/i)||K.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return K.compare(e,"video.*")&&(K.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||K.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return K.compare(e,"audio.*")&&(K.compare(i,/(ogg|mp3|mp?g|wav)$/i)||K.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return K.compare(e,"application/x-shockwave-flash",true)||K.compare(i,/\.(swf)$/i)},pdf:function(e,i){return K.compare(e,"application/pdf",true)||K.compare(i,/\.(pdf)$/i)},object:function(){return true},other:function(){return true}},fileActionSettings:{showRemove:true,showUpload:true,showDownload:true,showZoom:true,showDrag:true,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorPaused:'<i class="glyphicon glyphicon-pause text-primary"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ...",indicatorPausedTitle:"Upload Paused"}};q.each(t.defaults,function(e,i){if(e==="allowedPreviewTypes"){if(t.allowedPreviewTypes===undefined){t.allowedPreviewTypes=i}return}t[e]=q.extend(true,{},i,t[e])});t._initPreviewTemplates()},_initPreviewTemplates:function(){var t=this,r=t.previewMarkupTags,a,n=r.tagAfter;q.each(t.previewContentTemplates,function(e,i){if(K.isEmpty(t.previewTemplates[e])){a=r.tagBefore2;if(e==="generic"||e==="image"||e==="html"||e==="text"){a=r.tagBefore1}if(t._isPdfRendered()&&e==="pdf"){a=a.replace("kv-file-content","kv-file-content kv-pdf-rendered")}t.previewTemplates[e]=a+i+n}})},_initPreviewCache:function(){var y=this;y.previewCache={data:{},init:function(){var e=y.initialPreview;if(e.length>0&&!K.isArray(e)){e=e.split(y.initialPreviewDelimiter)}y.previewCache.data={content:e,config:y.initialPreviewConfig,tags:y.initialPreviewThumbTags}},count:function(e){if(!y.previewCache.data||!y.previewCache.data.content){return 0}if(e){var i=y.previewCache.data.content.filter(function(e){return e!==null});return i.length}return y.previewCache.data.content.length},get:function(e,i){var t="init_"+e,r=y.previewCache.data,d=r.config[e],f,a=r.content[e],n=y.previewInitId+"-"+t,o,l,s,u,c,p,g,m=K.ifSet("previewAsData",d,y.initialPreviewAsData),h=d?{title:d.title||null,alt:d.alt||null}:{title:null,alt:null},v=function(e,i,t,r,a,n,o,l,s){l=" file-preview-initial "+K.SORT_CSS+(l?" "+l:"");f=d&&d.fileId||"file_"+a;return y._generatePreviewTemplate(e,i,t,r,a,f,false,null,l,n,o,s,h,d&&d.zoomData||i)};if(!a||!a.length){return""}i=i===undefined?true:i;s=K.ifSet("type",d,y.initialPreviewFileType||"generic");c=K.ifSet("filename",d,K.ifSet("caption",d));p=K.ifSet("filetype",d,s);u=y.previewCache.footer(e,i,d&&d.size||null);g=K.ifSet("frameClass",d);if(m){o=v(s,a,c,p,n,u,t,g)}else{o=v("generic",a,c,p,n,u,t,g,s).setTokens({content:r.content[e]})}if(r.tags.length&&r.tags[e]){o=K.replaceTags(o,r.tags[e])}if(!K.isEmpty(d)&&!K.isEmpty(d.frameAttr)){l=q(document.createElement("div")).html(o);l.find(".file-preview-initial").attr(d.frameAttr);o=l.html();l.remove()}return o},clean:function(e){e.content=K.cleanArray(e.content);e.config=K.cleanArray(e.config);e.tags=K.cleanArray(e.tags);y.previewCache.data=e},add:function(e,i,t,r){var a=y.previewCache.data,n=e.length-1;if(!e||!e.length){return n}if(!K.isArray(e)){e=e.split(y.initialPreviewDelimiter)}if(r){n=a.content.push(e[0])-1;a.config[n]=i;a.tags[n]=t}else{a.content=e;a.config=i;a.tags=t}y.previewCache.clean(a);return n},set:function(e,i,t,r){var a=y.previewCache.data,n,o;if(!e||!e.length){return}if(!K.isArray(e)){e=e.split(y.initialPreviewDelimiter)}o=e.filter(function(e){return e!==null});if(!o.length){return}if(a.content===undefined){a.content=[]}if(a.config===undefined){a.config=[]}if(a.tags===undefined){a.tags=[]}if(r){for(n=0;n<e.length;n++){if(e[n]){a.content.push(e[n])}}for(n=0;n<i.length;n++){if(i[n]){a.config.push(i[n])}}for(n=0;n<t.length;n++){if(t[n]){a.tags.push(t[n])}}}else{a.content=e;a.config=i;a.tags=t}y.previewCache.clean(a)},unset:function(e){var i=y.previewCache.count(),t=y.reversePreviewOrder;if(!i){return}if(i===1){y.previewCache.data.content=[];y.previewCache.data.config=[];y.previewCache.data.tags=[];y.initialPreview=[];y.initialPreviewConfig=[];y.initialPreviewThumbTags=[];return}y.previewCache.data.content=K.spliceArray(y.previewCache.data.content,e,t);y.previewCache.data.config=K.spliceArray(y.previewCache.data.config,e,t);y.previewCache.data.tags=K.spliceArray(y.previewCache.data.tags,e,t);var r=q.extend(true,{},y.previewCache.data);y.previewCache.clean(r)},out:function(){var e="",i,t=y.previewCache.count(),r,a;if(t===0){return{content:"",caption:""}}for(r=0;r<t;r++){a=y.previewCache.get(r);e=y.reversePreviewOrder?a+e:e+a}i=y._getMsgSelected(t);return{content:e,caption:i}},footer:function(e,i,t){var r=y.previewCache.data||{};if(K.isEmpty(r.content)){return""}if(K.isEmpty(r.config)||K.isEmpty(r.config[e])){r.config[e]={}}i=i===undefined?true:i;var a=r.config[e],n=K.ifSet("caption",a),o,l=K.ifSet("width",a,"auto"),s=K.ifSet("url",a,false),d=K.ifSet("key",a,null),f=K.ifSet("fileId",a,null),u=y.fileActionSettings,c=y.initialPreviewShowDelete||false,p=!y.initialPreviewDownloadUrl?"":y.initialPreviewDownloadUrl+"?key="+d+(f?"&fileId="+f:""),g=a.downloadUrl||p,m=a.filename||a.caption||"",h=!!g,v=K.ifSet("showRemove",a,K.ifSet("showRemove",u,c)),w=K.ifSet("showDownload",a,K.ifSet("showDownload",u,h)),b=K.ifSet("showZoom",a,K.ifSet("showZoom",u,true)),_=K.ifSet("showDrag",a,K.ifSet("showDrag",u,true)),x=s===false&&i;w=w&&a.downloadUrl!==false&&!!g;o=y._renderFileActions(a,false,w,v,b,_,x,s,d,true,g,m);return y._getLayoutTemplate("footer").setTokens({progress:y._renderThumbProgress(),actions:o,caption:n,size:y._getSize(t),width:l,indicator:""})}};y.previewCache.init()},_isPdfRendered:function(){var e=this,i=e.usePdfRenderer,t=typeof i==="function"?i():!!i;return t&&e.pdfRendererUrl},_handler:function(e,i,t){var r=this,a=r.namespace,n=i.split(" ").join(a+" ")+a;if(!e||!e.length){return}e.off(n).on(n,t)},_encodeURI:function(e){var i=this;return i.encodeUrl?encodeURI(e):e},_log:function(e,i){var t=this,r=t.$element.attr("id");if(r){e='"'+r+'": '+e}e="bootstrap-fileinput: "+e;if(typeof i==="object"){e.setTokens(i)}if(typeof window.console.log!=="undefined"){window.console.log(e)}else{window.alert(e)}},_validate:function(){var e=this,i=e.$element.attr("type")==="file";if(!i){e._log(K.logMessages.badInputType)}return i},_errorsExist:function(){var e=this,i,t=e.$errorContainer.find("li");if(t.length){return true}i=q(document.createElement("div")).html(e.$errorContainer.html());i.find(".kv-error-close").remove();i.find("ul").remove();return!!q.trim(i.text()).length},_errorHandler:function(e,i){var t=this,r=e.target.error,a=function(e){t._showError(e.replace("{name}",i))};if(r.code===r.NOT_FOUND_ERR){a(t.msgFileNotFound)}else{if(r.code===r.SECURITY_ERR){a(t.msgFileSecured)}else{if(r.code===r.NOT_READABLE_ERR){a(t.msgFileNotReadable)}else{if(r.code===r.ABORT_ERR){a(t.msgFilePreviewAborted)}else{a(t.msgFilePreviewError)}}}}},_addError:function(e){var i=this,t=i.$errorContainer;if(e&&t.length){t.html(i.errorCloseButton+e);i._handler(t.find(".kv-error-close"),"click",function(){setTimeout(function(){if(i.showPreview&&!i.getFrames().length){i.clear()}t.fadeOut("slow")},i.processDelay)})}},_setValidationError:function(e){var i=this;e=(e?e+" ":"")+"has-error";i.$container.removeClass(e).addClass("has-error");K.addCss(i.$captionContainer,"is-invalid")},_resetErrors:function(e){var i=this,t=i.$errorContainer;i.isError=false;i.$container.removeClass("has-error");i.$captionContainer.removeClass("is-invalid");t.html("");if(e){t.fadeOut("slow")}else{t.hide()}},_showFolderError:function(e){var i=this,t=i.$errorContainer,r;if(!e){return}if(!i.isAjaxUpload){i._clearFileInput()}r=i.msgFoldersNotAllowed.replace("{n}",e);i._addError(r);i._setValidationError();t.fadeIn(800);i._raise("filefoldererror",[e,r])},_showFileError:function(e,i,t){var r=this,a=r.$errorContainer,n=t||"fileuploaderror",o=i&&i.fileId||"",l=i&&i.id?'<li data-thumb-id="'+i.id+'" data-file-id="'+o+'">'+e+"</li>":"<li>"+e+"</li>";if(a.find("ul").length===0){r._addError("<ul>"+l+"</ul>")}else{a.find("ul").append(l)}a.fadeIn(800);r._raise(n,[i,e]);r._setValidationError("file-input-new");return true},_showError:function(e,i,t){var r=this,a=r.$errorContainer,n=t||"fileerror";i=i||{};i.reader=r.reader;r._addError(e);a.fadeIn(800);r._raise(n,[i,e]);if(!r.isAjaxUpload){r._clearFileInput()}r._setValidationError("file-input-new");r.$btnUpload.attr("disabled",true);return true},_noFilesError:function(e){var i=this,t=i.minFileCount>1?i.filePlural:i.fileSingle,r=i.msgFilesTooLess.replace("{n}",i.minFileCount).replace("{files}",t),a=i.$errorContainer;i._addError(r);i.isError=true;i._updateFileDetails(0);a.fadeIn(800);i._raise("fileerror",[e,r]);i._clearFileInput();i._setValidationError()},_parseError:function(e,i,t,r){var a=this,n=q.trim(t+""),o,l=i.responseJSON!==undefined&&i.responseJSON.error!==undefined?i.responseJSON.error:i.responseText;if(a.cancelling&&a.msgUploadAborted){n=a.msgUploadAborted}if(a.showAjaxErrorDetails&&l){l=q.trim(l.replace(/\n\s*\n/g,"\n"));o=l.length?"<pre>"+l+"</pre>":"";n+=n?o:l}if(!n){n=a.msgAjaxError.replace("{operation}",e)}a.cancelling=false;return r?"<b>"+r+": </b>"+n:n},_parseFileType:function(e,i){var t=this,r,a,n,o,l=t.allowedPreviewTypes||[];if(e==="application/text-plain"){return"text"}for(o=0;o<l.length;o++){n=l[o];r=t.fileTypeSettings[n];a=r(e,i)?n:"";if(!K.isEmpty(a)){return a}}return"other"},_getPreviewIcon:function(e){var t=this,r,a=null;if(e&&e.indexOf(".")>-1){r=e.split(".").pop();if(t.previewFileIconSettings){a=t.previewFileIconSettings[r]||t.previewFileIconSettings[r.toLowerCase()]||null}if(t.previewFileExtSettings){q.each(t.previewFileExtSettings,function(e,i){if(t.previewFileIconSettings[e]&&i(r)){a=t.previewFileIconSettings[e];return}})}}return a},_parseFilePreviewIcon:function(e,i){var t=this,r=t._getPreviewIcon(i)||t.previewFileIcon,a=e;if(a.indexOf("{previewFileIcon}")>-1){a=a.setTokens({previewFileIconClass:t.previewFileIconClass,previewFileIcon:r})}return a},_raise:function(e,i){var t=this,r=q.Event(e);if(i!==undefined){t.$element.trigger(r,i)}else{t.$element.trigger(r)}if(r.isDefaultPrevented()||r.result===false){return false}switch(e){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:if(!t.ajaxAborted){t.ajaxAborted=r.result}break}return true},_listenFullScreen:function(e){var i=this,t=i.$modal,r,a;if(!t||!t.length){return}r=t&&t.find(".btn-fullscreen");a=t&&t.find(".btn-borderless");if(!r.length||!a.length){return}r.removeClass("active").attr("aria-pressed","false");a.removeClass("active").attr("aria-pressed","false");if(e){r.addClass("active").attr("aria-pressed","true")}else{a.addClass("active").attr("aria-pressed","true")}if(t.hasClass("file-zoom-fullscreen")){i._maximizeZoomDialog()}else{if(e){i._maximizeZoomDialog()}else{a.removeClass("active").attr("aria-pressed","false")}}},_listen:function(){var e=this,i=e.$element,t=e.$form,r=e.$container,a;e._handler(i,"click",function(e){if(i.hasClass("file-no-browse")){if(i.data("zoneClicked")){i.data("zoneClicked",false)}else{e.preventDefault()}}});e._handler(i,"change",q.proxy(e._change,e));if(e.showBrowse){e._handler(e.$btnFile,"click",q.proxy(e._browse,e))}e._handler(r.find(".fileinput-remove:not([disabled])"),"click",q.proxy(e.clear,e));e._handler(r.find(".fileinput-cancel"),"click",q.proxy(e.cancel,e));e._handler(r.find(".fileinput-pause"),"click",q.proxy(e.pause,e));e._initDragDrop();e._handler(t,"reset",q.proxy(e.clear,e));if(!e.isAjaxUpload){e._handler(t,"submit",q.proxy(e._submitForm,e))}e._handler(e.$container.find(".fileinput-upload"),"click",q.proxy(e._uploadClick,e));e._handler(q(window),"resize",function(){e._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)});a="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";e._handler(q(document),a,function(){e._listenFullScreen(K.checkFullScreen())});e._autoFitContent();e._initClickable();e._refreshPreview()},_autoFitContent:function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=this,i=e<400?t.previewSettingsSmall||t.defaults.previewSettingsSmall:t.previewSettings||t.defaults.previewSettings,r;q.each(i,function(e,i){r=".file-preview-frame .file-preview-"+e;t.$preview.find(r+".kv-preview-data,"+r+" .kv-preview-data").css(i)})},_scanDroppedItems:function(i,t,r){r=r||"";var a=this,n,e,o,l=function(e){a._log(K.logMessages.badDroppedFiles);a._log(e)};if(i.isFile){i.file(function(e){t.push(e)},l)}else{if(i.isDirectory){e=i.createReader();o=function(){e.readEntries(function(e){if(e&&e.length>0){for(n=0;n<e.length;n++){a._scanDroppedItems(e[n],t,r+i.name+"/")}o()}return null},l)};o()}}},_initDragDrop:function(){var e=this,i=e.$dropZone;if(e.dropZoneEnabled&&e.showPreview){e._handler(i,"dragenter dragover",q.proxy(e._zoneDragEnter,e));e._handler(i,"dragleave",q.proxy(e._zoneDragLeave,e));e._handler(i,"drop",q.proxy(e._zoneDrop,e));e._handler(q(document),"dragenter dragover drop",e._zoneDragDropInit)}},_zoneDragDropInit:function(e){e.stopPropagation();e.preventDefault()},_zoneDragEnter:function(e){var i=this,t=e.originalEvent.dataTransfer,r=q.inArray("Files",t.types)>-1;i._zoneDragDropInit(e);if(i.isDisabled||!r){e.originalEvent.dataTransfer.effectAllowed="none";e.originalEvent.dataTransfer.dropEffect="none";return}if(i._raise("fileDragEnter",{sourceEvent:e,files:t.types.Files})){K.addCss(i.$dropZone,"file-highlighted")}},_zoneDragLeave:function(e){var i=this;i._zoneDragDropInit(e);if(i.isDisabled){return}if(i._raise("fileDragLeave",{sourceEvent:e})){i.$dropZone.removeClass("file-highlighted")}},_zoneDrop:function(e){var i=this,t,r=i.$element,a=e.originalEvent.dataTransfer,n=a.files,o=a.items,l=K.getDragDropFolders(o),s=function(){if(!i.isAjaxUpload){i.changeTriggered=true;r.get(0).files=n;setTimeout(function(){i.changeTriggered=false;r.trigger("change"+i.namespace)},i.processDelay)}else{i._change(e,n)}i.$dropZone.removeClass("file-highlighted")};e.preventDefault();if(i.isDisabled||K.isEmpty(n)){return}if(!i._raise("fileDragDrop",{sourceEvent:e,files:n})){return}if(l>0){if(!i.isAjaxUpload){i._showFolderError(l);return}n=[];for(t=0;t<o.length;t++){var d=o[t].webkitGetAsEntry();if(d){i._scanDroppedItems(d,n)}}setTimeout(function(){s()},500)}else{s()}},_uploadClick:function(e){var i=this,t=i.$container.find(".fileinput-upload"),r,a=!t.hasClass("disabled")&&K.isEmpty(t.attr("disabled"));if(e&&e.isDefaultPrevented()){return}if(!i.isAjaxUpload){if(a&&t.attr("type")!=="submit"){r=t.closest("form");if(r.length){r.trigger("submit")}e.preventDefault()}return}e.preventDefault();if(a){i.upload()}},_submitForm:function(){var e=this;return e._isFileSelectionValid()&&!e._abort({})},_clearPreview:function(){var e=this,i=e.$preview,t=e.showUploadedThumbs?e.getFrames(":not(.file-preview-success)"):e.getFrames();t.each(function(){var e=q(this);e.remove();K.cleanZoomCache(i.find("#zoom-"+e.attr("id")))});if(!e.getFrames().length||!e.showPreview){e._resetUpload()}e._validateDefaultPreview()},_initSortable:function(){var a=this,e=a.$preview,i,t="."+K.SORT_CSS,n=a.reversePreviewOrder;if(!window.KvSortable||e.find(t).length===0){return}i={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:false,draggable:t,onSort:function(e){var i=e.oldIndex,t=e.newIndex,r=0;a.initialPreview=K.moveArray(a.initialPreview,i,t,n);a.initialPreviewConfig=K.moveArray(a.initialPreviewConfig,i,t,n);a.previewCache.init();a.getFrames(".file-preview-initial").each(function(){q(this).attr("data-fileindex","init_"+r);r++});a._raise("filesorted",{previewId:q(e.item).attr("id"),oldIndex:i,newIndex:t,stack:a.initialPreviewConfig})}};if(e.data("kvsortable")){e.kvsortable("destroy")}q.extend(true,i,a.fileActionSettings.dragSettings);e.kvsortable(i)},_setPreviewContent:function(e){var i=this;i.$preview.html(e);i._autoFitContent()},_initPreviewImageOrientations:function(){var n=this,o=0;if(!n.autoOrientImageInitial){return}n.getFrames(".file-preview-initial").each(function(){var e=q(this),i,t,r,a=n.initialPreviewConfig[o];if(a&&a.exif&&a.exif.Orientation){r=e.attr("id");i=e.find(">.kv-file-content img");t=n.$preview.find("#zoom-"+r+" >.kv-file-content img");n.setImageOrientation(i,t,a.exif.Orientation,e)}o++})},_initPreview:function(e){var i=this,t=i.initialCaption||"",r;if(!i.previewCache.count(true)){i._clearPreview();if(e){i._setCaption(t)}else{i._initCaption()}return}r=i.previewCache.out();t=e&&i.initialCaption?i.initialCaption:r.caption;i._setPreviewContent(r.content);i._setInitThumbAttr();i._setCaption(t);i._initSortable();if(!K.isEmpty(r.content)){i.$container.removeClass("file-input-new")}i._initPreviewImageOrientations()},_getZoomButton:function(e){var i=this,t=i.previewZoomButtonIcons[e],r=i.previewZoomButtonClasses[e],a=' title="'+(i.previewZoomButtonTitles[e]||"")+'" ',n=a+(e==="close"?' data-dismiss="modal" aria-hidden="true"':"");if(e==="fullscreen"||e==="borderless"||e==="toggleheader"){n+=' data-toggle="button" aria-pressed="false" autocomplete="off"'}return'<button type="button" class="'+r+" btn-"+e+'"'+n+">"+t+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({rtl:e.rtl?" kv-rtl":"",zoomFrameClass:e.frameClass,heading:e.msgZoomModalHeading,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(r){var a=this,n=a.$modal,o=function(e){return{sourceEvent:e,previewId:n.data("previewId"),modal:n}};n.on(r+".bs.modal",function(e){var i=n.find(".btn-fullscreen"),t=n.find(".btn-borderless");a._raise("filezoom"+r,o(e));if(r==="shown"){t.removeClass("active").attr("aria-pressed","false");i.removeClass("active").attr("aria-pressed","false");if(n.hasClass("file-zoom-fullscreen")){a._maximizeZoomDialog();if(K.checkFullScreen()){i.addClass("active").attr("aria-pressed","true")}else{t.addClass("active").attr("aria-pressed","true")}}}})},_initZoom:function(){var t=this,e,i=t._getLayoutTemplate("modalMain"),r="#"+K.MODAL_ID;if(!t.showPreview){return}t.$modal=q(r);if(!t.$modal||!t.$modal.length){e=q(document.createElement("div")).html(i).insertAfter(t.$container);t.$modal=q(r).insertBefore(e);e.remove()}K.initModal(t.$modal);t.$modal.html(t._getModalContent());q.each(K.MODAL_EVENTS,function(e,i){t._listenModalEvent(i)})},_initZoomButtons:function(){var e=this,i=e.$modal.data("previewId")||"",t,r,a=e.getFrames().toArray(),n=a.length,o=e.$modal.find(".btn-prev"),l=e.$modal.find(".btn-next");if(a.length<2){o.hide();l.hide();return}else{o.show();l.show()}if(!n){return}t=q(a[0]);r=q(a[n-1]);o.removeAttr("disabled");l.removeAttr("disabled");if(t.length&&t.attr("id")===i){o.attr("disabled",true)}if(r.length&&r.attr("id")===i){l.attr("disabled",true)}},_maximizeZoomDialog:function(){var e=this,i=e.$modal,t=i.find(".modal-header:visible"),r=i.find(".modal-footer:visible"),a=i.find(".modal-body"),n=q(window).height(),o=0;i.addClass("file-zoom-fullscreen");if(t&&t.length){n-=t.outerHeight(true)}if(r&&r.length){n-=r.outerHeight(true)}if(a&&a.length){o=a.outerHeight(true)-a.height();n-=o}i.find(".kv-zoom-body").height(n)},_resizeZoomDialog:function(e){var i=this,t=i.$modal,r=t.find(".btn-fullscreen"),a=t.find(".btn-borderless");if(t.hasClass("file-zoom-fullscreen")){K.toggleFullScreen(false);if(!e){if(!r.hasClass("active")){t.removeClass("file-zoom-fullscreen");i.$modal.find(".kv-zoom-body").css("height",i.zoomModalHeight)}else{r.removeClass("active").attr("aria-pressed","false")}}else{if(!r.hasClass("active")){t.removeClass("file-zoom-fullscreen");i._resizeZoomDialog(true);if(a.hasClass("active")){a.removeClass("active").attr("aria-pressed","false")}}}}else{if(!e){i._maximizeZoomDialog();return}K.toggleFullScreen(true)}t.focus()},_setZoomContent:function(e,i){var l=this,t,r,a,n,o,s,d,f=e.attr("id"),u=l.$preview.find("#zoom-"+f),c=l.$modal,p,g=c.find(".btn-fullscreen"),m=c.find(".btn-borderless"),h,v,w=c.find(".btn-toggleheader");r=u.attr("data-template")||"generic";t=u.find(".kv-file-content");a=t.length?t.html():"";h=e.data("caption")||"";v=e.data("size")||"";n=h+" "+v;c.find(".kv-zoom-title").attr("title",q("<div/>").html(n).text()).html(n);o=c.find(".kv-zoom-body");c.removeClass("kv-single-content");if(i){p=o.addClass("file-thumb-loading").clone().insertAfter(o);o.html(a).hide();p.fadeOut("fast",function(){o.fadeIn("fast",function(){o.removeClass("file-thumb-loading")});p.remove()})}else{o.html(a)}d=l.previewZoomSettings[r];if(d){s=o.find(".kv-preview-data");K.addCss(s,"file-zoom-detail");q.each(d,function(e,i){s.css(e,i);if(s.attr("width")&&e==="width"||s.attr("height")&&e==="height"){s.removeAttr(e)}})}c.data("previewId",f);l._handler(c.find(".btn-prev"),"click",function(){l._zoomSlideShow("prev",f)});l._handler(c.find(".btn-next"),"click",function(){l._zoomSlideShow("next",f)});l._handler(g,"click",function(){l._resizeZoomDialog(true)});l._handler(m,"click",function(){l._resizeZoomDialog(false)});l._handler(w,"click",function(){var r=c.find(".modal-header"),e=c.find(".modal-body .floating-buttons"),i,t=r.find(".kv-zoom-actions"),a=function(e){var i=l.$modal.find(".kv-zoom-body"),t=l.zoomModalHeight;if(c.hasClass("file-zoom-fullscreen")){t=i.outerHeight(true);if(!e){t=t-r.outerHeight(true)}}i.css("height",e?t+e:t)};if(r.is(":visible")){i=r.outerHeight(true);r.slideUp("slow",function(){t.find(".btn").appendTo(e);a(i)})}else{e.find(".btn").appendTo(t);r.slideDown("slow",function(){a()})}c.focus()});l._handler(c,"keydown",function(e){var i=e.which||e.keyCode,t=q(this).find(".btn-prev"),r=q(this).find(".btn-next"),a=q(this).data("previewId"),n=l.rtl?39:37,o=l.rtl?37:39;if(i===n&&t.length&&!t.attr("disabled")){l._zoomSlideShow("prev",a)}if(i===o&&r.length&&!r.attr("disabled")){l._zoomSlideShow("next",a)}})},_zoomPreview:function(e){var i=this,t,r=i.$modal;if(!e.length){throw"Cannot zoom to detailed preview!"}K.initModal(r);r.html(i._getModalContent());t=e.closest(K.FRAMES);i._setZoomContent(t);r.modal("show");i._initZoomButtons()},_zoomSlideShow:function(e,i){var t=this,r=t.$modal.find(".kv-zoom-actions .btn-"+e),a,n,o=t.getFrames().toArray(),l=o.length,s;if(r.attr("disabled")){return}for(n=0;n<l;n++){if(q(o[n]).attr("id")===i){s=e==="prev"?n-1:n+1;break}}if(s<0||s>=l||!o[s]){return}a=q(o[s]);if(a.length){t._setZoomContent(a,true)}t._initZoomButtons();t._raise("filezoom"+e,{previewId:i,modal:t.$modal})},_initZoomButton:function(){var i=this;i.$preview.find(".kv-file-zoom").each(function(){var e=q(this);i._handler(e,"click",function(){i._zoomPreview(e)})})},_inputFileCount:function(){return this.$element.get(0).files.length},_refreshPreview:function(){var e=this,i;if(!e._inputFileCount()&&!e.isAjaxUpload||!e.showPreview||!e.isPreviewable){return}if(e.isAjaxUpload){if(e.fileManager.count()>0){i=q.extend(true,{},e.fileManager.stack);e.fileManager.clear();e._clearFileInput()}else{i=e.$element.get(0).files}}else{i=e.$element.get(0).files}if(i&&i.length){e.readFiles(i);e._setFileDropZoneTitle()}},_clearObjects:function(e){e.find("video audio").each(function(){this.pause();q(this).remove()});e.find("img object div").each(function(){q(this).remove()})},_clearFileInput:function(){var e=this,i=e.$element,t,r,a;if(!e._inputFileCount()){return}t=i.closest("form");r=q(document.createElement("form"));a=q(document.createElement("div"));i.before(a);if(t.length){t.after(r)}else{a.after(r)}r.append(i).trigger("reset");a.before(i).remove();r.remove()},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:true};e.$btnUpload.removeAttr("disabled");e._setProgress(0);e.$progress.hide();e._resetErrors(false);e._initAjax();e.fileManager.clearImages();e._resetCanvas();e.cacheInitialPreview={};if(e.overwriteInitial){e.initialPreview=[];e.initialPreviewConfig=[];e.initialPreviewThumbTags=[];e.previewCache.data={content:[],config:[],tags:[]}}},_resetCanvas:function(){var e=this;if(e.canvas&&e.imageCanvasContext){e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)}},_hasInitialPreview:function(){var e=this;return!e.overwriteInitial&&e.previewCache.count(true)},_resetPreview:function(){var e=this,i,t;if(e.previewCache.count(true)){i=e.previewCache.out();e._setPreviewContent(i.content);e._setInitThumbAttr();t=e.initialCaption?e.initialCaption:i.caption;e._setCaption(t)}else{e._clearPreview();e._initCaption()}if(e.showPreview){e._initZoom();e._initSortable()}},_clearDefaultPreview:function(){var e=this;e.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;if(!e.showPreview||K.isEmpty(e.defaultPreviewContent)){return}e._setPreviewContent('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>");e.$container.removeClass("file-input-new");e._initClickable()},_resetPreviewThumbs:function(e){var i=this,t;if(e){i._clearPreview();i.clearFileStack();return}if(i._hasInitialPreview()){t=i.previewCache.out();i._setPreviewContent(t.content);i._setInitThumbAttr();i._setCaption(t.caption);i._initPreviewActions()}else{i._clearPreview()}},_getLayoutTemplate:function(e){var i=this,t=i.layoutTemplates[e];if(K.isEmpty(i.customLayoutTags)){return t}return K.replaceTags(t,i.customLayoutTags)},_getPreviewTemplate:function(e){var i=this,t=i.previewTemplates[e];if(K.isEmpty(i.customPreviewTags)){return t}return K.replaceTags(t,i.customPreviewTags)},_getOutData:function(e,i,t,r){var a=this;i=i||{};t=t||{};r=r||a.fileManager.list();return{formdata:e,files:r,filenames:a.filenames,filescount:a.getFilesCount(),extra:a._getExtraData(),response:t,reader:a.reader,jqXHR:i}},_getMsgSelected:function(e){var i=this,t=e===1?i.fileSingle:i.filePlural;return e>0?i.msgSelected.replace("{n}",e).replace("{files}",t):i.msgNoFilesSelected},_getFrame:function(e){var i=this,t=q("#"+e);if(!t.length){i._log(K.logMessages.invalidThumb,{id:e});return null}return t},_getThumbs:function(e){e=e||"";return this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,i){var t=this,r=t.uploadExtraData;if(typeof t.uploadExtraData==="function"){r=t.uploadExtraData(e,i)}return r},_initXhr:function(e,n,o){var l=this,s=l.fileManager,i=function(e){var i=0,t=e.total,r=e.loaded||e.position,a=s.getUploadStats(n,r,t);if(e.lengthComputable&&!l.enableResumableUpload){i=K.round(r/t*100)}if(n){l._setFileUploadStats(n,i,o,a)}else{l._setProgress(i,null,null,l._getStats(a))}l._raise("fileajaxprogress",[a])};if(e.upload){if(l.progressDelay){i=K.debounce(i,l.progressDelay)}e.upload.addEventListener("progress",i,false)}return e},_initAjaxSettings:function(){var e=this;e._ajaxSettings=q.extend(true,{},e.ajaxSettings);e._ajaxDeleteSettings=q.extend(true,{},e.ajaxDeleteSettings)},_mergeAjaxCallback:function(e,i,t){var r=this,a=r._ajaxSettings,n=r.mergeAjaxCallbacks,o;if(t==="delete"){a=r._ajaxDeleteSettings;n=r.mergeAjaxDeleteCallbacks}o=a[e];if(n&&typeof o==="function"){if(n==="before"){a[e]=function(){o.apply(this,arguments);i.apply(this,arguments)}}else{a[e]=function(){i.apply(this,arguments);o.apply(this,arguments)}}}else{a[e]=i}},_ajaxSubmit:function(e,i,t,r,a,n,o,l){var s=this,d,f,u,c;if(!s._raise("filepreajax",[a,n,o])){return}a.append("initialPreview",JSON.stringify(s.initialPreview));a.append("initialPreviewConfig",JSON.stringify(s.initialPreviewConfig));a.append("initialPreviewThumbTags",JSON.stringify(s.initialPreviewThumbTags));s._initAjaxSettings();s._mergeAjaxCallback("beforeSend",e);s._mergeAjaxCallback("success",i);s._mergeAjaxCallback("complete",t);s._mergeAjaxCallback("error",r);l=l||s.uploadUrlThumb||s.uploadUrl;if(typeof l==="function"){l=l()}u=s._getExtraData(n,o)||{};if(typeof u==="object"){q.each(u,function(e,i){a.append(e,i)})}f={xhr:function(){var e=q.ajaxSettings.xhr();return s._initXhr(e,n,s.fileManager.count())},url:s._encodeURI(l),type:"POST",dataType:"json",data:a,cache:false,processData:false,contentType:false};d=q.extend(true,{},f,s._ajaxSettings);s.ajaxQueue.push(d);c=function(){var e,i;if(s.ajaxCurrentThreads<s.maxAjaxThreads){e=s.ajaxQueue.shift();if(typeof e!=="undefined"){s.ajaxCurrentThreads++;i=q.ajax(e).done(function(){clearInterval(s.ajaxQueueIntervalId);s.ajaxCurrentThreads--});s.ajaxRequests.push(i)}}};s.ajaxQueueIntervalId=setInterval(c,s.queueDelay)},_mergeArray:function(e,i){var t=this,r=K.cleanArray(t[e]),a=K.cleanArray(i);t[e]=r.concat(a)},_initUploadSuccess:function(e,i,t){var r=this,a,n,o,l,s,d,f,u,c;if(!r.showPreview||typeof e!=="object"||q.isEmptyObject(e)){return}if(e.initialPreview!==undefined&&e.initialPreview.length>0){r.hasInitData=true;d=e.initialPreview||[];f=e.initialPreviewConfig||[];u=e.initialPreviewThumbTags||[];a=e.append===undefined||e.append;if(d.length>0&&!K.isArray(d)){d=d.split(r.initialPreviewDelimiter)}if(d.length){r._mergeArray("initialPreview",d);r._mergeArray("initialPreviewConfig",f);r._mergeArray("initialPreviewThumbTags",u)}if(i!==undefined){if(!t){o=r.previewCache.add(d[0],f[0],u[0],a);n=r.previewCache.get(o,false);l=q(document.createElement("div")).html(n).hide().insertAfter(i);s=l.find(".kv-zoom-cache");if(s&&s.length){s.insertAfter(i)}i.fadeOut("slow",function(){var e=l.find(".file-preview-frame");if(e&&e.length){e.insertBefore(i).fadeIn("slow").css("display:inline-block")}r._initPreviewActions();r._clearFileInput();K.cleanZoomCache(r.$preview.find("#zoom-"+i.attr("id")));i.remove();l.remove();r._initSortable()})}else{c=i.attr("data-fileindex");r.uploadCache.content[c]=d[0];r.uploadCache.config[c]=f[0]||[];r.uploadCache.tags[c]=u[0]||[];r.uploadCache.append=a}}else{r.previewCache.set(d,f,u,a);r._initPreview();r._initPreviewActions()}}},_initSuccessThumbs:function(){var a=this;if(!a.showPreview){return}a._getThumbs(K.FRAMES+".file-preview-success").each(function(){var t=q(this),r=a.$preview,e=t.find(".kv-file-remove");e.removeAttr("disabled");a._handler(e,"click",function(){var e=t.attr("id"),i=a._raise("filesuccessremove",[e,t.attr("data-fileindex")]);K.cleanMemory(t);if(i===false){return}t.fadeOut("slow",function(){K.cleanZoomCache(r.find("#zoom-"+e));t.remove();if(!a.getFrames().length){a.reset()}})})})},_updateInitialPreview:function(){var e=this,i=e.uploadCache,t,r,a=0,n=e.cacheInitialPreview;if(n&&n.content){a=n.content.length}if(e.showPreview){e.previewCache.set(i.content,i.config,i.tags,i.append);if(a){for(t=0;t<i.content.length;t++){r=t+a;n.content[r]=i.content[t];if(n.config.length){n.config[r]=i.config[t]}if(n.tags.length){n.tags[r]=i.tags[t]}}e.initialPreview=K.cleanArray(n.content);e.initialPreviewConfig=K.cleanArray(n.config);e.initialPreviewThumbTags=K.cleanArray(n.tags)}else{e.initialPreview=i.content;e.initialPreviewConfig=i.config;e.initialPreviewThumbTags=i.tags}e.cacheInitialPreview={};if(e.hasInitData){e._initPreview();e._initPreviewActions()}}},_uploadSingle:function(a,n,o){var l=this,r=l.fileManager,e=r.count(),s=new FormData,d,f=l.previewInitId+"-"+a,u,i,c,t,p=e>0||!q.isEmptyObject(l.uploadExtraData),g,m,h,v,w,b,_,x,y=l.ajaxOperations.uploadThumb,C=r.getFile(n),k={id:f,index:a,fileId:n},T=l.fileManager.getFileName(n,true);if(l.enableResumableUpload){return}if(l.showPreview){u=l.fileManager.getThumb(n);m=u.find(".file-thumb-progress");c=u.find(".kv-file-upload");t=u.find(".kv-file-remove");m.show()}if(e===0||!p||l.showPreview&&c&&c.hasClass("disabled")||l._abort(k)){return}x=function(){if(!g){r.removeFile(n)}else{r.errors.push(n)}r.setProcessed(n);if(r.isProcessed()){l.fileBatchCompleted=true}};i=function(){var t;if(!l.fileBatchCompleted){return}setTimeout(function(){var e=r.count()===0,i=r.errors.length;l._updateInitialPreview();l.unlock(e);if(e){l._clearFileInput()}t=l.$preview.find(".file-preview-initial");if(l.uploadAsync&&t.length){K.addCss(t,K.SORT_CSS);l._initSortable()}l._raise("filebatchuploadcomplete",[r.stack,l._getExtraData()]);if(!l.retryErrorUploads||i===0){r.clear()}l._setProgress(101);l.ajaxAborted=false},l.processDelay)};h=function(e){d=l._getOutData(s,e);r.initStats(n);l.fileBatchCompleted=false;if(!o){l.ajaxAborted=false}if(l.showPreview){if(!u.hasClass("file-preview-success")){l._setThumbStatus(u,"Loading");K.addCss(u,"file-uploading")}c.attr("disabled",true);t.attr("disabled",true)}if(!o){l.lock()}if(r.errors.indexOf(n)!==-1){delete r.errors[n]}l._raise("filepreupload",[d,f,a]);q.extend(true,k,d);if(l._abort(k)){e.abort();if(!o){l._setThumbStatus(u,"New");u.removeClass("file-uploading");c.removeAttr("disabled");t.removeAttr("disabled");l.unlock()}l._setProgressCancelled()}};w=function(e,i,t){var r=l.showPreview&&u.attr("id")?u.attr("id"):f;d=l._getOutData(s,t,e);q.extend(true,k,d);setTimeout(function(){if(K.isEmpty(e)||K.isEmpty(e.error)){if(l.showPreview){l._setThumbStatus(u,"Success");c.hide();l._initUploadSuccess(e,u,o);l._setProgress(101,m)}l._raise("fileuploaded",[d,r,a]);if(!o){l.fileManager.remove(u)}else{x()}}else{g=true;v=l._parseError(y,t,l.msgUploadError,l.fileManager.getFileName(n));l._showFileError(v,k);l._setPreviewError(u,true);if(!l.retryErrorUploads){c.hide()}if(o){x()}l._setProgress(101,q("#"+r).find(".file-thumb-progress"),l.msgUploadError)}},l.processDelay)};b=function(){setTimeout(function(){if(l.showPreview){c.removeAttr("disabled");t.removeAttr("disabled");u.removeClass("file-uploading")}if(!o){l.unlock(false);l._clearFileInput()}else{i()}l._initSuccessThumbs()},l.processDelay)};_=function(e,i,t){v=l._parseError(y,e,t,l.fileManager.getFileName(n));g=true;setTimeout(function(){if(o){x()}l.fileManager.setProgress(n,100);l._setPreviewError(u,true);if(!l.retryErrorUploads){c.hide()}q.extend(true,k,l._getOutData(s,e));l._setProgress(101,m,l.msgAjaxProgressError.replace("{operation}",y));l._setProgress(101,u.find(".file-thumb-progress"),l.msgUploadError);l._showFileError(v,k)},l.processDelay)};s.append(l.uploadFileAttr,C.file,T);l._setUploadData(s,{fileId:n});l._ajaxSubmit(h,w,b,_,s,n,a)},_uploadBatch:function(){var l=this,t=l.fileManager,a=t.total(),e={},i,r,n,o,s=a>0||!q.isEmptyObject(l.uploadExtraData),d,f,u=new FormData,c=l.ajaxOperations.uploadBatch;if(a===0||!s||l._abort(e)){return}f=function(){l.fileManager.clear();l._clearFileInput()};i=function(e){l.lock();t.initStats();var i=l._getOutData(u,e);l.ajaxAborted=false;if(l.showPreview){l._getThumbs().each(function(){var e=q(this),i=e.find(".kv-file-upload"),t=e.find(".kv-file-remove");if(!e.hasClass("file-preview-success")){l._setThumbStatus(e,"Loading");K.addCss(e,"file-uploading")}i.attr("disabled",true);t.attr("disabled",true)})}l._raise("filebatchpreupload",[i]);if(l._abort(i)){e.abort();l._getThumbs().each(function(){var e=q(this),i=e.find(".kv-file-upload"),t=e.find(".kv-file-remove");if(e.hasClass("file-preview-loading")){l._setThumbStatus(e,"New");e.removeClass("file-uploading")}i.removeAttr("disabled");t.removeAttr("disabled")});l._setProgressCancelled()}};r=function(e,i,t){var r=l._getOutData(u,t,e),a=0,n=l._getThumbs(":not(.file-preview-success)"),o=K.isEmpty(e)||K.isEmpty(e.errorkeys)?[]:e.errorkeys;if(K.isEmpty(e)||K.isEmpty(e.error)){l._raise("filebatchuploadsuccess",[r]);f();if(l.showPreview){n.each(function(){var e=q(this);l._setThumbStatus(e,"Success");e.removeClass("file-uploading");e.find(".kv-file-upload").hide().removeAttr("disabled")});l._initUploadSuccess(e)}else{l.reset()}l._setProgress(101)}else{if(l.showPreview){n.each(function(){var e=q(this);e.removeClass("file-uploading");e.find(".kv-file-upload").removeAttr("disabled");e.find(".kv-file-remove").removeAttr("disabled");if(o.length===0||q.inArray(a,o)!==-1){l._setPreviewError(e,true);if(!l.retryErrorUploads){e.find(".kv-file-upload").hide();l.fileManager.remove(e)}}else{e.find(".kv-file-upload").hide();l._setThumbStatus(e,"Success");l.fileManager.remove(e)}if(!e.hasClass("file-preview-error")||l.retryErrorUploads){a++}});l._initUploadSuccess(e)}d=l._parseError(c,t,l.msgUploadError);l._showFileError(d,r,"filebatchuploaderror");l._setProgress(101,l.$progress,l.msgUploadError)}};o=function(){l.unlock();l._initSuccessThumbs();l._clearFileInput();l._raise("filebatchuploadcomplete",[l.fileManager.stack,l._getExtraData()])};n=function(e,i,t){var r=l._getOutData(u,e);d=l._parseError(c,e,t);l._showFileError(d,r,"filebatchuploaderror");l.uploadFileCount=a-1;if(!l.showPreview){return}l._getThumbs().each(function(){var e=q(this);e.removeClass("file-uploading");if(l.fileManager.getFile(e.attr("data-fileid"))){l._setPreviewError(e)}});l._getThumbs().removeClass("file-uploading");l._getThumbs(" .kv-file-upload").removeAttr("disabled");l._getThumbs(" .kv-file-delete").removeAttr("disabled");l._setProgress(101,l.$progress,l.msgAjaxProgressError.replace("{operation}",c))};var p=0;q.each(l.fileManager.stack,function(e,i){if(!K.isEmpty(i.file)){u.append(l.uploadFileAttr,i.file,i.nameFmt||"untitled_"+p)}p++});l._ajaxSubmit(i,r,o,n,u)},_uploadExtraOnly:function(){var a=this,n={},e,i,t,r,o=new FormData,l,s=a.ajaxOperations.uploadExtra;if(a._abort(n)){return}e=function(e){a.lock();var i=a._getOutData(o,e);a._raise("filebatchpreupload",[i]);a._setProgress(50);n.data=i;n.xhr=e;if(a._abort(n)){e.abort();a._setProgressCancelled()}};i=function(e,i,t){var r=a._getOutData(o,t,e);if(K.isEmpty(e)||K.isEmpty(e.error)){a._raise("filebatchuploadsuccess",[r]);a._clearFileInput();a._initUploadSuccess(e);a._setProgress(101)}else{l=a._parseError(s,t,a.msgUploadError);a._showFileError(l,r,"filebatchuploaderror")}};t=function(){a.unlock();a._clearFileInput();a._raise("filebatchuploadcomplete",[a.fileManager.stack,a._getExtraData()])};r=function(e,i,t){var r=a._getOutData(o,e);l=a._parseError(s,e,t);n.data=r;a._showFileError(l,r,"filebatchuploaderror");a._setProgress(101,a.$progress,a.msgAjaxProgressError.replace("{operation}",s))};a._ajaxSubmit(e,i,t,r,o)},_deleteFileIndex:function(e){var i=this,t=e.attr("data-fileindex"),r=i.reversePreviewOrder;if(t.substring(0,5)==="init_"){t=parseInt(t.replace("init_",""));i.initialPreview=K.spliceArray(i.initialPreview,t,r);i.initialPreviewConfig=K.spliceArray(i.initialPreviewConfig,t,r);i.initialPreviewThumbTags=K.spliceArray(i.initialPreviewThumbTags,t,r);i.getFrames().each(function(){var e=q(this),i=e.attr("data-fileindex");if(i.substring(0,5)==="init_"){i=parseInt(i.replace("init_",""));if(i>t){i--;e.attr("data-fileindex","init_"+i)}}});if(i.uploadAsync||i.enableResumableUpload){i.cacheInitialPreview=i.getPreview()}}},_initFileActions:function(){var f=this,u=f.$preview;if(!f.showPreview){return}f._initZoomButton();f.getFrames(" .kv-file-remove").each(function(){var e=q(this),a=e.closest(K.FRAMES),n,o=a.attr("id"),l=a.attr("data-fileindex"),s,d,i;f._handler(e,"click",function(){i=f._raise("filepreremove",[o,l]);if(i===false||!f._validateMinCount()){return false}n=a.hasClass("file-preview-error");K.cleanMemory(a);a.fadeOut("slow",function(){K.cleanZoomCache(u.find("#zoom-"+o));f.fileManager.remove(a);f._clearObjects(a);a.remove();if(o&&n){f.$errorContainer.find('li[data-thumb-id="'+o+'"]').fadeOut("fast",function(){q(this).remove();if(!f._errorsExist()){f._resetErrors()}})}f._clearFileInput();var e=f.previewCache.count(true),i=f.fileManager.count(),t,r=f.showPreview&&f.getFrames().length;if(i===0&&e===0&&!r){f.reset()}else{s=e+i;if(s>1){d=f._getMsgSelected(s)}else{t=f.fileManager.getFirstFile();d=t?t.nameFmt:"_"}f._setCaption(d)}f._raise("fileremoved",[o,l])})})});f.getFrames(" .kv-file-upload").each(function(){var t=q(this);f._handler(t,"click",function(){var e=t.closest(K.FRAMES),i=e.attr("data-fileid");f.$progress.hide();if(e.hasClass("file-preview-error")&&!f.retryErrorUploads){return}f._uploadSingle(f.fileManager.getIndex(i),i,false)})})},_initPreviewActions:function(){var h=this,v=h.$preview,w=h.deleteExtraData||{},e=K.FRAMES+" .kv-file-remove",i=h.fileActionSettings,b=i.removeClass,_=i.removeErrorClass,x=function(){var e=h.isAjaxUpload?h.previewCache.count(true):h._inputFileCount();if(!h.getFrames().length&&!e){h._setCaption("");h.reset();h.initialCaption=""}};h._initZoomButton();v.find(e).each(function(){var n=q(this),e=n.data("url")||h.deleteUrl,o=n.data("key"),l,i,t,r,s=h.ajaxOperations.deleteThumb;if(K.isEmpty(e)||o===undefined){return}if(typeof e==="function"){e=e()}var d=n.closest(K.FRAMES),a=h.previewCache.data,f,u,c,p,g,m=d.attr("data-fileindex");m=parseInt(m.replace("init_",""));c=K.isEmpty(a.config)&&K.isEmpty(a.config[m])?null:a.config[m];g=K.isEmpty(c)||K.isEmpty(c.extra)?w:c.extra;p=c.filename||c.caption||"";if(typeof g==="function"){g=g()}u={id:n.attr("id"),key:o,extra:g};i=function(e){h.ajaxAborted=false;h._raise("filepredelete",[o,e,g]);if(h._abort()){e.abort()}else{n.removeClass(_);K.addCss(d,"file-uploading");K.addCss(n,"disabled "+b)}};t=function(e,i,t){var r,a;if(!K.isEmpty(e)&&!K.isEmpty(e.error)){u.jqXHR=t;u.response=e;l=h._parseError(s,t,h.msgDeleteError,p);h._showFileError(l,u,"filedeleteerror");d.removeClass("file-uploading");n.removeClass("disabled "+b).addClass(_);x();return}d.removeClass("file-uploading").addClass("file-deleted");d.fadeOut("slow",function(){m=parseInt(d.attr("data-fileindex").replace("init_",""));h.previewCache.unset(m);h._deleteFileIndex(d);r=h.previewCache.count(true);a=r>0?h._getMsgSelected(r):"";h._setCaption(a);h._raise("filedeleted",[o,t,g]);K.cleanZoomCache(v.find("#zoom-"+d.attr("id")));h._clearObjects(d);d.remove();x()})};r=function(e,i,t){var r=h._parseError(s,e,t,p);u.jqXHR=e;u.response={};h._showFileError(r,u,"filedeleteerror");d.removeClass("file-uploading");n.removeClass("disabled "+b).addClass(_);x()};h._initAjaxSettings();h._mergeAjaxCallback("beforeSend",i,"delete");h._mergeAjaxCallback("success",t,"delete");h._mergeAjaxCallback("error",r,"delete");f=q.extend(true,{},{url:h._encodeURI(e),type:"POST",dataType:"json",data:q.extend(true,{},{key:o},g)},h._ajaxDeleteSettings);h._handler(n,"click",function(){if(!h._validateMinCount()){return false}h.ajaxAborted=false;h._raise("filebeforedelete",[o,g]);if(h.ajaxAborted instanceof Promise){h.ajaxAborted.then(function(e){if(!e){q.ajax(f)}})}else{if(!h.ajaxAborted){q.ajax(f)}}})})},_hideFileIcon:function(){var e=this;if(e.overwriteInitial){e.$captionContainer.removeClass("icon-visible")}},_showFileIcon:function(){var e=this;K.addCss(e.$captionContainer,"icon-visible")},_getSize:function(e,i){var t=this,r=parseFloat(e),a,n=t.fileSizeGetter,o;if(!q.isNumeric(e)||!q.isNumeric(r)){return""}if(typeof n==="function"){o=n(r)}else{if(r===0){o="0.00 B"}else{a=Math.floor(Math.log(r)/Math.log(1024));if(!i){i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}o=(r/Math.pow(1024,a)).toFixed(2)*1+" "+i[a]}}return t._getLayoutTemplate("size").replace("{sizeText}",o)},_getFileType:function(e){var i=this;return i.mimeTypeAliases[e]||e},_generatePreviewTemplate:function(l,e,s,d,f,u,i,t,c,r,p,g,m,a){var h=this,v=h.slug(s),n,o="",w="",b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,_,x=h.preferIconicPreview?"other":l,y=v,C=v,k=r||h._renderFileFooter(l,v,t,"auto",i),T=h._getPreviewIcon(s),P="type-default",I=T&&h.preferIconicPreview,E=T&&h.preferIconicZoomPreview,S;_=b<400?h.previewSettingsSmall[x]||h.defaults.previewSettingsSmall[x]:h.previewSettings[x]||h.defaults.previewSettings[x];if(_){q.each(_,function(e,i){w+=e+":"+i+";"})}S=function(e,i,t,r){var a=t?"zoom-"+f:f,n=h._getPreviewTemplate(e),o=(c||"")+" "+r;if(h.frameClass){o=h.frameClass+" "+o}if(t){o=o.replace(" "+K.SORT_CSS,"")}n=h._parseFilePreviewIcon(n,s);if(e==="text"){i=K.htmlEncode(i)}if(l==="object"&&!d){q.each(h.defaults.fileTypeSettings,function(e,i){if(e==="object"||e==="other"){return}if(i(s,d)){P="type-"+e}})}if(!K.isEmpty(m)){if(m.title!==undefined&&m.title!==null){y=m.title}if(m.alt!==undefined&&m.alt!==null){y=m.alt}}return n.setTokens({previewId:a,caption:v,title:y,alt:C,frameClass:o,type:h._getFileType(d),fileindex:p,fileid:u||"",typeCss:P,footer:k,data:i,template:g||l,style:w?'style="'+w+'"':""})};p=p||f.slice(f.lastIndexOf("-")+1);if(h.fileActionSettings.showZoom){o=S(E?"other":l,a?a:e,true,"kv-zoom-thumb")}o="\n"+h._getLayoutTemplate("zoomCache").replace("{zoomContent}",o);if(typeof h.sanitizeZoomCache==="function"){o=h.sanitizeZoomCache(o)}n=S(I?"other":l,e,false,"kv-preview-thumb");return n+o},_addToPreview:function(e,i){var t=this;return t.reversePreviewOrder?e.prepend(i):e.append(i)},_previewDefault:function(e,i,t){var r=this,a=r.$preview;if(!r.showPreview){return}var n=K.getFileName(e),o=e?e.type:"",l,s=e.size||0,d=r._getFileName(e,""),f=t===true&&!r.isAjaxUpload,u=K.createObjectURL(e),c=r.fileManager.getId(e);r._clearDefaultPreview();l=r._generatePreviewTemplate("other",u,n,o,i,c,f,s);r._addToPreview(a,l);r._setThumbAttr(i,d,s);if(t===true&&r.isAjaxUpload){r._setThumbStatus(q("#"+i),"Error")}},canPreview:function(e){var i=this;if(!e||!i.showPreview||!i.$preview||!i.$preview.length){return false}var t=e.name||"",r=e.type||"",a=(e.size||0)/1e3,n=i._parseFileType(r,t),o,l,s,d,f=i.allowedPreviewTypes,u=i.allowedPreviewMimeTypes,c=i.allowedPreviewExtensions||[],p=i.disabledPreviewTypes,g=i.disabledPreviewMimeTypes,m=i.disabledPreviewExtensions||[],h=i.maxFilePreviewSize&&parseFloat(i.maxFilePreviewSize)||0,v=new RegExp("\\.("+c.join("|")+")$","i"),w=new RegExp("\\.("+m.join("|")+")$","i");o=!f||f.indexOf(n)!==-1;l=!u||u.indexOf(r)!==-1;s=!c.length||K.compare(t,v);d=p&&p.indexOf(n)!==-1||g&&g.indexOf(r)!==-1||m.length&&K.compare(t,w)||h&&!isNaN(h)&&a>h;return!d&&(o||l||s)},_previewFile:function(e,i,t,r,a,n){if(!this.showPreview){return}var o=this,l=K.getFileName(i),s=n.type,d=n.name,f=o._parseFileType(s,l),u,c=o.$preview,p=i.size||0,g=f==="text"||f==="html"||f==="image"?t.target.result:a,m=o.fileManager.getId(i);if(f==="html"&&o.purifyHtml&&window.DOMPurify){g=window.DOMPurify.sanitize(g)}u=o._generatePreviewTemplate(f,g,l,s,r,m,false,p);o._clearDefaultPreview();o._addToPreview(c,u);var h=c.find("#"+r),v=h.find("img"),w=h.attr("data-fileid");o._validateImageOrientation(v,i,r,w,d,s,p,g);o._setThumbAttr(r,d,p);o._initSortable()},_setThumbAttr:function(e,i,t){var r=this,a=q("#"+e);if(a.length){t=t&&t>0?r._getSize(t):"";a.data({caption:i,size:t})}},_setInitThumbAttr:function(){var e=this,i=e.previewCache.data,t=e.previewCache.count(true),r,a,n,o;if(t===0){return}for(var l=0;l<t;l++){r=i.config[l];o=e.previewInitId+"-"+"init_"+l;a=K.ifSet("caption",r,K.ifSet("filename",r));n=K.ifSet("size",r);e._setThumbAttr(o,a,n)}},_slugDefault:function(e){return K.isEmpty(e)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var i=this,t=i.$element,r,a,n,o,l,s=K.isIE(9)&&K.findFileName(t.val())||t[0].files[0]&&t[0].files[0].name;if(!s&&i.fileManager.count()>0){l=i.fileManager.getFirstFile();r=l.nameFmt}else{r=s?i.slug(s):"_"}a=i.isAjaxUpload?i.fileManager.count():e;o=i.previewCache.count(true)+a;n=a===1?r:i._getMsgSelected(o);if(i.isError){i.$previewContainer.removeClass("file-thumb-loading");i.$previewStatus.html("");i.$captionContainer.removeClass("icon-visible")}else{i._showFileIcon()}i._setCaption(n,i.isError);i.$container.removeClass("file-input-new file-input-ajax-new");if(arguments.length===1){i._raise("fileselect",[e,r])}if(i.previewCache.count(true)){i._initPreviewActions()}},_setThumbStatus:function(e,i){var t=this;if(!t.showPreview){return}var r="indicator"+i,a=r+"Title",n="file-preview-"+i.toLowerCase(),o=e.find(".file-upload-indicator"),l=t.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-paused file-preview-loading");if(i==="Success"){e.find(".file-drag-handle").remove()}o.html(l[r]);o.attr("title",l[a]);e.addClass(n);if(i==="Error"&&!t.retryErrorUploads){e.find(".kv-file-upload").attr("disabled",true)}},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,i,t,r){var a=this;i=i||a.$progress;if(!i.length){return}var n=Math.min(e,100),o,l=a.progressUploadThreshold,s=e<=100?a.progressTemplate:a.progressCompleteTemplate,d=n<100?a.progressTemplate:t?a.paused?a.progressPauseTemplate:a.progressErrorTemplate:s;if(e>=100){r=""}if(!K.isEmpty(d)){if(l&&n>l&&e<=100){o=d.setTokens({percent:l,status:a.msgUploadThreshold})}else{o=d.setTokens({percent:n,status:e>100?a.msgUploadEnd:n+"%"})}r=r||"";o=o.setTokens({stats:r});i.html(o);if(t){i.find('[role="progressbar"]').html(t)}}},_setFileDropZoneTitle:function(){var e=this,i=e.$container.find(".file-drop-zone"),t=e.dropZoneTitle,r;if(e.isClickable){r=K.isEmpty(e.$element.attr("multiple"))?e.fileSingle:e.filePlural;t+=e.dropZoneClickTitle.replace("{files}",r)}i.find("."+e.dropZoneTitleClass).remove();if(!e.showPreview||i.length===0||e.fileManager.count()>0||!e.dropZoneEnabled||!e.isAjaxUpload&&e.$element.files){return}if(i.find(K.FRAMES).length===0&&K.isEmpty(e.defaultPreviewContent)){i.prepend('<div class="'+e.dropZoneTitleClass+'">'+t+"</div>")}e.$container.removeClass("file-input-new");K.addCss(e.$container,"file-input-ajax-new")},_getStats:function(e){var i=this,t,r;if(!i.showUploadStats||!e||!e.bitrate){return""}r=i._getLayoutTemplate("stats");t=!e.elapsed||!e.bps?i.msgCalculatingTime:i.msgPendingTime.setTokens({time:K.getElapsed(Math.ceil(e.pendingBytes/e.bps))});return r.setTokens({uploadSpeed:e.bitrate,pendingTime:t})},_setResumableProgress:function(e,i,t){var r=this,a=r.resumableManager,n=t?a:r,o=t?t.find(".file-thumb-progress"):null;if(n.lastProgress===0){n.lastProgress=e}if(e<n.lastProgress){e=n.lastProgress}r._setProgress(e,o,null,r._getStats(i));n.lastProgress=e},_setFileUploadStats:function(e,i,t,r){var a=this,n=a.$progress;if(!a.showPreview&&(!n||!n.length)){return}var o=a.fileManager,l=o.getThumb(e),s,d=a.resumableManager,f=0,u=o.getTotalSize(),c=q.extend(true,{},r);if(a.enableResumableUpload){var p=r.loaded,g=d.getUploadedSize(),m=d.file.size,h;p+=g;h=o.uploadedSize+p;i=K.round(100*p/m);r.pendingBytes=m-g;a._setResumableProgress(i,r,l);s=Math.floor(100*h/u);c.pendingBytes=u-h;a._setResumableProgress(s,c)}else{o.setProgress(e,i);n=l&&l.length?l.find(".file-thumb-progress"):null;a._setProgress(i,n,null,a._getStats(r));q.each(o.stats,function(e,i){f+=i.loaded});c.pendingBytes=u-f;s=K.round(f/u*100);a._setProgress(s,null,null,a._getStats(c))}},_validateMinCount:function(){var e=this,i=e.isAjaxUpload?e.fileManager.count():e._inputFileCount();if(e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(i-1)<e.minFileCount){e._noFilesError({});return false}return true},_getFileCount:function(e){var i=this,t=0;if(i.validateInitialCount&&!i.overwriteInitial){t=i.previewCache.count(true);e+=t}return e},_getFileId:function(e){return K.getFileId(e,this.generateFileId)},_getFileName:function(e,i){var t=this,r=K.getFileName(e);return r?t.slug(r):i},_getFileNames:function(i){var e=this;return e.filenames.filter(function(e){return i?e!==undefined:e!==undefined&&e!==null})},_setPreviewError:function(e,i){var t=this,r=t.removeFromPreviewOnError&&!t.retryErrorUploads;if(!i||r){t.fileManager.remove(e)}if(!t.showPreview){return}if(r){e.remove();return}else{t._setThumbStatus(e,"Error")}t._refreshUploadButton(e)},_refreshUploadButton:function(e){var i=this,t=e.find(".kv-file-upload"),r=i.fileActionSettings,a=r.uploadIcon,n=r.uploadTitle;if(!t.length){return}if(i.retryErrorUploads){a=r.uploadRetryIcon;n=r.uploadRetryTitle}t.attr("title",n).html(a)},_checkDimensions:function(e,i,t,r,a,n,o){var l=this,s,d,f=i==="Small"?"min":"max",u=l[f+"Image"+n],c,p;if(K.isEmpty(u)||!t.length){return}c=t[0];d=n==="Width"?c.naturalWidth||c.width:c.naturalHeight||c.height;p=i==="Small"?d>=u:d<=u;if(p){return}s=l["msgImage"+n+i].setTokens({name:a,size:u});l._showFileError(s,o);l._setPreviewError(r)},_getExifObj:function(e){var i=this,t=null,r=K.logMessages.exifWarning;if(e.slice(0,23)!=="data:image/jpeg;base64,"&&e.slice(0,22)!=="data:image/jpg;base64,"){t=null;return}try{t=window.piexif?window.piexif.load(e):null}catch(e){t=null;r=e&&e.message||""}if(!t){i._log(K.logMessages.badExifParser,{details:r})}return t},setImageOrientation:function(d,f,u,c){var p=this,e=!d||!d.length,i=!f||!f.length,g,m=false,h,v=e&&c&&c.attr("data-template")==="image",t;if(e&&i){return}t="load.fileinputimageorient";if(v){d=f;f=null;d.css(p.previewSettings.image);h=q(document.createElement("div")).appendTo(c.find(".kv-file-content"));g=q(document.createElement("span")).insertBefore(d);d.css("visibility","hidden").removeClass("file-zoom-detail").appendTo(h)}else{m=!d.is(":visible")}d.off(t).on(t,function(){if(m){p.$preview.removeClass("hide-content");c.find(".kv-file-content").css("visibility","hidden")}var e=d.get(0),i=f&&f.length?f.get(0):null,t=e.offsetHeight,r=e.offsetWidth,a=K.getRotation(u);if(m){c.find(".kv-file-content").css("visibility","visible");p.$preview.addClass("hide-content")}d.data("orientation",u);if(i){f.data("orientation",u)}if(u<5){K.setTransform(e,a);K.setTransform(i,a);return}var n=Math.atan(r/t),o=Math.sqrt(Math.pow(t,2)+Math.pow(r,2)),l=!o?1:t/Math.cos(Math.PI/2+n)/o,s=" scale("+Math.abs(l)+")";K.setTransform(e,a+s);K.setTransform(i,a+s);if(v){d.css("visibility","visible").insertAfter(g).addClass("file-zoom-detail");g.remove();h.remove()}})},_validateImageOrientation:function(e,i,t,r,a,n,o,l){var s=this,d,f,u=s.autoOrientImage;d=u?s._getExifObj(l):null;f=d?d["0th"][piexif.ImageIFD.Orientation]:null;if(!f){s._validateImage(t,r,a,n,o,l,d);return}s.setImageOrientation(e,q("#zoom-"+t+" img"),f,q("#"+t));s._raise("fileimageoriented",{$img:e,file:i});s._validateImage(t,r,a,n,o,l,d)},_validateImage:function(e,i,t,r,a,n,o){var l=this,s=l.$preview,d,f,u,c=s.find("#"+e),p=c.attr("data-fileindex"),g=c.find("img");t=t||"Untitled";g.one("load",function(){f=c.width();u=s.width();if(f>u){g.css("width","100%")}d={ind:p,id:e,fileId:i};l._checkDimensions(p,"Small",g,c,t,"Width",d);l._checkDimensions(p,"Small",g,c,t,"Height",d);if(!l.resizeImage){l._checkDimensions(p,"Large",g,c,t,"Width",d);l._checkDimensions(p,"Large",g,c,t,"Height",d)}l._raise("fileimageloaded",[e]);l.fileManager.addImage(i,{ind:p,img:g,thumb:c,pid:e,typ:r,siz:a,validated:false,imgData:n,exifObj:o});c.data("exif",o);l._validateAllImages()}).one("error",function(){l._raise("fileimageloaderror",[e])}).each(function(){if(this.complete){q(this).trigger("load")}else{if(this.error){q(this).trigger("error")}}})},_validateAllImages:function(){var t=this,r={val:0},a=t.fileManager.getImageCount(),n,o=t.resizeIfSizeMoreThan;if(a!==t.fileManager.totalImages){return}t._raise("fileimagesloaded");if(!t.resizeImage){return}q.each(t.fileManager.loadedImages,function(e,i){if(!i.validated){n=i.siz;if(n&&n>o*1e3){t._getResizedImage(e,i,r,a)}i.validated=true}})},_getResizedImage:function(e,i,t,r){var a=this,n=q(i.img)[0],o=n.naturalWidth,l=n.naturalHeight,s,d=1,f=a.maxImageWidth||o,u=a.maxImageHeight||l,c=!!(o&&l),p,g,m=a.imageCanvas,h,v=a.imageCanvasContext,w=i.typ,b=i.pid,_=i.ind,x=i.thumb,y,C,k=i.exifObj,T,P,I,E;y=function(e,i,t){if(a.isAjaxUpload){a._showFileError(e,i,t)}else{a._showError(e,i,t)}a._setPreviewError(x)};P=a.fileManager.getFile(e);I={id:b,index:_,fileId:e};E=[e,b,_];if(!P||!c||o<=f&&l<=u){if(c&&P){a._raise("fileimageresized",E)}t.val++;if(t.val===r){a._raise("fileimagesresized")}if(!c){y(a.msgImageResizeError,I,"fileimageresizeerror");return}}w=w||a.resizeDefaultImageType;p=o>f;g=l>u;if(a.resizePreference==="width"){d=p?f/o:g?u/l:1}else{d=g?u/l:p?f/o:1}a._resetCanvas();o*=d;l*=d;m.width=o;m.height=l;try{v.drawImage(n,0,0,o,l);h=m.toDataURL(w,a.resizeQuality);if(k){T=window.piexif.dump(k);h=window.piexif.insert(T,h)}s=K.dataURI2Blob(h);a.fileManager.setFile(e,s);a._raise("fileimageresized",E);t.val++;if(t.val===r){a._raise("fileimagesresized",[undefined,undefined])}if(!(s instanceof Blob)){y(a.msgImageResizeError,I,"fileimageresizeerror")}}catch(e){t.val++;if(t.val===r){a._raise("fileimagesresized",[undefined,undefined])}C=a.msgImageResizeException.replace("{errors}",e.message);y(C,I,"fileimageresizeexception")}},_initBrowse:function(e){var i=this,t=i.$element;if(i.showBrowse){i.$btnFile=e.find(".btn-file").append(t)}else{t.appendTo(e).attr("tabindex",-1);K.addCss(t,"file-no-browse")}},_initClickable:function(){var t=this,r,e;if(!t.isClickable){return}r=t.$dropZone;if(!t.isAjaxUpload){e=t.$preview.find(".file-default-preview");if(e.length){r=e}}K.addCss(r,"clickable");r.attr("tabindex",-1);t._handler(r,"click",function(e){var i=q(e.target);if(!q(t.elErrorContainer+":visible").length&&(!i.parents(".file-preview-thumbnails").length||i.parents(".file-default-preview").length)){t.$element.data("zoneClicked",true).trigger("click");r.blur()}})},_initCaption:function(){var e=this,i=e.initialCaption||"";if(e.overwriteInitial||K.isEmpty(i)){e.$caption.val("");return false}e._setCaption(i);return true},_setCaption:function(e,i){var t=this,r,a,n,o,l,s;if(!t.$caption.length){return}t.$captionContainer.removeClass("icon-visible");if(i){r=q("<div>"+t.msgValidationError+"</div>").text();o=t.fileManager.count();if(o){s=t.fileManager.getFirstFile();l=o===1&&s?s.nameFmt:t._getMsgSelected(o)}else{l=t._getMsgSelected(t.msgNo)}a=K.isEmpty(e)?l:e;n='<span class="'+t.msgValidationErrorClass+'">'+t.msgValidationErrorIcon+"</span>"}else{if(K.isEmpty(e)){return}r=q("<div>"+e+"</div>").text();a=r;n=t._getLayoutTemplate("fileIcon")}t.$captionContainer.addClass("icon-visible");t.$caption.attr("title",r).val(a);t.$captionIcon.html(n)},_createContainer:function(){var e=this,i={class:"file-input file-input-new"+(e.rtl?" kv-rtl":"")},t=q(document.createElement("div")).attr(i).html(e._renderMain());t.insertBefore(e.$element);e._initBrowse(t);if(e.theme){t.addClass("theme-"+e.theme)}return t},_refreshContainer:function(){var e=this,i=e.$container,t=e.$element;t.insertAfter(i);i.html(e._renderMain());e._initBrowse(i);e._validateDisabled()},_validateDisabled:function(){var e=this;e.$caption.attr({readonly:e.isDisabled})},_renderMain:function(){var e=this,i=e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",t=!e.showClose?"":e._getLayoutTemplate("close"),r=!e.showPreview?"":e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:i}),a=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,n=e.captionTemplate.setTokens({class:a+" kv-fileinput-caption"});return e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),preview:r,close:t,caption:n,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),pause:e._renderButton("pause"),browse:e._renderButton("browse")})},_renderButton:function(e){var i=this,t=i._getLayoutTemplate("btnDefault"),r=i[e+"Class"],a=i[e+"Title"],n=i[e+"Icon"],o=i[e+"Label"],l=i.isDisabled?" disabled":"",s="button";switch(e){case"remove":if(!i.showRemove){return""}break;case"cancel":if(!i.showCancel){return""}r+=" kv-hidden";break;case"pause":if(!i.showPause){return""}r+=" kv-hidden";break;case"upload":if(!i.showUpload){return""}if(i.isAjaxUpload&&!i.isDisabled){t=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl)}else{s="submit"}break;case"browse":if(!i.showBrowse){return""}t=i._getLayoutTemplate("btnBrowse");break;default:return""}r+=e==="browse"?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button";if(!K.isEmpty(o)){o=' <span class="'+i.buttonLabelClass+'">'+o+"</span>"}return t.setTokens({type:s,css:r,title:a,status:l,icon:n,label:o})},_renderThumbProgress:function(){var e=this;return'<div class="file-thumb-progress kv-hidden">'+e.progressInfoTemplate.setTokens({percent:101,status:e.msgUploadBegin,stats:""})+"</div>"},_renderFileFooter:function(e,i,t,r,a){var n=this,o=n.fileActionSettings,l=o.showRemove,s=o.showDrag,d=o.showUpload,f=o.showZoom,u,c,p=n._getLayoutTemplate("footer"),g=n._getLayoutTemplate("indicator"),m=a?o.indicatorError:o.indicatorNew,h=a?o.indicatorErrorTitle:o.indicatorNewTitle,v=g.setTokens({indicator:m,indicatorTitle:h});t=n._getSize(t);c={type:e,caption:i,size:t,width:r,progress:"",indicator:v};if(n.isAjaxUpload){c.progress=n._renderThumbProgress();c.actions=n._renderFileActions(c,d,false,l,f,s,false,false,false)}else{c.actions=n._renderFileActions(c,false,false,false,f,s,false,false,false)}u=p.setTokens(c);u=K.replaceTags(u,n.previewThumbTags);return u},_renderFileActions:function(e,i,t,r,a,n,o,l,s,d,f,u){var c=this;if(!e.type&&d){e.type="image"}if(c.enableResumableUpload){i=false}else{if(typeof i==="function"){i=i(e)}}if(typeof t==="function"){t=t(e)}if(typeof r==="function"){r=r(e)}if(typeof a==="function"){a=a(e)}if(typeof n==="function"){n=n(e)}if(!i&&!t&&!r&&!a&&!n){return""}var p=l===false?"":' data-url="'+l+'"',g="",m="",h,v=s===false?"":' data-key="'+s+'"',w="",b="",_="",x=c._getLayoutTemplate("actions"),y=c.fileActionSettings,C=c.otherActionButtons.setTokens({dataKey:v,key:s}),k=o?y.removeClass+" disabled":y.removeClass;if(r){w=c._getLayoutTemplate("actionDelete").setTokens({removeClass:k,removeIcon:y.removeIcon,removeTitle:y.removeTitle,dataUrl:p,dataKey:v,key:s})}if(i){b=c._getLayoutTemplate("actionUpload").setTokens({uploadClass:y.uploadClass,uploadIcon:y.uploadIcon,uploadTitle:y.uploadTitle})}if(t){_=c._getLayoutTemplate("actionDownload").setTokens({downloadClass:y.downloadClass,downloadIcon:y.downloadIcon,downloadTitle:y.downloadTitle,downloadUrl:f||c.initialPreviewDownloadUrl});_=_.setTokens({filename:u,key:s})}if(a){g=c._getLayoutTemplate("actionZoom").setTokens({zoomClass:y.zoomClass,zoomIcon:y.zoomIcon,zoomTitle:y.zoomTitle})}if(n&&d){h="drag-handle-init "+y.dragClass;m=c._getLayoutTemplate("actionDrag").setTokens({dragClass:h,dragTitle:y.dragTitle,dragIcon:y.dragIcon})}return x.setTokens({delete:w,upload:b,download:_,zoom:g,drag:m,other:C})},_browse:function(e){var i=this;if(e&&e.isDefaultPrevented()||!i._raise("filebrowse")){return}if(i.isError&&!i.isAjaxUpload){i.clear()}i.$captionContainer.focus()},_change:function(e){var o=this;if(o.changeTriggered){return}var i=o.$element,t=arguments.length>1,l=o.isAjaxUpload,r,s=t?arguments[1]:i.get(0).files,a,n=!l&&K.isEmpty(i.attr("multiple"))?1:o.maxFileCount,d,f=o.fileManager.count(),u=K.isEmpty(i.attr("multiple")),c=u&&f>0,p=function(e,i,t,r){var a=q.extend(true,{},o._getOutData(null,{},{},s),{id:t,index:r}),n={id:t,index:r,file:i,files:s};return l?o._showFileError(e,a):o._showError(e,n)},g=function(e,i){var t=o.msgFilesTooMany.replace("{m}",i).replace("{n}",e);o.isError=p(t,null,null,null);o.$captionContainer.removeClass("icon-visible");o._setCaption("",true);o.$container.removeClass("file-input-new file-input-ajax-new")};o.reader=null;o._resetUpload();o._hideFileIcon();if(o.dropZoneEnabled){o.$container.find(".file-drop-zone ."+o.dropZoneTitleClass).remove()}if(!l){if(e.target&&e.target.files===undefined){s=e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]}else{s=e.target.files||{}}}r=s;if(K.isEmpty(r)||r.length===0){if(!l){o.clear()}o._raise("fileselectnone");return}o._resetErrors();d=r.length;a=o._getFileCount(l?o.fileManager.count()+d:d);if(n>0&&a>n){if(!o.autoReplace||d>n){g(o.autoReplace&&d>n?d:a,n);return}if(a>n){o._resetPreviewThumbs(l)}}else{if(!l||c){o._resetPreviewThumbs(false);if(c){o.clearFileStack()}}else{if(l&&f===0&&(!o.previewCache.count(true)||o.overwriteInitial)){o._resetPreviewThumbs(true)}}}o.readFiles(r)},_abort:function(e){var i=this,t;if(i.ajaxAborted&&typeof i.ajaxAborted==="object"&&i.ajaxAborted.message!==undefined){t=q.extend(true,{},i._getOutData(null),e);t.abortData=i.ajaxAborted.data||{};t.abortMessage=i.ajaxAborted.message;i._setProgress(101,i.$progress,i.msgCancelled);i._showFileError(i.ajaxAborted.message,t,"filecustomerror");i.cancel();return true}return!!i.ajaxAborted},_resetFileStack:function(){var r=this,a=0;r._getThumbs().each(function(){var e=q(this),i=e.attr("data-fileindex"),t=e.attr("id");if(i==="-1"||i===-1){return}if(!r.fileManager.getFile(e.attr("data-fileid"))){e.attr({id:r.previewInitId+"-"+a,"data-fileindex":a});a++}else{e.attr({id:"uploaded-"+K.uniqId(),"data-fileindex":"-1"})}r.$preview.find("#zoom-"+t).attr({id:"zoom-"+e.attr("id"),"data-fileindex":e.attr("data-fileindex")})})},_isFileSelectionValid:function(e){var i=this;e=e||0;if(i.required&&!i.getFilesCount()){i.$errorContainer.html("");i._showFileError(i.msgFileRequired);return false}if(i.minFileCount>0&&i._getFileCount(e)<i.minFileCount){i._noFilesError({});return false}return true},clearFileStack:function(){var e=this;e.fileManager.clear();e._initResumableUpload();if(e.enableResumableUpload){if(e.showPause===null){e.showPause=true}if(e.showCancel===null){e.showCancel=false}}else{e.showPause=false;if(e.showCancel===null){e.showCancel=true}}return e.$element},getFileStack:function(){return this.files.stack},getFileList:function(){return this.files.list()},getFilesCount:function(){var e=this,i=e.isAjaxUpload?e.fileManager.count():e._inputFileCount();return e._getFileCount(i)},readFiles:function(S){this.reader=new FileReader;var F=this,z=F.$element,A=F.reader,j=F.$previewContainer,D=F.$previewStatus,M=F.msgLoading,$=F.msgProgress,U=F.previewInitId,R=S.length,O=F.fileTypeSettings,B=F.fileManager.count(),L,N=F.allowedFileTypes,Z=N?N.length:0,H=F.allowedFileExtensions,W=K.isEmpty(H)?"":H.join(", "),V=function(e,i,t,r,a){var n=q.extend(true,{},F._getOutData(null,{},{},S),{id:t,index:r,fileId:a}),o=q("#"+t),l={id:t,index:r,fileId:a,file:i,files:S};F._previewDefault(i,t,true);if(F.isAjaxUpload){setTimeout(function(){L(r+1)},F.processDelay)}else{R=0}F._initFileActions();o.remove();F.isError=F.isAjaxUpload?F._showFileError(e,n):F._showError(e,l);F._updateFileDetails(R)};F.fileManager.clearImages();q.each(S,function(e,i){var t=F.fileTypeSettings.image;if(t&&t(i.type)){F.fileManager.totalImages++}});L=function(d){if(K.isEmpty(z.attr("multiple"))){R=1}if(d>=R){if(F.isAjaxUpload&&F.fileManager.count()>0){F._raise("filebatchselected",[F.fileManager.stack])}else{F._raise("filebatchselected",[S])}j.removeClass("file-thumb-loading");D.html("");return}var e=B+d,f=U+"-"+e,u=S[d],i,c,r,t,p=O.text,g=O.image,m=O.html,a,n,o,l,h=F._getFileName(u,""),s=(u&&u.size||0)/1e3,v="",w=K.createObjectURL(u),b=0,_="",x,y,C=0,k,T,P,I,E=function(){var e=$.setTokens({index:d+1,files:R,percent:50,name:h});setTimeout(function(){D.html(e);F._updateFileDetails(R);L(d+1)},F.processDelay);F._raise("fileloaded",[u,f,d,A])};if(!u){return}x=F.fileManager.getId(u);if(Z>0){for(c=0;c<Z;c++){o=N[c];l=F.msgFileTypes[o]||o;_+=c===0?l:", "+l}}if(h===false){L(d+1);return}if(h.length===0){r=F.msgInvalidFileName.replace("{name}",K.htmlEncode(K.getFileName(u),"[unknown]"));V(r,u,f,d,x);return}if(!K.isEmpty(H)){v=new RegExp("\\.("+H.join("|")+")$","i")}i=s.toFixed(2);if(F.maxFileSize>0&&s>F.maxFileSize){r=F.msgSizeTooLarge.setTokens({name:h,size:i,maxSize:F.maxFileSize});V(r,u,f,d,x);return}if(F.minFileSize!==null&&s<=K.getNum(F.minFileSize)){r=F.msgSizeTooSmall.setTokens({name:h,size:i,minSize:F.minFileSize});V(r,u,f,d,x);return}if(!K.isEmpty(N)&&K.isArray(N)){for(c=0;c<N.length;c+=1){a=N[c];y=O[a];b+=!y||typeof y!=="function"?0:y(u.type,K.getFileName(u))?1:0}if(b===0){r=F.msgInvalidFileType.setTokens({name:h,types:_});V(r,u,f,d,x);return}}if(b===0&&!K.isEmpty(H)&&K.isArray(H)&&!K.isEmpty(v)){n=K.compare(h,v);b+=K.isEmpty(n)?0:n.length;if(b===0){r=F.msgInvalidFileExtension.setTokens({name:h,extensions:W});V(r,u,f,d,x);return}}if(F.isAjaxUpload&&F.fileManager.exists(x)){r=F.msgDuplicateFile.setTokens({name:h,size:i});V(r,u,f,d,x);t=q("#"+f);if(t&&t.length){t.remove()}return}if(!F.canPreview(u)){if(F.isAjaxUpload){F.fileManager.add(u)}if(F.showPreview){j.addClass("file-thumb-loading");F._previewDefault(u,f);F._initFileActions()}setTimeout(function(){F._updateFileDetails(R);L(d+1);F._raise("fileloaded",[u,f,d])},10);return}k=p(u.type,h);T=m(u.type,h);P=g(u.type,h);D.html(M.replace("{index}",d+1).replace("{files}",R));j.addClass("file-thumb-loading");A.onerror=function(e){F._errorHandler(e,h)};A.onload=function(e){var i,t,r,a,n=[],o,l,s=function(e){var i=new FileReader;i.onerror=function(e){F._errorHandler(e,h)};i.onload=function(e){F._previewFile(d,u,e,f,w,t);F._initFileActions();E()};if(e){i.readAsText(u,F.textEncoding)}else{i.readAsDataURL(u)}};t={name:h,type:u.type};q.each(O,function(e,i){if(e!=="object"&&e!=="other"&&typeof i==="function"&&i(u.type,h)){C++}});if(C===0){r=new Uint8Array(e.target.result);for(c=0;c<r.length;c++){a=r[c].toString(16);n.push(a)}i=n.join("").toLowerCase().substring(0,8);l=K.getMimeType(i,"","");if(K.isEmpty(l)){o=K.arrayBuffer2String(A.result);l=K.isSvg(o)?"image/svg+xml":K.getMimeType(i,o,u.type)}t={name:h,type:l};k=p(l,"");T=m(l,"");P=g(l,"");I=k||T;if(I||P){s(I);return}}F._previewFile(d,u,e,f,w,t);F._initFileActions();E()};A.onprogress=function(e){if(e.lengthComputable){var i=e.loaded/e.total*100,t=Math.ceil(i);r=$.setTokens({index:d+1,files:R,percent:t,name:h});setTimeout(function(){D.html(r)},F.processDelay)}};if(k||T){A.readAsText(u,F.textEncoding)}else{if(P){A.readAsDataURL(u)}else{A.readAsArrayBuffer(u)}}F.fileManager.add(u)};L(0);F._updateFileDetails(R,false)},lock:function(){var e=this,i=e.$container;e._resetErrors();e.disable();i.addClass("is-locked");if(e.showCancel){i.find(".fileinput-cancel").show()}if(e.showPause){i.find(".fileinput-pause").show()}e._raise("filelock",[e.fileManager.stack,e._getExtraData()]);return e.$element},unlock:function(e){var i=this,t=i.$container;if(e===undefined){e=true}i.enable();t.removeClass("is-locked");if(i.showCancel){t.find(".fileinput-cancel").hide()}if(i.showPause){t.find(".fileinput-pause").hide()}if(e){i._resetFileStack()}i._raise("fileunlock",[i.fileManager.stack,i._getExtraData()]);return i.$element},resume:function(){var e=this,i=false,t=e.$progress,r=e.resumableManager;if(!e.enableResumableUpload){return e.$element}if(e.paused){t.html(e.progressPauseTemplate.setTokens({percent:101,status:e.msgUploadResume,stats:""}))}else{i=true}e.paused=false;if(i){t.html(e.progressInfoTemplate.setTokens({percent:101,status:e.msgUploadBegin,stats:""}))}setTimeout(function(){r.upload()},e.processDelay);return e.$element},pause:function(){var n=this,e=n.resumableManager,i=n.ajaxRequests,t=i.length,r,o=e.getProgress(),l=n.fileActionSettings;if(!n.enableResumableUpload){return n.$element}if(e.chunkIntervalId){clearInterval(e.chunkIntervalId)}if(n.ajaxQueueIntervalId){clearInterval(n.ajaxQueueIntervalId)}n._raise("fileuploadpaused",[n.fileManager,e]);if(t>0){for(r=0;r<t;r+=1){n.paused=true;i[r].abort()}}if(n.showPreview){n._getThumbs().each(function(){var e=q(this),i=e.attr("data-fileid"),t=n._getLayoutTemplate("stats"),r,a=e.find(".file-upload-indicator");e.removeClass("file-uploading");if(a.attr("title")===l.indicatorLoadingTitle){n._setThumbStatus(e,"Paused");r=t.setTokens({pendingTime:n.msgPaused,uploadSpeed:""});n.paused=true;n._setProgress(o,e.find(".file-thumb-progress"),o+"%",r)}if(!n.fileManager.getFile(i)){e.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")}})}n._setProgress(101,n.$progress,n.msgPaused);return n.$element},cancel:function(){var r=this,e=r.ajaxRequests,i=r.resumableManager,t=e.length,a;if(r.enableResumableUpload&&i.chunkIntervalId){clearInterval(i.chunkIntervalId);i.reset();r._raise("fileuploadcancelled",[r.fileManager,i])}else{r._raise("fileuploadcancelled",[r.fileManager])}if(r.ajaxQueueIntervalId){clearInterval(r.ajaxQueueIntervalId)}r._initAjax();if(t>0){for(a=0;a<t;a+=1){r.cancelling=true;e[a].abort()}}r._getThumbs().each(function(){var e=q(this),i=e.attr("data-fileid"),t=e.find(".file-thumb-progress");e.removeClass("file-uploading");r._setProgress(0,t);t.hide();if(!r.fileManager.getFile(i)){e.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled");e.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")}r.unlock()});setTimeout(function(){r._setProgressCancelled()},r.processDelay);return r.$element},clear:function(){var e=this,i;if(!e._raise("fileclear")){return}e.$btnUpload.removeAttr("disabled");e._getThumbs().find("video,audio,img").each(function(){K.cleanMemory(q(this))});e._clearFileInput();e._resetUpload();e.clearFileStack();e._resetErrors(true);if(e._hasInitialPreview()){e._showFileIcon();e._resetPreview();e._initPreviewActions();e.$container.removeClass("file-input-new")}else{e._getThumbs().each(function(){e._clearObjects(q(this))});if(e.isAjaxUpload){e.previewCache.data={}}e.$preview.html("");i=!e.overwriteInitial&&e.initialCaption.length>0?e.initialCaption:"";e.$caption.attr("title","").val(i);K.addCss(e.$container,"file-input-new");e._validateDefaultPreview()}if(e.$container.find(K.FRAMES).length===0){if(!e._initCaption()){e.$captionContainer.removeClass("icon-visible")}}e._hideFileIcon();e.$captionContainer.focus();e._setFileDropZoneTitle();e._raise("filecleared");return e.$element},reset:function(){var e=this;if(!e._raise("filereset")){return}e.lastProgress=0;e._resetPreview();e.$container.find(".fileinput-filename").text("");K.addCss(e.$container,"file-input-new");if(e.getFrames().length||e.dropZoneEnabled){e.$container.removeClass("file-input-new")}e.clearFileStack();e._setFileDropZoneTitle();return e.$element},disable:function(){var e=this;e.isDisabled=true;e._raise("filedisabled");e.$element.attr("disabled","disabled");e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled");e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",true);K.addCss(e.$container.find(".btn-file"),"disabled");e._initDragDrop();return e.$element},enable:function(){var e=this;e.isDisabled=false;e._raise("fileenabled");e.$element.removeAttr("disabled");e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled");e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled");e.$container.find(".btn-file").removeClass("disabled");e._initDragDrop();return e.$element},upload:function(){var i=this,e=i.fileManager,t=e.count(),r,a,n,o=!q.isEmptyObject(i._getExtraData());if(!i.isAjaxUpload||i.isDisabled||!i._isFileSelectionValid(t)){return}i.lastProgress=0;i._resetUpload();if(t===0&&!o){i._showFileError(i.msgUploadEmpty);return}i.cancelling=false;i.$progress.show();i.lock();n=e.count();if(t===0&&o){i._setProgress(2);i._uploadExtraOnly();return}if(i.enableResumableUpload){return i.resume()}if(i.uploadAsync||i.enableResumableUpload){a=i._getOutData(null);i._raise("filebatchpreupload",[a]);i.fileBatchCompleted=false;i.uploadCache={content:[],config:[],tags:[],append:true};for(r=0;r<n;r++){i.uploadCache.content[r]=null;i.uploadCache.config[r]=null;i.uploadCache.tags[r]=null}i.$preview.find(".file-preview-initial").removeClass(K.SORT_CSS);i._initSortable();i.cacheInitialPreview=i.getPreview()}i._setProgress(2);i.hasInitData=false;if(i.uploadAsync){r=0;q.each(e.stack,function(e){i._uploadSingle(r,e,true);r++});return}i._uploadBatch();return i.$element},destroy:function(){var e=this,i=e.$form,t=e.$container,r=e.$element,a=e.namespace;q(document).off(a);q(window).off(a);if(i&&i.length){i.off(a)}if(e.isAjaxUpload){e._clearFileInput()}e._cleanup();e._initPreviewCache();r.insertBefore(t).off(a).removeData();t.off().remove();return r},refresh:function(e){var i=this,t=i.$element;if(typeof e!=="object"||K.isEmpty(e)){e=i.options}else{e=q.extend(true,{},i.options,e)}i._init(e,true);i._listen();return t},zoom:function(e){var i=this,t=i._getFrame(e),r=i.$modal;if(!t){return}K.initModal(r);r.html(i._getModalContent());i._setZoomContent(t);r.modal("show");i._initZoomButtons()},getExif:function(e){var i=this,t=i._getFrame(e);return t&&t.data("exif")||null},getFrames:function(e){var i=this,t;e=e||"";t=i.$preview.find(K.FRAMES+e);if(i.reversePreviewOrder){t=q(t.get().reverse())}return t},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}},q.fn.fileinput=function(s){if(!K.hasFileAPISupport()&&!K.isIE(9)){return}var d=Array.apply(null,arguments),f=[];d.shift();this.each(function(){var e=q(this),i=e.data("fileinput"),t=typeof s==="object"&&s,r=t.theme||e.data("theme"),a={},n={},o=t.language||e.data("language")||q.fn.fileinput.defaults.language||"en",l;if(!i){if(r){n=q.fn.fileinputThemes[r]||{}}if(o!=="en"&&!K.isEmpty(q.fn.fileinputLocales[o])){a=q.fn.fileinputLocales[o]||{}}l=q.extend(true,{},q.fn.fileinput.defaults,n,q.fn.fileinputLocales.en,a,t,e.data());i=new u(this,l);e.data("fileinput",i)}if(typeof s==="string"){f.push(i[s].apply(i,d))}});switch(f.length){case 0:return this;case 1:return f[0];default:return f}},q.fn.fileinput.defaults={language:"en",showCaption:true,showBrowse:true,showPreview:true,showRemove:true,showUpload:true,showUploadStats:true,showCancel:null,showPause:null,showClose:true,showUploadedThumbs:true,browseOnZoneClick:false,autoReplace:false,autoOrientImage:function(){var e=window.navigator.userAgent,i=!!e.match(/WebKit/i),t=!!e.match(/iP(od|ad|hone)/i),r=t&&i&&!e.match(/CriOS/i);return!r},autoOrientImageInitial:true,required:false,rtl:false,hideThumbnailContent:false,encodeUrl:true,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:true,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:false,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:true,initialPreviewDownloadUrl:"",removeFromPreviewOnError:false,deleteUrl:"",deleteExtraData:{},overwriteInitial:true,sanitizeZoomCache:function(e){var i=q(document.createElement("div")).append(e);i.find("input,select,.file-thumbnail-footer").remove();return i.html()},previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:false,preferIconicZoomPreview:false,allowedFileTypes:null,allowedFileExtensions:null,allowedPreviewTypes:undefined,allowedPreviewMimeTypes:null,allowedPreviewExtensions:null,disabledPreviewTypes:undefined,disabledPreviewExtensions:["msi","exe","com","zip","rar","app","vb","scr"],disabledPreviewMimeTypes:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",pauseIcon:'<i class="glyphicon glyphicon-pause"></i>',pauseClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:true,uploadParamNames:{chunkCount:"chunkCount",chunkIndex:"chunkIndex",chunkSize:"chunkSize",chunkSizeStart:"chunkSizeStart",chunksUploaded:"chunksUploaded",fileBlob:"fileBlob",fileId:"fileId",fileName:"fileName",fileRelativePath:"fileRelativePath",fileSize:"fileSize",retryCount:"retryCount"},maxAjaxThreads:5,processDelay:100,queueDelay:10,progressDelay:0,enableResumableUpload:false,resumableUploadOptions:{fallback:null,testUrl:null,chunkSize:2*1024,maxThreads:4,maxRetries:3,showErrorLog:true},uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:false,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:false,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressInfoClass:"progress-bar bg-info progress-bar-info progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressPauseClass:"progress-bar bg-primary progress-bar-primary progress-bar-striped active",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:K.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:true,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:true,mergeAjaxCallbacks:false,mergeAjaxDeleteCallbacks:false,retryErrorUploads:true,reversePreviewOrder:false,usePdfRenderer:function(){var e=!!window.MSInputMethodContext&&!!document.documentMode;return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)||e},pdfRendererUrl:"",pdfRendererTemplate:'<iframe class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}></iframe>'},q.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear all unprocessed files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",pauseLabel:"Pause",pauseTitle:"Pause ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPaused:"Paused",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadResume:"Resuming upload...",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Upload Error",msgDeleteError:"Delete Error",msgProgressError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",msgDuplicateFile:'File "{name}" of same size "{size} KB" has already been selected earlier. Skipping duplicate selection.',msgResumableUploadRetriesExceeded:"Upload aborted beyond <b>{max}</b> retries for file <b>{file}</b>! Error Details: <pre>{error}</pre>",msgPendingTime:"{time} remaining",msgCalculatingTime:"calculating time remaining",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},q.fn.fileinput.Constructor=u,q(document).ready(function(){var e=q("input.file[type=file]");if(e.length){e.fileinput()}})})?r.apply(i,a):r)||(e.exports=n)}()},159:function(e,i,t){var r=t(386);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(120)(r,a);r.locals&&(e.exports=r.locals)},386:function(e,i,t){i=e.exports=t(119)(!1);var r=t(127),a=r(t(387)),n=r(t(388));i.push([e.i,'/*!\r\n * bootstrap-fileinput v5.0.3\r\n * http://plugins.krajee.com/file-input\r\n *\r\n * Krajee default styling for bootstrap-fileinput.\r\n *\r\n * Author: Kartik Visweswaran\r\n * Copyright: 2014 - 2019, Kartik Visweswaran, Krajee.com\r\n *\r\n * Licensed under the BSD-3-Clause\r\n * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md\r\n */\r\n.file-loading input[type=file], input[type=file].file-loading {\r\n    width: 0;\r\n    height: 0;\r\n}\r\n\r\n.file-no-browse {\r\n    position: absolute;\r\n    left: 50%;\r\n    bottom: 20%;\r\n    width: 1px;\r\n    height: 1px;\r\n    font-size: 0;\r\n    opacity: 0;\r\n    border: none;\r\n    background: none;\r\n    outline: none;\r\n    box-shadow: none;\r\n}\r\n\r\n.kv-hidden, .file-caption-icon, .file-zoom-dialog .modal-header:before, .file-zoom-dialog .modal-header:after, .file-input-new .file-preview, .file-input-new .close, .file-input-new .glyphicon-file, .file-input-new .fileinput-remove-button, .file-input-new .fileinput-upload-button, .file-input-new .no-browse .input-group-btn, .file-input-ajax-new .fileinput-remove-button, .file-input-ajax-new .fileinput-upload-button, .file-input-ajax-new .no-browse .input-group-btn, .hide-content .kv-file-content, .is-locked .fileinput-upload-button, .is-locked .fileinput-remove-button {\r\n    display: none;\r\n}\r\n\r\n.btn-file input[type=file], .file-caption-icon, .file-preview .fileinput-remove, .krajee-default .file-thumb-progress, .file-zoom-dialog .btn-navigate, .file-zoom-dialog .floating-buttons {\r\n    position: absolute;\r\n}\r\n\r\n.file-caption-icon .kv-caption-icon {\r\n    line-height: inherit;\r\n}\r\n\r\n.file-input, .file-loading:before, .btn-file, .file-caption, .file-preview, .krajee-default.file-preview-frame, .krajee-default .file-thumbnail-footer, .file-zoom-dialog .modal-dialog {\r\n    position: relative;\r\n}\r\n\r\n.file-error-message pre, .file-error-message ul, .krajee-default .file-actions, .krajee-default .file-other-error {\r\n    text-align: left;\r\n}\r\n\r\n.file-error-message pre, .file-error-message ul {\r\n    margin: 0;\r\n}\r\n\r\n.krajee-default .file-drag-handle, .krajee-default .file-upload-indicator {\r\n    float: left;\r\n    margin-top: 10px;\r\n    width: 16px;\r\n    height: 16px;\r\n}\r\n\r\n.krajee-default .file-thumb-progress .progress, .krajee-default .file-thumb-progress .progress-bar {\r\n    height: 11px;\r\n    font-family: Verdana, Helvetica, sans-serif;\r\n    font-size: 9px;\r\n}\r\n\r\n.krajee-default .file-thumb-progress .progress, .kv-upload-progress .progress {\r\n    background-color: #ccc;\r\n}\r\n\r\n.krajee-default .file-caption-info, .krajee-default .file-size-info {\r\n    display: block;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    width: 160px;\r\n    height: 15px;\r\n    margin: auto;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-video, .file-zoom-content > .file-object.type-flash, .file-zoom-content > .file-object.type-image {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    width: auto;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-video, .file-zoom-content > .file-object.type-flash {\r\n    height: 100%;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-pdf, .file-zoom-content > .file-object.type-html, .file-zoom-content > .file-object.type-text, .file-zoom-content > .file-object.type-default {\r\n    width: 100%;\r\n}\r\n\r\n.file-loading:before {\r\n    content: " Loading...";\r\n    display: inline-block;\r\n    padding-left: 20px;\r\n    line-height: 16px;\r\n    font-size: 13px;\r\n    font-variant: small-caps;\r\n    color: #999;\r\n    background: transparent url('+a+') top left no-repeat;\r\n}\r\n\r\n.file-object {\r\n    margin: 0 0 -5px 0;\r\n    padding: 0;\r\n}\r\n\r\n.btn-file {\r\n    overflow: hidden;\r\n}\r\n\r\n.btn-file input[type=file] {\r\n    top: 0;\r\n    left: 0;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n    text-align: right;\r\n    opacity: 0;\r\n    background: none repeat scroll 0 0 transparent;\r\n    cursor: inherit;\r\n    display: block;\r\n}\r\n\r\n.btn-file ::-ms-browse {\r\n    font-size: 10000px;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.file-caption .file-caption-name {\r\n    width: 100%;\r\n    margin: 0;\r\n    padding: 0;\r\n    box-shadow: none;\r\n    border: none;\r\n    background: none;\r\n    outline: none;\r\n}\r\n\r\n.file-caption.icon-visible .file-caption-icon {\r\n    display: inline-block;\r\n}\r\n\r\n.file-caption.icon-visible .file-caption-name {\r\n    padding-left: 15px;\r\n}\r\n\r\n.file-caption-icon {\r\n    left: 8px;\r\n}\r\n\r\n.file-error-message {\r\n    color: #a94442;\r\n    background-color: #f2dede;\r\n    margin: 5px;\r\n    border: 1px solid #ebccd1;\r\n    border-radius: 4px;\r\n    padding: 15px;\r\n}\r\n\r\n.file-error-message pre {\r\n    margin: 5px 0;\r\n}\r\n\r\n.file-caption-disabled {\r\n    background-color: #eee;\r\n    cursor: not-allowed;\r\n    opacity: 1;\r\n}\r\n\r\n.file-preview {\r\n    border-radius: 5px;\r\n    border: 1px solid #ddd;\r\n    padding: 8px;\r\n    width: 100%;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.file-preview .btn-xs {\r\n    padding: 1px 5px;\r\n    font-size: 12px;\r\n    line-height: 1.5;\r\n    border-radius: 3px;\r\n}\r\n\r\n.file-preview .fileinput-remove {\r\n    top: 1px;\r\n    right: 1px;\r\n    line-height: 10px;\r\n}\r\n\r\n.file-preview .clickable {\r\n    cursor: pointer;\r\n}\r\n\r\n.file-preview-image {\r\n    font: 40px Impact, Charcoal, sans-serif;\r\n    color: #008000;\r\n}\r\n\r\n.krajee-default.file-preview-frame {\r\n    margin: 8px;\r\n    border: 1px solid rgba(0,0,0,0.2);\r\n    box-shadow: 0 0 10px 0 rgba(0,0,0,0.2);\r\n    padding: 6px;\r\n    float: left;\r\n    text-align: center;\r\n}\r\n\r\n.krajee-default.file-preview-frame .kv-file-content {\r\n    width: 213px;\r\n    height: 160px;\r\n}\r\n\r\n.krajee-default .file-preview-other-frame {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.krajee-default.file-preview-frame .kv-file-content.kv-pdf-rendered {\r\n    width: 400px;\r\n}\r\n\r\n.krajee-default.file-preview-frame[data-template="audio"] .kv-file-content {\r\n    width: 240px;\r\n    height: 55px;\r\n}\r\n\r\n.krajee-default.file-preview-frame .file-thumbnail-footer {\r\n    height: 70px;\r\n}\r\n\r\n.krajee-default.file-preview-frame:not(.file-preview-error):hover {\r\n    border: 1px solid rgba(0,0,0,0.3);\r\n    box-shadow: 0 0 10px 0 rgba(0,0,0,0.4);\r\n}\r\n\r\n.krajee-default .file-preview-text {\r\n    display: block;\r\n    color: #428bca;\r\n    border: 1px solid #ddd;\r\n    font-family: Menlo, Monaco, Consolas, "Courier New", monospace;\r\n    outline: none;\r\n    padding: 8px;\r\n    resize: none;\r\n}\r\n\r\n.krajee-default .file-preview-html {\r\n    border: 1px solid #ddd;\r\n    padding: 8px;\r\n    overflow: auto;\r\n}\r\n\r\n.krajee-default .file-other-icon {\r\n    font-size: 6em;\r\n    line-height: 1;\r\n}\r\n\r\n.krajee-default .file-footer-buttons {\r\n    float: right;\r\n}\r\n\r\n.krajee-default .file-footer-caption {\r\n    display: block;\r\n    text-align: center;\r\n    padding-top: 4px;\r\n    font-size: 11px;\r\n    color: #777;\r\n    margin-bottom: 30px;\r\n}\r\n\r\n.file-upload-stats {\r\n    font-size: 10px;\r\n    text-align: center;\r\n    width: 100%;\r\n}\r\n\r\n.kv-upload-progress .file-upload-stats {\r\n    font-size: 12px;\r\n    margin: -10px 0 5px;\r\n}\r\n\r\n.krajee-default .file-preview-error {\r\n    opacity: 0.65;\r\n    box-shadow: none;\r\n}\r\n\r\n.krajee-default .file-thumb-progress {\r\n    height: 11px;\r\n    top: 37px;\r\n    left: 0;\r\n    right: 0;\r\n}\r\n\r\n.krajee-default.kvsortable-ghost {\r\n    background: #e1edf7;\r\n    border: 2px solid #a1abff;\r\n}\r\n\r\n.krajee-default .file-preview-other:hover {\r\n    opacity: 0.8;\r\n}\r\n\r\n.krajee-default .file-preview-frame:not(.file-preview-error) .file-footer-caption:hover {\r\n    color: #000;\r\n}\r\n\r\n.kv-upload-progress .progress {\r\n    height: 20px;\r\n    margin: 10px 0;\r\n    overflow: hidden;\r\n}\r\n\r\n.kv-upload-progress .progress-bar {\r\n    height: 20px;\r\n    font-family: Verdana, Helvetica, sans-serif;\r\n}\r\n\r\n/*noinspection CssOverwrittenProperties*/\r\n.file-zoom-dialog .file-other-icon {\r\n    font-size: 22em;\r\n    font-size: 50vmin;\r\n}\r\n\r\n.file-zoom-dialog .modal-dialog {\r\n    width: auto;\r\n}\r\n\r\n.file-zoom-dialog .modal-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.file-zoom-dialog .btn-navigate {\r\n    padding: 0;\r\n    margin: 0;\r\n    background: transparent;\r\n    text-decoration: none;\r\n    outline: none;\r\n    opacity: 0.7;\r\n    top: 45%;\r\n    font-size: 4em;\r\n    color: #1c94c4;\r\n}\r\n\r\n.file-zoom-dialog .btn-navigate:not([disabled]):hover {\r\n    outline: none;\r\n    box-shadow: none;\r\n    opacity: 0.6;\r\n}\r\n\r\n.file-zoom-dialog .floating-buttons {\r\n    top: 5px;\r\n    right: 10px;\r\n}\r\n\r\n.file-zoom-dialog .btn-navigate[disabled] {\r\n    opacity: 0.3;\r\n}\r\n\r\n.file-zoom-dialog .btn-prev {\r\n    left: 1px;\r\n}\r\n\r\n.file-zoom-dialog .btn-next {\r\n    right: 1px;\r\n}\r\n\r\n.file-zoom-dialog .kv-zoom-title {\r\n    font-weight: 300;\r\n    color: #999;\r\n    max-width: 50%;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.file-input-new .no-browse .form-control {\r\n    border-top-right-radius: 4px;\r\n    border-bottom-right-radius: 4px;\r\n}\r\n\r\n.file-input-ajax-new .no-browse .form-control {\r\n    border-top-right-radius: 4px;\r\n    border-bottom-right-radius: 4px;\r\n}\r\n\r\n.file-caption-main {\r\n    width: 100%;\r\n}\r\n\r\n.file-thumb-loading {\r\n    background: transparent url('+a+") no-repeat scroll center center content-box !important;\r\n}\r\n\r\n.file-drop-zone {\r\n    border: 1px dashed #aaa;\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n    margin: 12px 15px 12px 12px;\r\n    padding: 5px;\r\n}\r\n\r\n.file-drop-zone.clickable:hover {\r\n    border: 2px dashed #999;\r\n}\r\n\r\n.file-drop-zone.clickable:focus {\r\n    border: 2px solid #5acde2;\r\n}\r\n\r\n.file-drop-zone .file-preview-thumbnails {\r\n    cursor: default;\r\n}\r\n\r\n.file-drop-zone-title {\r\n    color: #aaa;\r\n    font-size: 1.6em;\r\n    padding: 85px 10px;\r\n    cursor: default;\r\n}\r\n\r\n.file-highlighted {\r\n    border: 2px dashed #999 !important;\r\n    background-color: #eee;\r\n}\r\n\r\n.file-uploading {\r\n    background: url("+n+') no-repeat center bottom 10px;\r\n    opacity: 0.65;\r\n}\r\n\r\n.file-zoom-fullscreen .modal-dialog {\r\n    min-width: 100%;\r\n    margin: 0;\r\n}\r\n\r\n.file-zoom-fullscreen .modal-content {\r\n    border-radius: 0;\r\n    box-shadow: none;\r\n    min-height: 100vh;\r\n}\r\n\r\n.file-zoom-fullscreen .modal-body {\r\n    overflow-y: auto;\r\n}\r\n\r\n.floating-buttons {\r\n    z-index: 3000;\r\n}\r\n\r\n.floating-buttons .btn-kv {\r\n    margin-left: 3px;\r\n    z-index: 3000;\r\n}\r\n\r\n.kv-zoom-actions .btn-kv {\r\n    margin-left: 3px;\r\n}\r\n\r\n.file-zoom-content {\r\n    height: 480px;\r\n    text-align: center;\r\n}\r\n\r\n.file-zoom-content .file-preview-image {\r\n    max-height: 100%;\r\n}\r\n\r\n.file-zoom-content .file-preview-video {\r\n    max-height: 100%;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-image {\r\n    height: auto;\r\n    min-height: inherit;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-audio {\r\n    width: auto;\r\n    height: 30px;\r\n}\r\n\r\n@media (min-width: 576px) {\r\n    .file-zoom-dialog .modal-dialog {\r\n        max-width: 500px;\r\n    }\r\n}\r\n\r\n@media (min-width: 992px) {\r\n    .file-zoom-dialog .modal-lg {\r\n        max-width: 800px;\r\n    }\r\n}\r\n\r\n@media (max-width: 767px) {\r\n    .file-preview-thumbnails {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .file-zoom-dialog .modal-header {\r\n        flex-direction: column;\r\n    }\r\n}\r\n\r\n@media (max-width: 350px) {\r\n    .krajee-default.file-preview-frame:not([data-template="audio"]) .kv-file-content {\r\n        width: 160px;\r\n    }\r\n}\r\n\r\n@media (max-width: 420px) {\r\n    .krajee-default.file-preview-frame .kv-file-content.kv-pdf-rendered {\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n.file-loading[dir=rtl]:before {\r\n    background: transparent url('+a+") top right no-repeat;\r\n    padding-left: 0;\r\n    padding-right: 20px;\r\n}\r\n\r\n.file-sortable .file-drag-handle {\r\n    cursor: move;\r\n    opacity: 1;\r\n}\r\n\r\n.file-sortable .file-drag-handle:hover {\r\n    opacity: 0.7;\r\n}\r\n\r\n.clickable .file-drop-zone-title {\r\n    cursor: pointer;\r\n}\r\n\r\n.file-preview-initial.sortable-chosen {\r\n    background-color: #d9edf7;\r\n}",""])},387:function(e,i,t){e.exports=t.p+"loading-13630905267b809161e71d0f8a0c017b.gif"},388:function(e,i,t){e.exports=t.p+"loading-sm-e5ad074b7969cc386b387f08dba4fcec.gif"}}]);
//# sourceMappingURL=vendors~frontdoor-upload-view~sofi-manage-comic-photos-view-ac49f304d25866a95ce2.js.map