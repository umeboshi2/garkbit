(self.webpackJsonp=self.webpackJsonp||[]).push([[24],{372:function(t,e,n){"use strict";var o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u,i,l,h,c,p,d,f,y,g;u=n(4),i=n(1),h=n(2),c=n(82),d=n(88),g=n(3),n(5),i.Radio.channel("bumblr"),f=g.renderable(function(){return g.div(".mytoolbar.row",function(){return g.ul(".pager",function(){return g.li(".previous",function(){return g.i("#prev-page-button.fa.fa-arrow-left.btn.btn-default")}),g.li(function(){return g.i("#slideshow-button.fa.fa-play.btn.btn-default")}),g.li(".next",function(){return g.i("#next-page-button.fa.fa-arrow-right.btn.btn-default")})})}),g.div("#posts-container.row")}),y=g.renderable(function(s){return g.div(".listview-list-entry",function(){return g.span(function(){var t,e,n,o,r,i;for(t=null,n=e=0,o=(r=s.photos[0].alt_sizes).length;n<o;n++)(i=r[n]).width>e&&i.width<250&&(e=(t=i).width);return i=t,g.a({href:s.post_url,target:"_blank"},function(){return g.img({src:i.url})})})})}),p=function(){var t=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,h.View),e}();return t.prototype.template=y,t.prototype.className="post",t}.call(void 0),l=function(){var t=function(t){function i(){r(this,i);var t=s(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments));return t.keydownHandler=t.keydownHandler.bind(t),t}return a(i,h.CollectionView),o(i,[{key:"manage_slideshow",value:function(){return this.ui.slideshow_button.hasClass("fa-play")?this.start_slideshow():this.stop_slideshow()}},{key:"start_slideshow",value:function(){var t=this;return console.log("start slideshow"),this.slideshow_handler=setInterval(function(){return console.log("getting next page"),t.get_next_page()},6e3),this.ui.slideshow_button.removeClass("fa-play"),this.ui.slideshow_button.addClass("fa-stop")}},{key:"stop_slideshow",value:function(){return clearInterval(this.slideshow_handler),this.ui.slideshow_button.removeClass("fa-stop"),this.ui.slideshow_button.addClass("fa-play")}},{key:"get_next_page",value:function(){var t=this;return this.collection.getNextPage().done(function(){return t.set_image_layout()})}},{key:"get_prev_page",value:function(){var t=this;return this.collection.getPreviousPage().done(function(){return t.set_image_layout()})}},{key:"get_another_page",value:function(t){var e,n=this;switch(t){case"prev":e=this.collection.getPreviousPage();break;case"next":e=this.collection.getNextPage();break;default:e=null}if(e)return e.done(function(){return n.set_image_layout()})}},{key:"handle_key_command",value:function(t){if("prev"===t||"next"===t)return this.get_another_page(t)}},{key:"keydownHandler",value:function(t){var e,n,o,r;for(e in function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,i),o=[],n=this.keycommands)r=n[e],t.keyCode===r?o.push(this.handle_key_command(e)):o.push(void 0);return o}},{key:"set_image_layout",value:function(){var t,e=this;return t=u(".post"),d(t,function(){return e.ui.posts.show(),e.masonry.reloadItems(),e.masonry.layout()})}},{key:"onDomRefresh",value:function(){return u("html").keydown(this.keydownHandler),this.masonry=new c("#posts-container",{gutter:2,isInitLayout:!1,itemSelector:".post"}),this.set_image_layout()}},{key:"onBeforeDestroy",value:function(){return u("html").unbind("keydown",this.keydownHandler),this.stop_slideshow(),this.masonry.destroy()}}]),i}();return t.prototype.template=f,t.prototype.childView=p,t.prototype.childViewContainer="#posts-container",t.prototype.ui={posts:"#posts-container",slideshow_button:"#slideshow-button",next_button:"#next-page-button",prev_putton:"#prev-page-button"},t.prototype.events={"click @ui.prev_putton":"get_prev_page","click @ui.next_button":"get_next_page","click @ui.slideshow_button":"manage_slideshow"},t.prototype.keycommands={prev:65,next:90},t}.call(void 0),t.exports=l},373:function(t,e,n){"use strict";var o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u,i,l,h,c,p,d,f,y,g,m;u=n(4),i=n(1),h=n(2),c=n(82),d=n(88),m=n(3),n(5),i.Radio.channel("bumblr"),y=m.renderable(function(){return m.div(".mytoolbar.row",function(){return m.div(".btn-group",function(){return m.button(".previous.btn.btn-default",function(){return m.i("#prev-page-button.fa.fa-arrow-left")}),m.button(".slideshow-button.btn.btn-default",function(){return m.i(".fa.fa-play")}),m.button(".next.btn.btn-default",function(){return m.i("#next-page-button.fa.fa-arrow-right")})})}),m.div("#posts-container.row")}),f="position:fixed;top:0;bottom:0;"+(f="vertical-align:middle;height:100%;max-width:100%;max-height:100%;"),g=m.renderable(function(n){return m.div(".listview-list-entry",{style:"height:100%;width:100%;"},function(){return m.span(function(){var t,e;return t=n.photos[0],0,null,console.log("photo",t),e=t.original_size.url,m.a({href:n.post_url,target:"_blank"},function(){return m.img({src:e,style:f})})})})}),p=function(){var t=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,h.View),e}();return t.prototype.template=g,t.prototype.className="post",t}.call(void 0),l=function(){var t=function(t){function i(){r(this,i);var t=s(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments));return t.keydownHandler=t.keydownHandler.bind(t),t}return a(i,h.CollectionView),o(i,[{key:"manage_slideshow",value:function(){return this.ui.slideshow_button.hasClass("fa-play")?this.start_slideshow():this.stop_slideshow()}},{key:"start_slideshow",value:function(){var t=this;return console.log("start slideshow"),this.slideshow_handler=setInterval(function(){return console.log("getting next page"),t.get_next_page()},6e3),this.ui.slideshow_button.removeClass("fa-play"),this.ui.slideshow_button.addClass("fa-stop")}},{key:"stop_slideshow",value:function(){return clearInterval(this.slideshow_handler),this.ui.slideshow_button.removeClass("fa-stop"),this.ui.slideshow_button.addClass("fa-play")}},{key:"get_next_page",value:function(){var t=this;return this.collection.getNextPage().done(function(){return t.set_image_layout()})}},{key:"get_prev_page",value:function(){var t=this;return this.collection.getPreviousPage().done(function(){return t.set_image_layout()})}},{key:"get_another_page",value:function(t){var e,n=this;switch(t){case"prev":e=this.collection.getPreviousPage();break;case"next":e=this.collection.getNextPage();break;default:e=null}if(e)return e.done(function(){return n.set_image_layout()})}},{key:"handle_key_command",value:function(t){if("prev"===t||"next"===t)return this.get_another_page(t)}},{key:"keydownHandler",value:function(t){var e,n,o,r;for(e in function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,i),o=[],n=this.keycommands)r=n[e],t.keyCode===r?o.push(this.handle_key_command(e)):o.push(void 0);return o}},{key:"set_image_layout",value:function(){var t,e=this;return t=u(".post"),d(t,function(){return e.ui.posts.show(),e.masonry.reloadItems(),e.masonry.layout()})}},{key:"onDomRefresh",value:function(){return u("html").keydown(this.keydownHandler),this.masonry=new c("#posts-container",{gutter:2,isInitLayout:!1,itemSelector:".post"}),this.set_image_layout()}},{key:"onBeforeDestroy",value:function(){return u("html").unbind("keydown",this.keydownHandler),this.stop_slideshow(),this.masonry.destroy()}}]),i}();return t.prototype.template=y,t.prototype.childView=p,t.prototype.childViewContainer="#posts-container",t.prototype.ui={posts:"#posts-container",slideshow_button:".slideshow-button",next_button:"#next-page-button",prev_putton:"#prev-page-button"},t.prototype.events={"click @ui.prev_putton":"get_prev_page","click @ui.next_button":"get_next_page","click @ui.slideshow_button":"manage_slideshow"},t.prototype.keycommands={prev:65,next:90},t}.call(void 0),t.exports=l},88:function(n,o,r){var i,s;
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"use strict";i=[r(98)],void 0===(s=function(t){return function(e,t){var r=e.jQuery,i=e.console;function s(t,e){for(var n in e)t[n]=e[n];return t}var a=Array.prototype.slice;function u(t,e,n){if(!(this instanceof u))return new u(t,e,n);var o=t;"string"==typeof t&&(o=document.querySelectorAll(t)),o?(this.elements=function(t){if(Array.isArray(t))return t;return"object"!=typeof t||"number"!=typeof t.length?[t]:a.call(t)}(o),this.options=s({},this.options),"function"==typeof e?n=e:s(this.options,e),n&&this.on("always",n),this.getImages(),r&&(this.jqDeferred=new r.Deferred),setTimeout(this.check.bind(this))):i.error("Bad element for imagesLoaded "+(o||t))}(u.prototype=Object.create(t.prototype)).options={},u.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},u.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&l[e]){for(var n=t.querySelectorAll("img"),o=0;o<n.length;o++){var r=n[o];this.addImage(r)}if("string"==typeof this.options.background){var i=t.querySelectorAll(this.options.background);for(o=0;o<i.length;o++){var s=i[o];this.addElementBackgroundImages(s)}}}};var l={1:!0,9:!0,11:!0};function n(t){this.img=t}function o(t,e){this.url=t,this.element=e,this.img=new Image}return u.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var n=/url\((['"])?(.*?)\1\)/gi,o=n.exec(e.backgroundImage);null!==o;){var r=o&&o[2];r&&this.addBackground(r,t),o=n.exec(e.backgroundImage)}},u.prototype.addImage=function(t){var e=new n(t);this.images.push(e)},u.prototype.addBackground=function(t,e){var n=new o(t,e);this.images.push(n)},u.prototype.check=function(){var o=this;function e(t,e,n){setTimeout(function(){o.progress(t,e,n)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},u.prototype.progress=function(t,e,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+n,t,e)},u.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},(n.prototype=Object.create(t.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},n.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},n.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},n.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},n.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(o.prototype=Object.create(n.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},u.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((r=t).fn.imagesLoaded=function(t,e){return new u(this,t,e).jqDeferred.promise(r(this))})},u.makeJQueryPlugin(),u}(e,t)}.apply(o,i))||(n.exports=s)}("undefined"!=typeof window?window:this)}}]);
//# sourceMappingURL=bumblr-view-blog-view-88de216693a5032daa4d.js.map