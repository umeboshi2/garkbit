(self.webpackJsonp=self.webpackJsonp||[]).push([[76],{234:function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i,r,l,c,a,u;a=n(0),n(4),r=n(1),l=n(2),n(82),u=n(3),n(83),r.Radio.channel("global"),r.Radio.channel("messages"),i=r.Radio.channel("sofi"),c=function(){var e=function(e){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments));return e.onComicCollectionChanged=e.onComicCollectionChanged.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,l.View),o(r,[{key:"initialize",value:function(e){return this.getOption("comicCollection").on("pageable:state:change",this.onComicCollectionChanged)}},{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"selectionChanged",value:function(e){var t,n,o;return n=this.ui.seriesgroup.val(),t=this.getOption("comicCollection"),o=i.request("locals:get","currentQueryWhere"),"ALL"===n?delete o.seriesgroup:o.seriesgroup=n,i.request("locals:set","currentQueryWhere",o),t.state.currentPage=0,t.fetch({data:{where:o}}).done(function(){return t.state.currentPage=0,t.trigger("pageable:state:change")})}},{key:"onComicCollectionChanged",value:function(e){var t,n,o=this;return function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}(this,r),t=this.ui.seriesgroup.val(),n=i.request("locals:get","currentQueryWhere"),(null!=(n=a.clone(n))?n.seriesgroup:void 0)&&delete n.seriesgroup,this.collection.fetch({data:{distinct:"seriesgroup",sort:"seriesgroup",where:n}}).done(function(){if(o.render(),o.ui.seriesgroup.val(t),null===o.ui.seriesgroup.val())return o.ui.seriesgroup.val("ALL")})}}]),r}();return e.prototype.ui={seriesgroup:'select[name="select_seriesgroup"]'},e.prototype.events={"change @ui.seriesgroup":"selectionChanged"},e.prototype.template=u.renderable(function(l){return u.span(".input-group",function(){return u.label(".control-label",{for:"select_seriesgroup"},"Series Group"),u.select(".form-control",{name:"select_seriesgroup"},function(){var e,t,n,o,r,i;for(u.option({value:"ALL",selected:""},"Every Series Group"),i=[],e=0,n=(r=l.items).length;e<n;e++)o={value:(t=r[e]).seriesgroup},i.push(u.option(o,t.seriesgroup));return i})})}),e}.call(void 0),e.exports=c},235:function(e,t,n){"use strict";var r,o,i,l,c,a=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();n(4),o=n(1),i=n(2),n(82),c=n(3),n(83),o.Radio.channel("global"),o.Radio.channel("messages"),r=o.Radio.channel("sofi"),l=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.View),a(t,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"selectionChanged",value:function(e){var t,n,o;return n=this.ui.publisher.val(),t=this.getOption("comicCollection"),o=r.request("locals:get","currentQueryWhere"),"ALL"===n?delete o.publisher:o.publisher=n,r.request("locals:set","currentQueryWhere",o),t.state.currentPage=0,t.fetch({data:{where:o}}).done(function(){return t.state.currentPage=0,t.trigger("pageable:state:change")})}}]),t}();return e.prototype.ui={publisher:'select[name="select_publisher"]'},e.prototype.events={"change @ui.publisher":"selectionChanged"},e.prototype.template=c.renderable(function(l){return c.span(".input-group",function(){return c.label(".control-label",{for:"select_publisher"},"Publisher"),c.select(".form-control",{name:"select_publisher"},function(){var e,t,n,o,r,i;for(c.option({value:"ALL",selected:""},"All publishers"),i=[],e=0,n=(r=l.items).length;e<n;e++)o={value:(t=r[e]).publisher},i.push(c.option(o,t.publisher));return i})})}),e}.call(void 0),e.exports=l},514:function(e,t,n){"use strict";var o,r,i,l,c,a,u,s,p,f,h,d,b,y=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(4),r=n(1),p=n(2),n(82),b=n(3),n(83),n(127),l=n(106),a=n(515),s=n(96),r.Radio.channel("global"),r.Radio.channel("messages"),o=r.Radio.channel("sofi"),h=b.renderable(function(e){return b.div("default_entry_template")}),f=o.request("dbComicColumns"),b.renderable(function(i){var l;return l=["seriesgroup","series","issue"],b.span(".input-group",function(){return b.label(".control-label",{for:"select_sortby"},"Sort by"),b.select(".form-control",{name:"select_sortby"},function(){var e,t,n,o,r;for(o={value:"default"},i===l&&(o.selected=""),b.option(o,"default"),r=[],t=0,n=f.length;t<n;t++)o={value:e=f[t]},i===e&&(o.selected=""),r.push(b.option(o,e));return r})})}),c=function(){var e=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,p.NextCollectionView),t}();return e.prototype.childView=l,e}.call(void 0),d={asc:"ascending",desc:"descending"},u=function(){var e=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,p.View),y(t,[{key:"updateHeader",value:function(){var e,t,n,o;return e=this.collection.state.currentPage,n=this.collection.state.totalPages,o=this.collection.state.totalRecords,t=(t="Page "+(e+1)+" of "+n+", "+d[this.collection.state.sortDirection])+" pages, with "+o+" comics total.",this.triggerMethod("set:header",t)}},{key:"onRender",value:function(){var e,t=this;return e=this.options.entryTemplate||h,this.collectionView=new c({collection:this.collection,entryTemplate:e}),this.showChildView("entries",this.collectionView),this.updateHeader(),this.collection.on("pageable:state:change",function(){return t.updateHeader()})}},{key:"onBeforeDestroy",value:function(){return this.collection.off("pageable:state:change")}}]),t}();return e.prototype.behaviors=[s],e.prototype.ui={header:".listview-header",entries:".dbcomics-entries"},e.prototype.regions={entries:"@ui.entries"},e.prototype.template=b.renderable(function(e){return b.div(".listview-header"),b.div(".dbcomics-entries.row")}),e}.call(void 0),i=function(){var e=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,p.View),y(t,[{key:"templateContext",value:function(){return this.options}},{key:"onRender",value:function(){var e,t;return e=new a({collection:this.collection}),this.showChildView("sidebar",e),t=new u({collection:this.collection}),this.showChildView("body",t),this.ui.sidebar.css("height","300px"),this.ui.sidebar.droppable()}}]),t}();return e.prototype.template=b.renderable(function(e){return b.div(".listview-header",function(){return b.text("DbComics")}),b.div(".row",function(){return b.div(".sidebar.col-sm-4",{style:"height: calc(100% - 50px);"}),b.div(".body.col-sm-8")})}),e.prototype.ui={body:".body",sidebar:".sidebar"},e.prototype.regions={body:"@ui.body",sidebar:"@ui.sidebar"},e}.call(void 0),e.exports=i},515:function(e,t,n){"use strict";var r,o,i,l,c,a,u,s,p,f,h,d,b,y,g,v,w,_=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(4),o=n(1),a=n(2),v=n(3),n(83),n(106),n(96),h=n(234),p=n(235),u=n(516),c=o.Radio.channel("global"),o.Radio.channel("messages"),r=o.Radio.channel("sofi"),v.renderable(function(e){return v.div("default_entry_template")}),b=r.request("dbComicColumns"),y=["seriesgroup","series","issue"],g=v.renderable(function(i){return v.span(".input-group",function(){return v.label(".control-label",{for:"select_sortby"},"Sort by"),v.select(".form-control",{name:"select_sortby"},function(){var e,t,n,o,r;for(o={value:"default"},i===y&&(o.selected=""),v.option(o,"default"),r=[],t=0,n=b.length;t<n;t++)o={value:e=b[t]},i===e&&(o.selected=""),r.push(v.option(o,e));return r})})}),i=function(){var e=function(e){function t(){return m(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,a.View),_(t,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"selectionChanged",value:function(e){var t,n,o;return t=this.ui.collectionStatus.val(),n=this.getOption("comicCollection"),o=r.request("locals:get","currentQueryWhere"),"ALL"===t?delete o.list_id:o.list_id=t,r.request("locals:set","currentQueryWhere",o),n.fetch({data:{where:o}}).done(function(){return n.state.currentPage=0,n.trigger("pageable:state:change")})}}]),t}();return e.prototype.ui={collectionStatus:'select[name="select_collectionstatus"]'},e.prototype.events={"change @ui.collectionStatus":"selectionChanged"},e.prototype.template=v.renderable(function(l){return v.span(".input-group",function(){return v.label(".control-label",{for:"select_collectionstatus"},"Collection Status"),v.select(".form-control",{name:"select_collectionstatus"},function(){var e,t,n,o,r,i;for(v.option({value:"ALL",selected:""},"All Status"),i=[],e=0,n=(r=l.items).length;e<n;e++)o={value:(t=r[e]).id},i.push(v.option(o,t.name));return i})})}),e}.call(void 0),d=function(){var e=function(e){function t(){return m(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,a.View),_(t,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"sort_collection",value:function(){var e,t=this;return"default"===(e=this.ui.sort_by.val())&&(e=y),this.collection.state.sortColumn=e,this.collection.state.currentPage=0,this.collection.fetch({data:{where:r.request("locals:get","currentQueryWhere")}}).done(function(){return t.collection.trigger("pageable:state:change")})}}]),t}();return e.prototype.ui={sort_by:'select[name="select_sortby"]'},e.prototype.events={"change @ui.sort_by":"sort_collection"},e.prototype.template=v.renderable(function(e){var t;return t=e.collection.state.sortColumn,g(t)}),e}.call(void 0),c.request("main:app:AuthCollection"),f=r.request("db:clzcomic:SeriesGroupCollection"),s=r.request("db:clzcomic:PublisherCollection"),w={navigatorBox:".navigator-box",sortByBox:".sort-by-box",collectionStatusFilterBox:".collection-status-filter-box",publisherFilterBox:".publisher-filter-box",seriesgroupFilterBox:".seriesgroup-filter-box"},l=function(){var e=function(e){function t(){return m(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,a.View),_(t,[{key:"regions",value:function(){var t;return t={},Object.keys(w).forEach(function(e){return t[e]="@ui."+e}),t}},{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"showCollectionStatus",value:function(){var t,n=this;return(t=r.request("db:clzcollectionstatus:collection")).fetch().done(function(){var e;return e=new i({collection:t,comicCollection:n.collection}),n.showChildView("collectionStatusFilterBox",e)})}},{key:"showSeriesGroupSelect",value:function(){var t,n=this;return(t=new f).fetch({data:{distinct:"seriesgroup",sort:"seriesgroup"}}).done(function(){var e;return e=new h({collection:t,comicCollection:n.collection}),n.showChildView("seriesgroupFilterBox",e),window.sgview=e})}},{key:"showPublisherSelect",value:function(){var t,n=this;return(t=new s).fetch({data:{distinct:"publisher",sort:"publisher"}}).done(function(){var e;return e=new p({collection:t,comicCollection:n.collection}),n.showChildView("publisherFilterBox",e)})}},{key:"showSortBySelect",value:function(){var e;return e=new d({collection:this.collection}),this.showChildView("sortByBox",e)}},{key:"showNavigatorBox",value:function(){var e;return e=new u({collection:this.collection}),this.showChildView("navigatorBox",e)}},{key:"onRender",value:function(){if(this.showNavigatorBox(),this.showCollectionStatus(),this.showPublisherSelect(),this.showSeriesGroupSelect(),this.showSortBySelect(),this.getOption("workspaceSidebar"))return console.warn("workspaceSidebar!!!!!!!!")}}]),t}();return e.prototype.ui=w,e.prototype.template=v.renderable(function(e){return v.div(".navigator-box.listview-list-entry"),v.div(".sort-by-box.listview-list-entry"),v.div(".collection-status-filter-box.listview-list-entry"),v.div(".publisher-filter-box.listview-list-entry"),v.div(".seriesgroup-filter-box.listview-list-entry")}),e}.call(void 0),e.exports=l},516:function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var r,l,i,c,a,u;r=n(4),i=n(1),c=n(2),u=n(3),n(83),n(106),n(96),n(234),n(235),n(517),i.Radio.channel("global"),i.Radio.channel("messages"),l=i.Radio.channel("sofi"),u.renderable(function(e){return u.div("default_entry_template")}),l.request("dbComicColumns"),a=function(){var e=function(e){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments));return e.keydownHandler=e.keydownHandler.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,c.View),o(i,[{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"update_nav_buttons",value:function(){var e;if((e=this.collection.state.currentPage)?this.ui.prev_li.show():this.ui.prev_li.hide(),e!==this.collection.state.lastPage?this.ui.next_li.show():this.ui.next_li.hide(),0===this.collection.state.totalRecords)return this.ui.prev_li.hide(),this.ui.next_li.hide()}},{key:"handle_key_command",value:function(e){if("prev"===e||"next"===e)return this.get_another_page(e)}},{key:"keydownHandler",value:function(e){var t,n,o,r;for(t in function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}(this,i),o=[],n=this.keycommands)r=n[t],e.keyCode===r?o.push(this.handle_key_command(t)):o.push(void 0);return o}},{key:"toggle_sort_direction",value:function(e){var t,n=this;return(t=this.ui.dir_icon).hasClass("fa-arrow-up")?(t.removeClass("fa-arrow-up"),t.addClass("fa-arrow-down"),this.collection.state.sortDirection="desc"):(t.removeClass("fa-arrow-down"),t.addClass("fa-arrow-up"),this.collection.state.sortDirection="asc"),this.collection.fetch({data:{where:l.request("locals:get","currentQueryWhere")}}).done(function(){return n.collection.trigger("pageable:state:change")})}},{key:"onRender",value:function(){var e=this;return this.update_nav_buttons(),this.collection.on("pageable:state:change",function(){return e.update_nav_buttons()}),r("html").keydown(this.keydownHandler)}},{key:"onBeforeDestroy",value:function(){return this.collection.off("pageable:state:change"),r("html").unbind("keydown",this.keydownHandler)}},{key:"get_another_page",value:function(e){var t,n,o,r,i=this;if(r=l.request("locals:get","currentQueryWhere"),this.collection.queryParams.where=r,n=(t=this.collection.state.currentPage)===this.collection.state.lastPage,o=void 0,"prev"===e&&t?o=this.collection.getPreviousPage():"next"!==e||n||(o=this.collection.getNextPage()),o)return o.done(function(){return delete i.collection.queryParams.where})}},{key:"get_prev_page",value:function(){return this.get_another_page("prev")}},{key:"get_next_page",value:function(){return this.get_another_page("next")}}]),i}();return e.prototype.tagName="ul",e.prototype.className="pager",e.prototype.ui={prev_li:".previous",next_li:".next",prev_button:".prev-page-button",dir_button:".direction-button",dir_icon:".direction-icon",next_button:".next-page-button"},e.prototype.events={"click @ui.prev_button":"get_prev_page","click @ui.dir_button":"toggle_sort_direction","click @ui.next_button":"get_next_page"},e.prototype.childViewTriggers={"workspace:changed":"workspace:changed"},e.prototype.template=u.renderable(function(e){return u.li(".previous",function(){return u.span(".prev-page-button.btn",function(){return u.i(".fa.fa-arrow-left"),u.text("-previous")})}),u.li(".direction",function(){return u.span(".direction-button.btn",function(){return u.i(".direction-icon.fa.fa-arrow-up")})}),u.li(".next",function(){return u.span(".next-page-button.btn",function(){return u.text("next-"),u.i(".fa.fa-arrow-right")})})}),e.prototype.keycommands={prev:37,next:39},e}.call(void 0),e.exports=a},517:function(e,t,n){"use strict";var o,r,i,l,c,a,u,s,p=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();n(4),r=n(1),l=n(2),s=n(3);var f=n(34);u=f.form_group_input_div,i=r.Radio.channel("global"),r.Radio.channel("messages"),o=r.Radio.channel("sofi"),i.request("main:app:AuthCollection"),c=o.request("db:ebcomicworkspace:WorkspaceCollection"),a=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.View),p(t,[{key:"initialize",value:function(){var e=this;return this.collection=new c,this.collection.fetch({data:{distinct:"name",sort:"name"}}).done(function(){return e.render()})}},{key:"templateContext",value:function(){return{collection:this.collection}}},{key:"theWorkspaceChanged",value:function(e){return console.log("theWorkspaceChanged",e)}}]),t}();return e.prototype.className="listview-list-entry",e.prototype.ui={name_input:'select[name="select_workspace"]'},e.prototype.triggers={"change @ui.name_input":"workspace:changed"},e.prototype.template=s.renderable(function(l){return u({input_id:"input_wsname",label:"Workspace Name",input_attributes:{name:"name"}}),s.span(".input-group",function(){return s.label(".control-label",{for:"select_workspace"},"Workspace"),s.select(".form-control",{name:"select_workspace"},function(){var e,t,n,o,r,i;if(s.option({value:"UNATTACHED"},"Unattached Comics"),l.items.length){for(i=[],e=0,n=(r=l.items).length;e<n;e++)o={value:(t=r[e]).name},i.push(s.option(o,t.name));return i}return console.log("No workspaces!")})})}),e}.call(void 0),e.exports=a}}]);
//# sourceMappingURL=sofi:views:mainview-6c4b98c020c6d85f43e3.js.map