(self.webpackJsonp=self.webpackJsonp||[]).push([[64],{1085:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,u,i,a,l,f,p,c,d,s,m,y,b,h,v=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var u=Object.getPrototypeOf(e);return null===u?void 0:t(u,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=j(n(7)),k=n(1),w=n(3),O=j(n(6));function j(t){return t&&t.__esModule?t:{default:t}}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function D(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n(62);var S=n(108);b=S.modal_close_button,f=k.Radio.channel("global"),p=k.Radio.channel("messages"),r=f.request("main:app:AuthModel"),o=f.request("crud:view:item"),u=f.request("crud:view:list"),h={name:"summary",entryField:"name",routeName:"muppy"},s=f.request("crud:template:list",h),d=function(t){return O.default.renderable((function(e){var n;return n=".btn.btn-secondary.btn-sm",O.default.span(".mr-auto",(function(){var n,r;return n="#"+t.routeName+"/"+t.name+"/view/"+e.id,r=e[t.entryField]+" - "+e.content.length,O.default.a({href:n},r)})),O.default.span(".ml-auto.btn-group.pull-right",(function(){return O.default.button(".mark-item."+n+".btn-info.fa.fa-spinner"," mark"),O.default.button(".edit-item."+n+".btn-info.fa.fa-edit"," edit"),O.default.button(".delete-item."+n+".btn-danger.fa.fa-close"," delete")}))}))}(h),m=[],y=O.default.renderable((function(t){return O.default.div(".modal-dialog.modal-lg",(function(){return O.default.div(".modal-content",(function(){return O.default.h3(".center","Diff of Summaries"),O.default.div(".modal-body",(function(){return O.default.pre({style:"font-size:.2rem;"},t.output)})),O.default.div(".modal-footer",(function(){return O.default.ul(".list-inline",(function(){return O.default.li("#confirm-delete-button",(function(){return b("OK","check")})),O.default.li("#cancel-delete-button",(function(){return b("Cancel")}))}))}))}))}))})),c=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,t),_(e,[{key:"onDomRefresh",value:function(){return(0,g.default)("#modal").addClass("fade")}}]),e}(w.View);return t.prototype.template=y,t}.call(void 0),a=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,t),_(e,[{key:"ui",value:function(){var t;return(t=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ui",this).call(this)).markItem=".mark-item",t}},{key:"events",value:function(){var t;return(t=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"events",this).call(this))["click @ui.markItem"]="markItemClicked",t}},{key:"markItemClicked",value:function(){return m.length<=1?(m.push(this.model),this.ui.markItem.removeClass("btn-info"),this.ui.markItem.addClass("btn-primary")):this.ui.markItem.hide(),2===m.length&&(0,g.default)(".mark-item.btn-info").hide(),console.log(m)}}]),e}(o);return t.prototype.route_name="muppy",t.prototype.template=d,t.prototype.item_type="summary",t}.call(void 0),i=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,t),e}(r);return t.prototype.url="api/dev/memdiff",t}.call(void 0),l=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,t),_(e,[{key:"onDomRefresh",value:function(){var t;for(t=[];m.length;)t.push(m.pop());return t}},{key:"addSummaryClicked",value:function(){return k.history.navigate("#muppy",{trigger:!0})}},{key:"showDiffClicked",value:function(){var t,e,n,r,o=this;return console.log("MARKEDMODELS",m),e=m[0],n=m[1],(r=(t=new i({sum1:e.id,sum2:n.id})).save()).done((function(){var e;return e=new c({model:t}),o._show_modal(e,!1),p.request("info","diff should be performed"),console.log(t.attributes)})),r.fail((function(){return p.request("danger","something bad happened")}))}},{key:"_show_modal",value:function(t,e){var n;return(n=f.request("main:app:object").getView().getRegion("modal")).backdrop=e,n.show(t)}}]),e}(u);return t.prototype.template=O.default.renderable((function(){return O.default.button(".add-summary-button.btn.btn-primary","Add summary"),O.default.button(".diff-summaries-button.btn.btn-primary","Show diff"),s()})),t.prototype.ui={addSummaryBtn:".add-summary-button",showDiffBtn:".diff-summaries-button"},t.prototype.events={"click @ui.addSummaryBtn":"addSummaryClicked","click @ui.showDiffBtn":"showDiffClicked"},t.prototype.route_name="muppy",t.prototype.childView=a,t.prototype.template2=s,t.prototype.childViewContainer="#summary-container",t.prototype.item_type="summary",t}.call(void 0),e.default=l}}]);
//# sourceMappingURL=muppy-view-list-summaries-b3b60806ef5bf2c92641.js.map