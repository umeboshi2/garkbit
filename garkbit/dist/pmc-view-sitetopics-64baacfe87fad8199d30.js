(self.webpackJsonp=self.webpackJsonp||[]).push([[80],{1089:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r,i,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),c=n(3),a=s(n(6)),f=s(n(7)),d=s(n(1090));function s(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}o=l.Radio.channel("pmc"),i=function(){var t=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return y(e,t),u(e,[{key:"onRender",value:function(){var t,e,n;if(!this.getRegion("papers").hasView())return e=new l.Collection([]),t=o.request("get-fm-collection"),this.model.get("pmc_ids").forEach((function(n){var r,i,u;return i=!1,null!=(r=t.get(n))?(u=r,i=!0):u=o.request("make-remote-model",n),u.isLocal=function(){return i},e.add(u)})),n=new c.CollectionView({collection:e,childView:d.default}),this.showChildView("papers",n)}}]),e}(c.View);return t.prototype.className="list-group",t.prototype.template=a.default.renderable((function(t){return a.default.h3(t.name),a.default.div(".papers")})),t.prototype.ui={showBtn:".show-btn",papers:".papers"},t.prototype.regions={papers:"@ui.papers"},t.prototype.events={"click @ui.showBtn":"showBtnClicked"},t}.call(void 0),r=function(){var t=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return y(e,t),u(e,[{key:"selectChanged",value:function(t){var e,n,r;return r=(0,f.default)(t.target).val(),e=this.getRegion("content"),r?(n=this.model.get("categories")[r],o.request("get-fm-collection").fetch().done((function(){var t;return t=new i({model:new l.Model(n)}),e.show(t)}))):e.empty()}}]),e}(c.View);return t.prototype.template=a.default.renderable((function(t){return a.default.div(".input-group",(function(){return a.default.div(".input-group-prepend",(function(){return a.default.button(".input-group-text.btn.btn-outline-warning",{for:"select-category"},"Category")})),a.default.select("#select-category.custom-select",(function(){var e,n;for(e in a.default.option({value:"",selected:""},"(no category)"),n=[],t.categories)t.categories[e].pmc_ids.length?n.push(a.default.option({value:e},e)):n.push(void 0);return n}))})),a.default.div(".content")})),t.prototype.ui={select:"select",content:".content",button:"button"},t.prototype.regions={content:"@ui.content"},t.prototype.events={"change @ui.select":"selectChanged","click @ui.button":"buttonClicked"},t}.call(void 0),e.default=r},1090:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=a(n(1)),i=a(n(3)),u=a(n(6)),l=a(n(0)),c=a(n(236));function a(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p,h,y,b,v,m,w=[].indexOf;p=r.default.Radio.channel("pmc"),v=function(t){return"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC"+t+"/"},b=function(t){return"https://dx.doi.org/","https://dx.doi.org/"+t},m=function(t){var e,n,o,r,i,u,l,c,a;return t=t.content["OAI-PMH"].GetRecord.record.metadata.article.front,e={},a="journal-title",r="Not Found",(n="journal-title-group")in(o=t["journal-meta"])?r=o[n][a]:a in o&&(r=o[a]),e.journal=r,l="Not Found",l=(null!=(c=(i=t["article-meta"])["title-group"]["article-title"])?c.__text:void 0)?c.__text:c,e.title=l,i["article-id"].forEach((function(t){var n;if("doi"===(null!=t?t["_pub-id-type"]:void 0))return n=t.__text,e.doi=n})),e.abstract=null!=(u=i.abstract)?u.p:void 0,e},y=function(){var t=function(t){function e(){return f(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),o(e,[{key:"onRender",value:function(){return this.ui.jsonView.hide()}},{key:"pmcAnchorClicked",value:function(t){return t.preventDefault()}},{key:"deleteBtnClicked",value:function(){var t=this;return p.request("get-fm-collection").get(this.model.id).destroy().done((function(){return t.trigger("model:destroyed")}))}}]),e}(i.default.View);return t.prototype.behaviors=[c.default],t.prototype.template=u.default.renderable((function(t){var e,n;return e=m(t),n=v(t.id),u.default.div(".card",(function(){return u.default.div(".card-body",(function(){if(u.default.div(".card-title",e.title),u.default.div(".small",e.journal),u.default.a(".pmc-anchor.small",{href:n},"(PMC)"),(null!=e?e.doi:void 0)&&u.default.a(".small",{href:b(e.doi),target:"_blank"},(function(){return u.default.text(" (doi:"+e.doi+")")})),u.default.button(".destroy-btn.btn.btn-outline-danger.btn-sm","Delete"),null!=e?e.abstract:void 0)return u.default.p(".card-text.small",e.abstract)})),u.default.div(".jsonview")}))})),t.prototype.ui={pmcAnchor:".pmc-anchor",deleteBtn:".destroy-btn",jsonView:".jsonview"},t.prototype.events={"click @ui.pmcAnchor":"pmcAnchorClicked","click @ui.deleteBtn":"deleteBtnClicked"},t}.call(void 0),h=function(){var t=function(t){function e(){return f(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),o(e,[{key:"templateContext",value:function(){return{local:this.model.hasOAIcontent()}}},{key:"onRender",value:function(){var t,e;if("OAI-PMH",null!=(t=this.model.get("content"))&&w.call(l.default.keys(t),"OAI-PMH")>=0)return e=new y({model:this.model}),this.showChildView("content",e)}},{key:"onModelDestroyed",value:function(){return this.getRegion("content").empty()}},{key:"showInfoBtnClicked",value:function(){var t,e,n;if(!this.getRegion("content").hasView())return this.model=p.request("make-remote-model",Number(this.model.get("id"))),t=this.model.fetch(),n=this,e=this.model,t.done((function(){var t,o;return o=e.get("id"),t=e.get("content"),p.request("save-fm-content",o,t).then((function(){var t;return(t=p.request("get-fm-collection")).fetch().done((function(){var e,r;return e=t.get(o),r=new y({model:e}),n.showChildView("content",r),n.ui.showInfoBtn.hide()}))}))}))}}]),e}(i.default.View);return t.prototype.template=u.default.renderable((function(t){return u.default.text("PMCID: PMC"+t.id+" "),t.local||(".btn.btn-outline-warning.btn-sm",u.default.button(".show-info-btn.btn.btn-outline-warning.btn-sm.fa.fa-download",(function(){return" Download Front Matter"}))),u.default.div(".content")})),t.prototype.ui={showInfoBtn:".show-info-btn",content:".content"},t.prototype.regions={content:"@ui.content"},t.prototype.childViewEvents={"model:destroyed":"onModelDestroyed"},t.prototype.events={"click @ui.showInfoBtn":"showInfoBtnClicked"},t}.call(void 0),e.default=h}}]);
//# sourceMappingURL=pmc-view-sitetopics-64baacfe87fad8199d30.js.map