(self.webpackJsonp=self.webpackJsonp||[]).push([[23],{112:function(e,t,n){var o={"./adminpanel/main":803,"./bumblr/main":809,"./company/main":825,"./crown/main":828,"./dbadmin/main":832,"./dbdocs/main":834,"./eliza/main":836,"./frontdoor/main":838,"./hourly/main":842,"./junk/main":845,"./moviedb/main":850,"./muppy/main":867,"./netark/main":870,"./places/main":873,"./pmc/main":876,"./sunny/main":882,"./taxes/main":885,"./terminal/main":887,"./todos/main":889,"./tvmaze/main":892,"./useradmin/main":898,"./userprofile/main":901,"./wikipages/main":904};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=112},236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(3),a=n(583),l=(o=a)&&o.__esModule?o:{default:o};function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(605),r=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"options",value:function(){return{jviewSelector:".jsonview"}}},{key:"ui",value:function(){return{jsonView:this.getOption("jviewSelector")}}},{key:"onDomRefresh",value:function(){var e;return e=this.view.model.toJSON(),this.view.jsonView=new l.default(e),this.ui.jsonView.prepend(this.view.jsonView.dom)}}]),t}(u.Behavior),t.default=r},413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),i=l(n(61)),u=l(n(57)),a=l(n(110));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f,p,d,h=[].indexOf;p=r.Radio.channel("global"),d=r.Radio.channel("site-nav"),f=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"before",value:function(){var e,t,n,o,r,i,l;if(l=p.request("main:app:decode-auth-token"),t=!1,r=this.getOption("permittedGroups")||["admin"],!(0,a.default)(l))for(n=0,o=(i=l.groups).length;n<o;n++)e=i[n],h.call(r,e)>=0&&(t=!0);if(!t)return(0,u.default)("#"),p.request("main:app:show-login")}},{key:"onRoute",value:function(){var e;return e=this.getOption("navbarEntries")||"admin",d.request("set-"+e+"-entries")}}]),t}(i.default),t.default=f},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteModel=t.FrontMatterPageable=t.FrontMatterCollection=t.FrontMatterModel=void 0;var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=v(n(0)),f=n(1),p=v(n(676)),d=v(n(606)),h=n(414),y=v(n(105));function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r=f.Radio.channel("global"),o=f.Radio.channel("pmc"),u=r.request("main:app:dbConn","common"),i=new h.LoveStore(u,"PMCFrontMatter"),l=["id","content"];var m=t.FrontMatterModel=function(){var e=function(e){function t(){return b(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),c(t,[{key:"toJSON",value:function(){var e,t=this;return e={},l.forEach((function(n){return e[n]=t.get(n)})),e}},{key:"hasOAIcontent",value:function(){var e;return e=this.get("content"),s.default.has(e,"OAI-PMH")}},{key:"getPMH",value:function(){return this.get("content")["OAI-PMH"]}},{key:"getFront",value:function(){var e;return(null!=(e=this.getPMH())?e.error:void 0)?(console.log("ERROR IN",this.id),{}):e.GetRecord.record.metadata.article.front}}]),t}(f.Model);return e.prototype.loveStore=i,e}.call(void 0),g=t.FrontMatterCollection=function(){var e=function(e){function t(){return b(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),t}(f.Collection);return e.prototype.loveStore=i,e.prototype.model=m,e}.call(void 0),O=t.FrontMatterPageable=function(){var e=function(e){function t(){return b(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),t}(y.default);return e.prototype.loveStore=i,e.prototype.model=m,e.prototype.mode="client",e}.call(void 0);a=new g,o.reply("get-fm-collection",(function(){return a})),o.reply("make-fm-pageable",(function(){return new O}));var j=t.RemoteModel=function(e){function t(){return b(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),c(t,[{key:"url",value:function(){var e,t;return e={verb:"GetRecord",identifier:function(e){return"oai:pubmedcentral.nih.gov:"+e}(this.id),metadataPrefix:"pmc_fm"},t="https://www.ncbi.nlm.nih.gov/pmc/oai/oai.cgi?"+p.default.stringify(e),"https://cors-anywhere.herokuapp.com/","https://cors-anywhere.herokuapp.com/"+t}},{key:"parse",value:function(e){var t;return t=(new d.default).xml2js(e),t=JSON.parse(JSON.stringify(t)),{id:this.get("id"),content:t}}},{key:"fetch",value:function(e){return e=s.default.extend(e||{},{dataType:"text"}),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}},{key:"hasOAIcontent",value:function(){var e;return e=this.get("content"),s.default.has(e,"OAI-PMH")}}]),t}(f.Model);o.reply("make-remote-model",(function(e){return new j({id:e})})),o.reply("save-fm-content",(function(e,t){var n,o;return n=new m({id:e,content:t}),o=!0,n.isNew=function(){return!!o&&(o=!1,!0)},a.add(n),n.save()}))},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),s=n(3),f=n(104),p=(o=f)&&o.__esModule?o:{default:o};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i=c.Radio.channel("global"),a=p.default.eventIndex,u=new c.Collection([]),r=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"initialize",value:function(){this.collections={categories:new c.Collection([]),topics:new c.Collection([])},this.currentEvents=[],this.currentTopicEvents={}}},{key:"setCollection",value:function(e,t){this.collections[e].set(t)}},{key:"initCategories",value:function(){var e;for(e in a.get("categories"))this.collections.categories.add({name:e,selected:!1})}},{key:"initTopics",value:function(){var e,t;for(e in t=a.get("topics"))this.collections.topics.add({name:e,selected:!1,topics:t[e]})}},{key:"initAll",value:function(){this.collections.categories.length||this.initCategories(),this.collections.topics.length||this.initTopics()}},{key:"fetchEventModels",value:function(){var e,t,n;return t=this.collections.categories.filter({selected:!0}),n=a.get("categories"),e=[],t.forEach((function(t){var o,r,a;if(o=t.get("name"),null==(t=u.get(o)))return a=n[o].filename,r=i.request("main:app:get-events",a),e.push(r.fetch()),u.add({id:o,name:o,content:r})})),e}},{key:"getSubtopicEvents",value:function(e){var t,n,o;return t=e.get("name"),o=e.get("topics"),n={},o.forEach((function(o){var r;return r=(e=u.get(o)).get("content"),n[o]=r.getSubtopicEvents(t)})),n}},{key:"getTopicEvents",value:function(e){var t,n;return t=a.get("topics")[e],n=new c.Collection,t.forEach((function(t){var o;return u.get(t),o=u.get(t).get("content").getSubtopicEvents(e),n.add(o)})),n}},{key:"getManyTopicEvents",value:function(e){var t;return t={},e.forEach((function(e){return t[e]=new c.Collection,a.get("topics")[e].forEach((function(n){var o,r;return u.get(n),o=u.get(n).get("content"),console.log("eventModel",o),r=o.getSubtopicEvents(e),t[e].add(r)}))})),t}},{key:"setCurrentTopicEvents",value:function(){var e,t,n,o=this;return(t=this.currentEvents).length=0,e=this.getSelectedTopics(),this.currentTopicEvents={},n={},e.pluck("name").forEach((function(e){var r;return r=o.getTopicEvents(e),o.currentTopicEvents[e]=r,n[e]=r,r.each((function(e){return t.push(e.toJSON())}))})),n}},{key:"determineCategories",value:function(){var e,t,n;return e=new c.Collection([]),this.collections.topics.filter({selected:!0}).forEach((function(t){return t.get("topics").forEach((function(t){return e.add({id:t,name:t})}))})),this.collections.categories.length||this.initCategories(a),n=e.pluck("name"),t=this.collections.categories,n.forEach((function(e){return t.findWhere({name:e}).set("selected",!0)})),{promises:this.fetchEventModels(),allTopics:e,categories:e}}},{key:"setCurrentEvents",value:function(){var e,t=this;(e=this.currentEvents).length=0,this.collections.categories.filter({selected:!0}).forEach((function(n){return t.getEventData(n.get("name")).get("events").forEach((function(t){return e.push(t)}))}))}},{key:"clearCurrentEvents",value:function(){this.currentEvents.length=0}},{key:"getEventData",value:function(e){return u.get(e).get("content")}},{key:"getSelectedCategories",value:function(){return new c.Collection(this.collections.categories.filter({selected:!0}))}},{key:"getSelectedTopics",value:function(){return new c.Collection(this.collections.topics.filter({selected:!0}))}}]),t}(s.MnObject),t.default=r},605:function(e,t,n){var o=n(233),r=n(849);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};o(r,i);e.exports=r.locals||{}},665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.documents=void 0;var o,r,i,u,a,l,c,s,f=n(0),p=n(1),d=n(385),h=(o=d)&&o.__esModule?o:{default:o};function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}l=p.Radio.channel("global"),c="/api/dev/sitedocuments",i=l.request("main:app:AuthModel"),r=l.request("main:app:AuthCollection"),s={channelName:"resources"},u=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(i);return e.prototype.urlRoot=c,e}.call(void 0),a=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(r);return e.prototype.url=c,e.prototype.model=u,e}.call(void 0);t.documents=new h.default((0,f.extend)(s,{modelName:"document",modelClass:u,collectionClass:a}))},666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrontDoorMainView=t.ThemeSwitchView=void 0;var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=p(n(7)),l=n(1),c=n(3),s=p(n(6)),f=p(n(232));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r=l.Radio.channel("global"),console.warn("This needs to be updated or removed"),o=s.default.renderable((function(e){return s.default.article(".document-view.content",(function(){return s.default.div(".body",(function(){return s.default.raw((0,f.default)(e.content))}))}))})),i=["vanilla","cornsilk","BlanchedAlmond","DarkSeaGreen","LavenderBlush"];t.ThemeSwitchView=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),u(t,[{key:"events",value:function(){return{"click @ui.theme":"switch_theme"}}},{key:"templateContext",value:function(){return{ui:this.ui}}},{key:"switch_theme",value:function(e){var t;return t=(0,a.default)(e.target).html(),this.performSwitch(t)}},{key:"performSwitch",value:function(e){return console.log("performSwitch",e),r.request("main:app:set-theme",e),r.request("main:app:switch-theme",e)}}]),t}(c.View);return e.prototype.ui={stylesheet:"#main-stylesheet",theme:".theme"},e.prototype.template=s.default.renderable((function(){return s.default.div((function(){return i.forEach((function(e){return s.default.div(".theme.btn.btn-primary",e)}))}))})),e}.call(void 0),t.FrontDoorMainView=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(c.View);return e.prototype.template=o,e}.call(void 0)},669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=n(0);(o=l)&&o.__esModule;function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u=n(1).Radio.channel("global"),i=u.request("main:app:AuthModel"),r=u.request("main:app:AuthCollection"),a=function(e){var t,n,o;return o="/api/dev/dbadmin/models/"+e,n=function(){var t=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(i);return t.prototype.modelType=e,t.prototype.urlRoot=o,t}.call(this),t=function(){var e=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(r);return e.prototype.model=n,e.prototype.url=o,e}.call(this),{modelType:e,modelClass:n,collectionClass:t}},t.default=a},670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},l=p(n(671)),c=n(3),s=p(n(6)),f=p(n(232));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),u(t,[{key:"link",value:function(e,n,o){var r;return e.startsWith("#")||("."===(r=l.default.dirname(location.hash))&&(r="#frontdoor/view"),e.startsWith("http")||(e=l.default.join(r,e))),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"link",this).call(this,e,n,o)}}]),t}(f.default.Renderer),i=new r,o=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(c.View);return e.prototype.template=s.default.renderable((function(e){return s.default.article(".document-view.content",(function(){return s.default.div(".body",(function(){return s.default.raw((0,f.default)(e.content,{renderer:i}))}))}))})),e}.call(void 0),t.default=o},672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsView=t.ThemeSwitchView=t.FrontDoorMainView=void 0;var o,r,i,u,a,l,c,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},d=m(n(671)),h=m(n(7)),y=n(1),v=m(n(3)),b=m(n(6)),w=m(n(232)),_=m(n(236));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=y.Radio.channel("global"),u=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),f(t,[{key:"link",value:function(e,n,o){var r;return e.startsWith("#")||("."===(r=d.default.dirname(location.hash))&&(r="#frontdoor/view"),e.startsWith("http")||(e=d.default.join(r,e))),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"link",this).call(this,e,n,o)}}]),t}(w.default.Renderer),s=new u,o=b.default.renderable((function(e){return b.default.article(".document-view.content",(function(){return b.default.div(".body",(function(){return b.default.raw((0,w.default)(e.content,{renderer:s}))}))}))})),l=["vanilla","cornsilk","BlanchedAlmond","DarkSeaGreen","LavenderBlush"],t.ThemeSwitchView=c=function(){var e=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),f(t,[{key:"events",value:function(){return{"click @ui.theme":"switch_theme"}}},{key:"templateContext",value:function(){return{ui:this.ui}}},{key:"switch_theme",value:function(e){var t;return t=(0,h.default)(e.target).html(),this.performSwitch(t)}},{key:"performSwitch",value:function(e){return console.log("performSwitch",e),i.request("main:app:set-theme",e),i.request("main:app:switch-theme",e)}}]),t}(v.default.View);return e.prototype.ui={stylesheet:"#main-stylesheet",theme:".theme"},e.prototype.template=b.default.renderable((function(){return b.default.div((function(){return l.forEach((function(e){return b.default.div(".theme.btn.btn-primary",e)}))}))})),e}.call(void 0),t.FrontDoorMainView=r=function(){var e=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),t}(v.default.View);return e.prototype.template=o,e}.call(void 0),t.StatsView=a=function(){var e=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),t}(v.default.View);return e.prototype.template=b.default.renderable((function(){return b.default.div(".jsonview.listview-list-entry",{style:"overflow:auto"})})),e.prototype.behaviors={HasJsonView:{behaviorClass:_.default}},e}.call(void 0),t.FrontDoorMainView=r,t.ThemeSwitchView=c,t.StatsView=a},679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FMTopicModel=void 0;var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_=P(n(0)),m=n(1),g=n(414),O=P(n(105)),j=P(n(104));function P(e){return e&&e.__esModule?e:{default:e}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}y=j.default.eventIndex,l=m.Radio.channel("global"),o=m.Radio.channel("pmc"),h=l.request("main:app:dbConn","common"),d=new g.LoveStore(h,"Topics"),a=new g.LoveStore(h,"PMCTopics"),s=["id","name"],f=function(){var e=function(e){function t(){return k(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),w(t,[{key:"toJSON",value:function(){var e,t=this;return e={},s.forEach((function(n){return e[n]=t.get(n)})),e}}]),t}(m.Model);return e.prototype.loveStore=d,e}.call(void 0),c=function(){var e=function(e){function t(){return k(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),t}(m.Collection);return e.prototype.loveStore=d,e.prototype.model=f,e}.call(void 0),p=function(){var e=function(e){function t(){return k(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),t}(O.default);return e.prototype.loveStore=d,e.prototype.model=f,e.prototype.mode="client",e}.call(void 0),b=new c,o.reply("get-topic-collection",(function(){return b})),o.reply("make-topic-pageable",(function(){return new p})),b.fetch().done((function(){var e;return e=y.get("topics"),_.default.keys(e).forEach((function(e){if(null==b.find({name:e}))return console.log("get model for",e),b.add({name:e}).save()}))})),i=["pmcid","topic_id"];var M=t.FMTopicModel=function(){var e=function(e){function t(){return k(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),w(t,[{key:"toJSON",value:function(){var e,t=this;return e={},i.forEach((function(n){return e[n]=t.get(n)})),e}}]),t}(m.Model);return e.prototype.loveStore=a,e}.call(void 0);r=function(){var e=function(e){function t(){return k(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),t}(m.Collection);return e.prototype.loveStore=a,e.prototype.model=M,e}.call(void 0),u=function(){var e=function(e){function t(){return k(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),t}(O.default);return e.prototype.loveStore=a,e.prototype.model=M,e.prototype.mode="client",e}.call(void 0),v=new r,o.reply("get-fmtopic-collection",(function(){return v})),o.reply("make-fmtopic-pageable",(function(){return new u}))},803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=p(n(231)),s=p(n(413)),f=p(n(804));p(n(807));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=l.Radio.channel("site-nav"),u=[{label:"User Admin",menu:[{label:"List Users",url:"#useradmin/user/list",icon:".fa.fa-list"},{label:"Add New User",url:"#useradmin/user/add",icon:".fa.fa-plus"},{label:"Hubby Dbadmin",url:"#admin/dbadmin/hubby",icon:".fa.fa-database"}]}],r=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(s.default);return e.prototype.appRoutes={admin:"frontdoor","admin/view":"frontdoor","admin/login":"show_login","admin/logout":"show_logout","admin/dbadmin/hubby":"viewHubby"},e}.call(void 0),o=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),a(t,[{key:"onStart",value:function(){return i.request("set-admin-entries")}},{key:"onStop",value:function(){return console.log("(Child) Stopping admin",this.isRunning()),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStop",this).call(this)}}]),t}(c.default);return e.prototype.Controller=f.default,e.prototype.Router=r,e.prototype.appletEntries=u,e}.call(void 0),t.default=o},804:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},i=n(1),u=n(3),a=n(102),l=s(n(109)),c=s(n(57));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(665);var h,y,v,b,w,_,m,g=[].indexOf;y=i.Radio.channel("global"),v=i.Radio.channel("messages"),w=i.Radio.channel("resources"),m=n(6),b=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),o(t,[{key:"fetch",value:function(e){return(e=e||{}).dataType="text",r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}},{key:"parse",value:function(e){return{content:e}}}]),t}(i.Model);return e.prototype.url="/assets/documents/intro-admin.md",e}.call(void 0),_=m.renderable((function(){return m.div(".row",(function(){return m.div("#main-content")}))})),function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),o(t,[{key:"regions",value:function(){return{content:new l.default({el:"#main-content",speed:"slow"})}}},{key:"onBeforeDestroy",value:function(e){0}}]),t}(u.View);return e.prototype.template=_,e}.call(void 0),h=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),o(t,[{key:"setupLayoutIfNeeded",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),this.layout.controller=this}},{key:"_view_resource",value:function(e){var t;return this.setupLayoutIfNeeded(),t=new(0,n(666).FrontDoorMainView)({model:e}),this.layout.showChildView("content",t)}},{key:"_view_login",value:function(){var e;return e=new(n(805)),this.layout.showChildView("content",e)}},{key:"_view_upload",value:function(){var e=this;return Promise.all([n.e(20),n.e(50)]).then(function(){var t;return t=new(0,n(907).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"upload_view",value:function(){return this.setupLayoutIfNeeded(),this._view_upload()}},{key:"view_page",value:function(e){var t,n,o=this;return(n=(t=w.request("get-document",e)).fetch()).done((function(){return t.get("content")||t.set("content","# Need a front page."),o._view_resource(t)})),n.fail((function(){return v.request("danger","Failed to get document")}))}},{key:"frontdoor_needuser",value:function(){var e;return e=y.request("main:app:decode-auth-token"),g.call(Object.keys(e),"name")>=0?this.frontdoor_hasuser(e):this.show_login()}},{key:"show_login",value:function(){return this.setupLayoutIfNeeded(),this._view_login()}},{key:"show_logout",value:function(){return y.request("main:app:destroy-auth-token"),(0,c.default)("/")}},{key:"frontdoor_hasuser",value:function(e){return this.default_view()}},{key:"view_readme",value:function(){var e,t,n=this;return console.log("view_readme",this),this.setupLayoutIfNeeded(),(t=(e=new b).fetch()).done((function(){return n._view_resource(e)})),t.fail((function(){return v.request("warning","failed to get readme")}))}},{key:"default_view",value:function(){return this.setupLayoutIfNeeded(),this.view_readme()}},{key:"frontdoor",value:function(){var e;return(null!=(e=y.request("main:app:config"))?e.needLogin:void 0)?this.frontdoor_needuser():this.default_view()}},{key:"start",value:function(){return this.frontdoor()}},{key:"themeSwitcher",value:function(){var e;return this.setupLayoutIfNeeded(),e=new(0,n(666).ThemeSwitchView),this.layout.showChildView("content",e),console.log("themeSwitcher")}},{key:"viewHubby",value:function(){var e;return this.setupLayoutIfNeeded(),e=new(n(806)),this.layout.showChildView("content",e)}}]),t}(a.MainController),t.default=h},805:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,w,_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o=n(7),r=n(1),s=n(3),b=n(6),y=n(60).default,v=n(57).default;var j=n(59);d=j.form_group_input_div,u=n(58).default,l=r.Radio.channel("global"),f=r.Radio.channel("messages"),h=b.renderable((function(e){return d({input_id:"input_username",label:"User Name",input_attributes:{name:"username",placeholder:"User Name"}}),d({input_id:"input_password",label:"Password",input_attributes:{name:"password",type:"password",placeholder:"Type your password here...."}}),b.input(".btn.btn-primary",{type:"submit",value:"login"}),b.div(".spinner.fa.fa-spinner.fa-spin")})),i=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),_(t,[{key:"ui",value:function(){return y(this.fieldList)}},{key:"createModel",value:function(){return new r.Model}},{key:"onSuccess",value:function(){return v("/admin")}}]),t}(u),a=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),_(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("username",this.ui.username.val()),this.model.set("password",this.ui.password.val())}},{key:"saveModel",value:function(){var e,t,n,r=this;return t=this.model.get("username"),e=this.model.get("password"),n=o.ajax({url:"/login",type:"POST",data:{username:t,password:e},dataType:"json",success:function(e){var t;return t=e.token,l.request("main:app:set-auth-token",t),r.trigger("save:form:success",r.model)},error:function(e){var t;return t=e.responseJSON,f.request("danger",t.message),r.trigger("save:form:failure",r.model)}}),console.log("returning xhr",n)}}]),t}(i);return e.prototype.template=h,e.prototype.fieldList=["username","password"],e}.call(void 0),w=b.renderable((function(e){return d({input_id:"input_token",label:"Auth Token",input_attributes:{name:"token",placeholder:"xxxxxxxxxxxxxxx"}}),b.input(".btn.btn-primary",{type:"submit",value:"login"}),b.div(".spinner.fa.fa-spinner.fa-spin")})),p=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),_(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("token",this.ui.token.val())}},{key:"saveModel",value:function(){var e,t,n=this;return t=this.model.get("token"),l.request("main:app:set-auth-token",t),(e=(new(l.request("main:app:AuthRefresh"))).fetch()).fail((function(){return n.trigger("save:form:failure",n.model)})),e.done((function(){return n.trigger("save:form:success",n.model)}))}}]),t}(i);return e.prototype.template=w,e.prototype.fieldList=["token"],e}.call(void 0),c=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),_(t,[{key:"onRender",value:function(){return this.showChildView("login",new a),this.showChildView("token",new p)}}]),t}(s.View);return e.prototype.template=b.renderable((function(e){return b.div("#login-form"),b.div("#token-form")})),e.prototype.regions={login:"#login-form",token:"#token-form"},e}.call(void 0),e.exports=c},806:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,l,c,s,f,p,d,h,y,v,b,w,_,m=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};n(7),l=n(1),h=n(3),_=n(6),n(232),f=n(581),b=n(667),d=l.Radio.channel("global"),y=l.Radio.channel("messages"),a=d.request("main:app:AuthModel"),d.request("main:app:AuthCollection"),v=function(){var e=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(a);return e.prototype.url="/rest/v0/main/hubby/dbadmin/testme",e}.call(void 0),s=function(){var e=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(a);return e.prototype.url="/rest/v0/main/hubby/dbadmin/delete-all",e}.call(void 0),c=function(){var e=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(a);return e.prototype.url="/rest/v0/main/hubby/dbadmin/testme",e}.call(void 0),w=_.renderable((function(e){return _.div(".dropzone.card",(function(){return _.div(".card-header",(function(){return _.text("drop a dump of meetings to upload")})),_.div(".card-body",(function(){return _.div(".parse-btn.btn.btn-primary",{style:"display:none"},(function(){return _.text("upload dropped meetings")})),_.input(".file-input.input",{type:"file"}),_.span(".parse-chosen-btn.btn.btn-primary",{style:"display:none"},(function(){return _.text("Parse dropped meetings")}))}))}))})),p=function(){var e=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.successfulParse=e.successfulParse.bind(e),e.fileReaderOnLoad=e.fileReaderOnLoad.bind(e),e}return u(t,e),o(t,[{key:"deleteBtnClicked",value:function(){var e;return console.log("deleteBtnClicked"),(e=new s).fetch().done((function(){return y.request("success",e.get("result"))}))}},{key:"fileInputClicked",value:function(e){return console.log("file_input_clicked",e),this.ui.fileInput.val(null),this.ui.chosenBtn.hide()}},{key:"fileInputChanged",value:function(e){return console.log("file_input_changed",e),this.ui.chosenBtn.show()}},{key:"handleDrop",value:function(e){var t;return e.preventDefault(),this.ui.dropzone.css("border","0px"),t=e.originalEvent.dataTransfer.files[0],this.ui.statusMsg.text("File: "+t.name),this.droppedFile=t,this.ui.parseBtn.show()}},{key:"handleDragOver",value:function(e){return e.preventDefault(),e.stopPropagation()}},{key:"handleDragEnter",value:function(e){return e.stopPropagation(),e.preventDefault(),this.ui.dropzone.css("border","2px dotted")}},{key:"successfulParse",value:function(){return m(this,t),this.ui.statusMsg.text("Parse Successful"),y.request("success","successfulParse")}},{key:"fileReaderOnLoad",value:function(e){var n,o,r,i,u=this;return m(this,t),n=e.target.result,o=e.target.fileObject.name,this.ui.statusMsg.text("Retrieved file content of "+o),i=(r=new v({content:btoa(n)})).save(),this.ui.statusMsg.text("Uploaded "+o+"."),i.fail((function(){return y.request("warning","failed to save model")})),i.done((function(){var e;return console.log("MODEL",r),e=r.get("data"),r.get("output"),y.request("success","Finished import year "+e.year),u.ui.statusMsg.text("Finished import year "+e.year)}))}},{key:"readFile",value:function(e){var t;return(t=new FileReader).onload=this.fileReaderOnLoad,t.fileObject=e,t.readAsBinaryString(e)}},{key:"handleChosenFile",value:function(){var e,t;return t=this.ui.fileInput.val(),this.ui.statusMsg.text("Reading chosen file...("+t+")"),e=this.ui.fileInput[0].files[0],this.ui.parseBtn.hide(),this.readFile(e)}},{key:"handleDroppedFile",value:function(){return this.ui.statusMsg.text("Reading dropped file... ("+this.droppedFile.name+")"),this.ui.parseBtn.hide(),this.readFile(this.droppedFile)}},{key:"exportBtnClicked",value:function(){var e;return this.ui.statusMsg.text("Exporting database..."),(e=new c).fetch().done((function(){var t,n;return n={filename:"dbdump.json.xz",type:"application/octet-stream",data:e.get("content")},console.log("content",n.data),t=b(n.data,n.type),console.log("BLOB",t),f.saveAs(t,n.filename),y.request("primary","Exported database...."),console.log("exported",e)}))}}]),t}(h.View);return e.prototype.template=_.renderable((function(e){return _.div(".listview-header","Hubby Dbadmin"),_.button(".delete-btn.btn.btn-danger","Delete"),_.button(".export-btn.btn.btn-info","Export"),w(e)})),e.prototype.ui={header:".listview-header",deleteBtn:".delete-btn",fileInput:".file-input",parseBtn:".parse-btn",chosenBtn:".parse-chosen-btn",exportBtn:".export-btn",dropzone:".dropzone",statusMsg:".card-header"},e.prototype.events={"dragover @ui.dropzone":"handleDragOver","dragenter @ui.dropzone":"handleDragEnter","drop @ui.dropzone":"handleDrop","click @ui.fileInput":"fileInputClicked","change @ui.fileInput":"fileInputChanged","click @ui.parseBtn":"handleDroppedFile","click @ui.chosenBtn":"handleChosenFile","click @ui.deleteBtn":"deleteBtnClicked","click @ui.exportBtn":"exportBtnClicked"},e}.call(void 0),e.exports=p},807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});u(n(3));var o,r=u(n(808)),i=u(n(413));function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o=function(){var e=function(e){function t(){return a(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default);return e.prototype.appRoutes={"admin/useradmin":"listUsers","admin/user/list":"listUsers","admin/user/add":"addNewUser","admin/user/view/:id":"viewUser","admin/user/edit/:id":"editUser"},e}.call(void 0),t.default={router:o,controller:r.default}},808:function(e,t,n){"use strict";var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(7),o=n(1),n(3),n(6),n(40),n(102).ExtraController,u=o.Radio.channel("global"),i=u.request("crud:Controller"),r=function(){var e=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"initialize",value:function(e){this.applet=u.request("main:applet:get-applet","adminpanel"),this.mainController=this.applet.router.controller}},{key:"listUsers",value:function(){var e=this;n.e(98).then(function(){var t;return t=n(911),e.listItems(t)}.bind(null,n)).catch(n.oe)}},{key:"viewUser",value:function(e){var t=this;n.e(99).then(function(){var o;return o=n(912),t.viewItem(o,e)}.bind(null,n)).catch(n.oe)}},{key:"addNewUser",value:function(){var e;e=u.request("crud:view:new-item"),this.addItem(e)}},{key:"editUser",value:function(e){var t;t=u.request("crud:view:edit-item"),this.editItem(t,e)}}]),t}(i);return e.prototype.defaultColumns=["id","username","fullname"],e.prototype.viewOptions={fieldList:["username","fullname","email"],entryField:"fullname",modelName:"user",label:"user",routeName:"admin"},e.prototype.channelName="useradmin",e}.call(void 0),e.exports=r},809:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(810),i=(o=r)&&o.__esModule?o:{default:o};t.default=i.default},825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=n(0),a=s(n(231)),l=s(n(413)),c=s(n(826));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=[{label:"Main",url:"#company",icon:".fa.fa-star"},{label:"Add Workers",url:"#company/potential-workers",icon:".fa.fa-plus"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(l.default);return e.prototype.channelName="company",e.prototype.permittedGroups=["admin","boss","worker"],e.prototype.navbarEntries="index",e.prototype.appRoutes={company:"viewIndex","company/boss/add":"addBoss","company/boss/list":"viewIndex","company/company/list":"listCompanies","company/company/view/:id":"viewCompany","company/company/add":"addCompany","company/worker":"workerIndex","company/session/view/:id":"viewWorkSession"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(a.default);return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,u.capitalize)("company")+" Menu",menu:i}],e}.call(void 0),t.default=o},826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=n(102),s=n(103);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(827),i=l.Radio.channel("global"),u=l.Radio.channel("messages"),o=l.Radio.channel("company"),r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(32).then(function(){var t;return t=new(0,n(922).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"addBoss",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(29).then(function(){var t;return t=new(0,n(924).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"addCompany",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(30).then(function(){var t;return t=new(0,n(925).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"listCompanies",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(33).then(function(){var t,o,r;return t=e.getChannel().request("db:company:collection"),r=new(0,n(927).default)({collection:t}),e.layout.showChildView("content",r),(o=t.fetch()).done((function(){return console.log("models fetched",t)})),o.fail((function(){return u.request("xhr-error",o)}))}.bind(null,n)).catch(n.oe)}},{key:"viewCompany",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(34).then(function(){var r,i,a;return r=n(928).default,i=o.request("db:company:get",e),(a=i.fetch()).done((function(){var e;return e=new r({model:i}),t.layout.showChildView("content",e)})),a.fail((function(){return u.request("xhr-error",a)}))}.bind(null,n)).catch(n.oe)}},{key:"workerIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(0),n.e(2),n.e(5),n.e(104),n.e(36)]).then(function(){var t,r,u;return t=n(930).default,r=i.request("main:app:decode-auth-token"),u=new t({model:o.request("db:worker:get",r.uid)}),e.layout.showChildView("content",u)}.bind(null,n)).catch(n.oe)}},{key:"viewCalendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(5),n.e(31)]).then(function(){var t;return t=new(0,n(940).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewWorkSession",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(5),n.e(35)]).then(function(){var r,i,a;return r=n(941).default,a=o.request("db:worksession:get",e),(i=a.fetch()).fail((function(){return u.request("xhr-error",i)})),i.done((function(){var e;return e=new r({model:a}),t.layout.showChildView("content",e)}))}.bind(null,n)).catch(n.oe)}}]),t}(c.MainController);return e.prototype.channelName="company",e.prototype.layoutClass=s.ToolbarAppletLayout,e}.call(void 0),t.default=r},827:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,w,_,m=n(0),g=n(1),O=j(n(385));j(n(107));function j(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s=g.Radio.channel("global"),o=g.Radio.channel("company"),b="/api/dev/company",i=s.request("main:app:AuthModel"),r=s.request("main:app:AuthCollection"),w={},_={channelName:"company"},u=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(i);return e.prototype.urlRoot="/api/dev/company/boss",e.prototype.validation={name:{minLength:2,required:!0}},e}.call(void 0),a=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(r);return e.prototype.model=u,e.prototype.url="/api/dev/company/boss",e}.call(void 0),w.boss=new O.default((0,m.extend)(_,{modelName:"boss",modelClass:u,collectionClass:a})),l=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(i);return e.prototype.urlRoot="/api/dev/company/company",e.prototype.validation={name:{required:!0}},e}.call(void 0),c=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(r);return e.prototype.model=l,e.prototype.url="/api/dev/company/company",e}.call(void 0),w.company=new O.default((0,m.extend)(_,{modelName:"company",modelClass:l,collectionClass:c})),y=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(i);return e.prototype.urlRoot="/api/dev/company/worker",e}.call(void 0),v=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(r);return e.prototype.model=y,e.prototype.url="/api/dev/company/worker",e}.call(void 0),w.worker=new O.default((0,m.extend)(_,{modelName:"worker",modelClass:y,collectionClass:v})),d=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(i);return e.prototype.urlRoot="/api/dev/company/worksession",e}.call(void 0),h=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(r);return e.prototype.model=d,e.prototype.url="/api/dev/company/worksession",e}.call(void 0),w.workSession=new O.default((0,m.extend)(_,{modelName:"worksession",modelClass:d,collectionClass:h})),f=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(r);return e.prototype.url=b+"/potential-workers",e}.call(void 0),o.reply("get-potential-workers",(function(){return new f})),p=function(){var e=function(e){function t(){return P(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),t}(i);return e.prototype.urlRoot="/api/dev/company/time-clock",e}.call(void 0),o.reply("TimeClock",(function(){return p}))},828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=c(n(61)),a=c(n(231)),l=c(n(829));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=[{label:"Main",url:"#crown",icon:".fa.fa-star"},{label:"CoH Calendar",url:"#crown/calendar/coh",icon:".fa.fa-calendar"},{label:"Events",url:"#crown/events",icon:".fa.fa-calendar"},{label:"Subtopics",url:"#crown/topics",icon:".fa.fa-globe"}],r=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),t}(u.default);return e.prototype.channelName="crown",e.prototype.appRoutes={crown:"viewIndex","crown/rss":"viewRSS","crown/calendar/coh":"viewCoHCalendar","crown/calendar/news":"viewNewsCalendar","crown/events":"viewEvents","crown/topics":"viewTopics"},e}.call(void 0),o=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),t}(a.default);return e.prototype.Controller=l.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:"App Menu",menu:i}],e}.call(void 0),t.default=o},829:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),f=(n(830),n(102)),p=n(103),d=y(n(104)),h=y(n(603));function y(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(831),i=s.Radio.channel("global"),o=s.Radio.channel("crown"),a=d.default.eventIndex,u=d.default.cvlinks,l={events:new h.default,topics:new h.default},o.reply("get-event-manager",(function(e){return l[e]})),r=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(41).then(function(){var t;return t=new(0,n(942).default)({model:u}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewRSS",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(0),n.e(43)]).then(function(){var t;return t=new(0,n(943).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewCoHCalendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(40)]).then(function(){var t,o;return o=i.request("main:app:get-events","coh-orders"),t=n(944).default,o.fetch().done((function(){var n;return n=new t({model:o}),e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}},{key:"viewNewsCalendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(42)]).then(function(){var t;return t=new(0,n(945).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewEvents",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(4),n.e(17),n.e(9)]).then(function(){var t;return t=new(0,n(682).default)({model:a}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewTopics",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(4),n.e(17),n.e(9)]).then(function(){var t;return t=new(0,n(682).default)({model:a}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}(f.MainController);return e.prototype.channelName="crown",e.prototype.layoutClass=p.ToolbarAppletLayout,e}.call(void 0),t.default=r},831:function(e,t,n){"use strict";var o,r=n(1),i=n(104),u=(o=i)&&o.__esModule?o:{default:o};r.Radio.channel("crown").reply("get-index-model",(function(e){return u.default[e]}))},832:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=n(0),a=s(n(231)),l=s(n(833)),c=s(n(413));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=[{label:"Main",url:"#dbadmin",icon:".fa.fa-star"},{label:"List Models",url:"#dbadmin/models",icon:".fa.fa-list"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(c.default);return e.prototype.channelName="dbadmin",e.prototype.appRoutes={dbadmin:"viewIndex","dbadmin/models":"listModelTypes","dbadmin/models/:modelType":"listModels"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(a.default);return e.prototype.Controller=l.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,u.capitalize)("dbadmin")+" Menu",menu:i}],e}.call(void 0),t.default=o},833:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),f=n(102),p=n(103),d=n(669),h=(o=d)&&o.__esModule?o:{default:o};function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u=s.Radio.channel("global"),a=s.Radio.channel("messages"),r=u.request("main:app:AuthCollection"),l=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(r);return e.prototype.url="/api/dev/dbadmin/list-models",e}.call(void 0),i=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),c(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(8),n.e(107),n.e(44)]).then(function(){var t;return t=new(0,n(948).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"listModelTypes",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(45).then(function(){var t;return t=n(1034).default,e.collection.fetch().done((function(){var n;return n=new t({collection:e.collection}),e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}},{key:"listModels",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(46).then(function(){var o,r,i,u;return o=n(1035).default,r=(0,h.default)(e),i=new r.collectionClass,(u=i.fetch()).fail((function(){return a.request("xhr-error",u)})),u.done((function(){var e;return i.forEach((function(e){var t;return t=e.toJSON(),(0,h.default)(t.name)})),e=new o({collection:i}),t.layout.showChildView("content",e)}))}.bind(null,n)).catch(n.oe)}}]),t}(f.MainController);return e.prototype.layoutClass=p.ToolbarAppletLayout,e.prototype.collection=new l,e}.call(void 0),t.default=i},834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(231)),r=c(n(413));n(665);var i,u,a,l=c(n(835));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=[{button:"#list-button",label:"List",url:"#dbdocs/documents",icon:".fa.fa-list"},{label:"Add New Document",url:"#dbdocs/documents/new",icon:".fa.fa-plus"}],u=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),t}(r.default);return e.prototype.appRoutes={dbdocs:"list_pages","dbdocs/documents":"list_pages","dbdocs/documents/new":"new_page","dbdocs/documents/view/:id":"view_page","dbdocs/documents/edit/:id":"edit_page"},e}.call(void 0),i=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),t}(o.default);return e.prototype.Controller=l.default,e.prototype.Router=u,e.prototype.appletEntries=[{label:"Site Doc Menu",menu:a}],e}.call(void 0),t.default=i},835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=n(1),p=n(102),d=n(604),h=(o=d)&&o.__esModule?o:{default:o},y=n(103);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}u=f.Radio.channel("messages"),a=f.Radio.channel("resources"),r=f.Radio.channel("dbdocs"),l=[],c=new f.Collection(l),r.reply("get-toolbar-entries",(function(){return c})),i=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new h.default({collection:c}),this.layout.showChildView("toolbar",e)}},{key:"list_pages",value:function(){var e=this;return this.setupLayoutIfNeeded(),console.log("List Pages"),n.e(48).then(function(){var t,o,r;return t=n(1036).default,r=new t({collection:e.collection}),(o=e.collection.fetch()).done((function(){return e.layout.showChildView("content",r)})),o.fail((function(){return u.request("danger","Failed to load documents.")}))}.bind(null,n)).catch(n.oe)}},{key:"edit_page",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(18),n.e(10)]).then(function(){var o,r;return o=n(748).EditPageView,r=a.request("db:document:get",e),t._loadView(o,r)}.bind(null,n)).catch(n.oe)}},{key:"view_page",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(47).then(function(){var o,r;return o=n(1043).default,r=a.request("db:document:get",e),t._loadView(o,r)}.bind(null,n)).catch(n.oe)}},{key:"new_page",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(18),n.e(10)]).then(function(){var t;return t=new(0,n(748).NewPageView),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}(p.MainController);return e.prototype.layoutClass=y.ToolbarAppletLayout,e.prototype.collection=a.request("db:document:collection"),e}.call(void 0),t.default=i},836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=n(1),c=p(n(231)),s=n(0),f=p(n(837));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=l.Radio.channel("global"),o=i.request("main:app:IndexRouter"),a=[{label:"Main",url:"#eliza",icon:".fa.fa-terminal.text-light.bg-dark"}],u=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(o);return e.prototype.channelName="eliza",e.prototype.appRoutes={eliza:"viewIndex"},e}.call(void 0),r=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(c.default);return e.prototype.Controller=f.default,e.prototype.Router=u,e.prototype.appletEntries=[{label:(0,s.capitalize)("eliza")+" Menu",menu:a}],e}.call(void 0),t.default=r},837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(102),u=n(103);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o=function(){var e=function(e){function t(){return a(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(19),n.e(49)]).then(function(){var t;return t=new(0,n(1044).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}(i.MainController);return e.prototype.layoutClass=u.ToolbarAppletLayout,e}.call(void 0),t.default=o},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),s=p(n(231)),f=p(n(839));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=c.Radio.channel("global"),o=i.request("main:app:IndexRouter"),a=[{id:"company",label:"Company",url:"#company",icon:".fa.fa-users"},{id:"places",label:"Places",url:"#places",icon:".fa.fa-globe"},{id:"todos",label:"Todo List",url:"#todos",icon:".fa.fa-list"},{id:"sunny",label:"Sunny",url:"#sunny",icon:".fa.fa-sun-o"}],u=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(o);return e.prototype.channelName="frontdoor",e.prototype.appRoutes={"":"frontdoor",frontdoor:"frontdoor","frontdoor/view":"frontdoor","frontdoor/view/*name":"viewPage","frontdoor/login":"showLogin","frontdoor/logout":"showLogout",login:"showLogin",logout:"showLogout","pages/:name":"viewPage"},e}.call(void 0),r=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),l(t,[{key:"onStop",value:function(){return console.log("(Child) Stopping frontdoor",this.isRunning()),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStop",this).call(this)}}]),t}(s.default);return e.prototype.Controller=f.default,e.prototype.Router=u,e.prototype.appletEntries=[{label:"Main Menu",menu:a}],e}.call(void 0),t.default=r},839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssetCollection=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},i=n(1),u=h(n(6)),a=n(102),l=h(n(109)),c=n(103),s=h(n(840)),f=h(n(670)),p=n(841),d=h(n(603));function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w,_,m,g,O,j,P,k,C,E,M=[].indexOf;O=i.Radio.channel("global"),j=i.Radio.channel("messages"),k=i.Radio.channel("site-nav"),w=i.Radio.channel("frontdoor"),C=new d.default,w.reply("get-event-manager",(function(){return C})),(E=new p.ConfigObjectModel).fetch().then((function(){return O.reply("get-topic-colors",(function(){return E})),(0,p.updateTopicColors)()})),_=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),o(t,[{key:"fetch",value:function(e){return(e=e||{}).dataType="text",r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}},{key:"parse",value:function(e){return{content:e}}}]),t}(i.Model);t.AssetCollection=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(i.Collection);return e.prototype.urlRoot="/assets/documents",e}.call(void 0);P=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(_);return e.prototype.url="/assets/documents/intro.md",e}.call(void 0),g=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),o(t,[{key:"regions",value:function(){return{content:new l.default({el:"#main-content",speed:"slow"})}}}]),t}(c.BaseAppletLayout);return e.prototype.template=u.default.renderable((function(){return u.default.div(".row",(function(){return u.default.div("#main-content")}))})),e}.call(void 0),m=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),o(t,[{key:"setupLayoutIfNeeded",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),this.layout.controller=this}},{key:"_viewResource",value:function(e){var t;return this.setupLayoutIfNeeded(),t=new f.default({model:e}),this.layout.showChildView("content",t)}},{key:"_viewLogin",value:function(){var e;return e=new s.default,this.layout.showChildView("content",e)}},{key:"frontdoor_needuser",value:function(){var e;return e=O.request("main:app:decode-auth-token"),M.call(Object.keys(e),"name")>=0?this.frontdoor_hasuser(e):this.show_login()}},{key:"showLogin",value:function(){return this.setupLayoutIfNeeded(),this._viewLogin()}},{key:"showLogout",value:function(){return O.request("main:app:destroy-auth-token"),k.request("set-index-entries"),i.history.navigate("#",{trigger:!0})}},{key:"frontdoor_hasuser",value:function(){return this.defaultView()}},{key:"view_readme",value:function(){var e,t,n=this;return this.setupLayoutIfNeeded(),(t=(e=new P).fetch()).done((function(){return n._viewResource(e)})),t.fail((function(){return j.request("warning","failed to get readme")}))}},{key:"viewPage",value:function(e){var t,n,o=this;return this.setupLayoutIfNeeded(),(n=(t=O.request("main:app:get-document",e)).fetch()).done((function(){return o._viewResource(t)})),n.fail((function(){return j.request("warning","failed to get "+e)}))}},{key:"defaultView",value:function(){return this.setupLayoutIfNeeded(),this.view_readme()}},{key:"frontdoor",value:function(){var e;return(null!=(e=O.request("main:app:config"))?e.needLogin:void 0)?this.frontdoor_needuser():this.defaultView()}}]),t}(a.MainController);return e.prototype.layoutClass=g,e}.call(void 0),t.default=m},840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=w(n(7)),f=n(1),p=n(3),d=w(n(6)),h=w(n(60)),y=w(n(57)),v=n(59),b=w(n(58));function w(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=f.Radio.channel("global"),a=f.Radio.channel("messages"),o=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),c(t,[{key:"ui",value:function(){return(0,h.default)(this.fieldList)}},{key:"createModel",value:function(){return new f.Model}},{key:"onSuccess",value:function(){return(0,y.default)("#")}}]),t}(b.default),r=function(){var e=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),c(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("username",this.ui.username.val()),this.model.set("password",this.ui.password.val())}},{key:"saveModel",value:function(){var e,t,n,o=this;return t=this.model.get("username"),e=this.model.get("password"),n=s.default.ajax({url:"/login",type:"POST",data:{username:t,password:e},dataType:"json",success:function(e){var t;return t=e.token,i.request("main:app:set-auth-token",t),o.trigger("save:form:success",o.model)},error:function(e){var t;return t=e.responseJSON,a.request("danger",t.message),o.trigger("save:form:failure",o.model)}}),console.log("returning xhr",n)}}]),t}(o);return e.prototype.template=d.default.renderable((function(){return(0,v.form_group_input_div)({input_id:"input_username",label:"User Name",input_attributes:{name:"username",placeholder:"User Name"}}),(0,v.form_group_input_div)({input_id:"input_password",label:"Password",input_attributes:{name:"password",type:"password"},placeholder:"Type your password here...."}),d.default.input(".btn.btn-primary",{type:"submit",value:"login"}),d.default.div(".spinner.fa.fa-spinner.fa-spin")})),e.prototype.fieldList=["username","password"],e}.call(void 0),l=function(){var e=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),c(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("token",this.ui.token.val())}},{key:"saveModel",value:function(){var e,t,n,o=this;return n=this.model.get("token"),i.request("main:app:set-auth-token",n),e=new(i.request("main:app:AuthRefresh")),(t=e.fetch()).fail((function(){var e;return e=t.responseJSON,a.request("danger",e.message),o.trigger("save:form:failure",o.model)})),t.done((function(){return o.trigger("save:form:success",o.model)}))}}]),t}(o);return e.prototype.template=d.default.renderable((function(){return(0,v.form_group_input_div)({input_id:"input_token",label:"Auth Token",input_attributes:{name:"token",placeholder:"xxxxxxxxxxxxxxx"}}),d.default.input(".btn.btn-primary",{type:"submit",value:"login"}),d.default.div(".spinner.fa.fa-spinner.fa-spin")})),e.prototype.fieldList=["token"],e}.call(void 0),u=function(){var e=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),c(t,[{key:"onRender",value:function(){return this.showChildView("login",new r),this.showChildView("token",new l)}}]),t}(p.View);return e.prototype.template=d.default.renderable((function(){return d.default.div("#login-form"),d.default.div("#token-form")})),e.prototype.regions={login:"#login-form",token:"#token-form"},e}.call(void 0),t.default=u},841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTopicColors=t.initTopicColors=t.ConfigObjectCollection=t.ConfigObjectModel=void 0;var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=p(n(0)),c=n(1),s=n(414),f=p(n(104));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=c.Radio.channel("global").request("main:app:dbConn","common"),r=new s.LoveStore(i,"ConfigObject"),u=f.default.eventIndex,o=["id","name","content"];var v=t.ConfigObjectModel=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),a(t,[{key:"toJSON",value:function(){var e,t=this;return e={},o.forEach((function(n){return e[n]=t.get(n)})),e}}]),t}(c.Model);return e.prototype.loveStore=r,e}.call(void 0),b=t.ConfigObjectCollection=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(c.Collection);return e.prototype.loveStore=r,e.prototype.model=v,e}.call(void 0),w=t.initTopicColors=function(){var e,t,n,o,r;for(n in o=new v({name:"topic-colors",content:{}}),e=u.get("topics"),r=o.get("content"),e)t={id:n,name:n,value:"SkyBlue"},r[n]=t;return o.set("content",r),o.save()};t.updateTopicColors=function(){var e,t;return t=u.get("topics"),(e=new b).fetch().then((function(){var n,o,r,i,u;for(o in e.length||w(),u=(i=e.findWhere({name:"topic-colors"})).get("content"),r=l.default.keys(u),t)l.default.includes(r,o)||(n={id:o,name:o,value:"SkyBlue"},u[o]=n);return i.set("content",u),i.save()}))}},842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=n(1),c=n(0),s=p(n(231)),f=p(n(843));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=l.Radio.channel("global"),o=i.request("main:app:IndexRouter"),a=[{label:"Main",url:"#hourly",icon:".fa.fa-star"},{label:"List Workers",url:"#hourly/list-workers",icon:".fa.fa-list"},{label:"Add Workers",url:"#hourly/potential-workers",icon:".fa.fa-plus"},{label:"Calendar",url:"#hourly/calendar",icon:".fa.fa-calendar"}],u=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(o);return e.prototype.channelName="hourly",e.prototype.appRoutes={hourly:"viewIndex","hourly/calendar":"viewCalendar","hourly/potential-workers":"viewPotentialWorkers","hourly/list-workers":"viewWorkers"},e}.call(void 0),r=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(s.default);return e.prototype.Controller=f.default,e.prototype.Router=u,e.prototype.appletEntries=[{label:(0,c.capitalize)("hourly")+" Menu",menu:a}],e}.call(void 0),t.default=r},843:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=n(102),c=n(103);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(844),r=a.Radio.channel("global"),i=a.Radio.channel("messages"),o=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(0),n.e(52)]).then(function(){var t,o,i;return t=r.request("main:app:decode-auth-token"),i=e.getChannel().request("db:worker:get",t.uid),o=new(0,n(1049).default)({model:i}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"viewCalendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(51)]).then(function(){var t;return t=new(0,n(1051).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewWorkers",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(53).then(function(){var t,o,r;return t=e.getChannel().request("db:worker:collection"),r=new(0,n(1052).default)({collection:t}),e.layout.showChildView("content",r),(o=t.fetch()).done((function(){return console.log("workers fetched")})),o.fail((function(){return i.request("danger",o.responseJSON.message)}))}.bind(null,n)).catch(n.oe)}},{key:"viewPotentialWorkers",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(54).then(function(){var t,o,r;return t=e.getChannel().request("get-potential-workers"),r=new(0,n(1053).default)({collection:t}),(o=t.fetch()).done((function(){return console.log("pworkers fetched",t)})),o.fail((function(){return console.log("pworkers.fetch() failed",o),i.request("danger",o.responseJSON.message)})),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}}]),t}(l.MainController);return e.prototype.channelName="hourly",e.prototype.layoutClass=c.ToolbarAppletLayout,e}.call(void 0),t.default=o},844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.workSessions=t.workers=void 0;var o,r,i,u,a,l,c,s,f,p,d,h,y=_(n(7)),v=n(1),b=n(0),w=_(n(385));function _(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u=v.Radio.channel("global"),o=v.Radio.channel("hourly"),p="/api/dev/hourly",i=u.request("main:app:AuthModel"),r=u.request("main:app:AuthCollection"),h={channelName:"hourly"},s=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),t}(i);return e.prototype.urlRoot="/api/dev/hourly/crud/workers",e}.call(void 0),f=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),t}(r);return e.prototype.model=s,e.prototype.url="/api/dev/hourly/crud/workers",e}.call(void 0);t.workers=new w.default((0,b.extend)(h,{modelName:"worker",modelClass:s,collectionClass:f}));l=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),t}(i);return e.prototype.urlRoot="/api/dev/hourly/crud/worksessions",e}.call(void 0),c=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),t}(r);return e.prototype.model=l,e.prototype.url="/api/dev/hourly/crud/worksessions",e}.call(void 0);t.workSessions=new w.default((0,b.extend)(h,{modelName:"worksession",modelClass:l,collectionClass:c}));a=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),t}(r);return e.prototype.url=p+"/potential-workers",e}.call(void 0),o.reply("get-potential-workers",(function(){return new a})),d=void 0,o.reply("maincalendar:set-date",(function(){var e;e=(0,y.default)("#maincalendar"),d=e.fullCalendar("getDate")})),o.reply("maincalendar:get-date",(function(){return d}))},845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=n(0),a=s(n(61)),l=s(n(231)),c=s(n(846));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=[{id:"dbadmin",label:"Db Admin",url:"#junk/dbadmin",icon:".fa.fa-database"},{id:"emojilist",label:"List Emojis",url:"#junk/emojilist",icon:".fa.fa-smile-o.text-dark.bg-warning"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(a.default);return e.prototype.channelName="junk",e.prototype.appRoutes={junk:"viewIndex","junk/upload":"uploadView","junk/themes":"themeSwitcher","junk/emojilist":"viewEmojis","junk/dbadmin":"viewDbAdmin"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(l.default);return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,u.capitalize)("junk")+" Menu",menu:i}],e}.call(void 0),t.default=o},846:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),u=n(102),a=n(103);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o=function(){var e=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(59).then(function(){var t;return t=new(0,n(1054).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewEmojis",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(56).then(function(){var t;return t=new(0,n(1055).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewDbAdmin",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(58).then(function(){var t;return t=new(0,n(1056).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"uploadView",value:function(){return this.setupLayoutIfNeeded(),this._viewUpload()}},{key:"_viewUpload",value:function(){var e=this;return Promise.all([n.e(20),n.e(57)]).then(function(){var t;return t=new(0,n(1057).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"themeSwitcher",value:function(){var e;return this.setupLayoutIfNeeded(),e=new(0,n(672).ThemeSwitchView),this.layout.showChildView("content",e),console.log("themeSwitcher")}},{key:"statsView",value:function(){var e,t,o=this;this.setupLayoutIfNeeded();var r=n(672);return e=r.StatsView,(t=new i.Model).url="/stats.json",t.fetch().done((function(){var n;return n=new e({model:t}),o.layout.showChildView("content",n)}))}}]),t}(u.MainController);return e.prototype.channelName="junk",e.prototype.layoutClass=a.ToolbarAppletLayout,e}.call(void 0),t.default=o},849:function(e,t,n){(t=n(229)(!1)).push([e.i,'.jsonView{\n    margin-left: 20px;\n    font-family: Consolas, "Lucida Console", Menlo, "dejavu sans mono", monospace;\n    font-size: 16px;\n    line-height: 16px;\n    padding: 2px;\n    cursor: default;\n    color: cornsilk;\n    white-space: nowrap;\n    -webkit-user-select: none;\n}\n\n.jsonView>div{\n    display: inline-block;\n}\n\n.jsonView>.children, .jsonView.insert{\n    display: block;\n}\n\n.jsonView>.name{\n    color: mistyrose;\n}\n\n.jsonView>.separator:before{\n    content: ":";\n}\n\n.jsonView>.separator {\n    padding-right: 5px;\n}\n\n.jsonView>.value.null{\n    color: rgb(128, 128, 128);\n}\n\n.jsonView>.value.boolean, .jsonView>.value.number{\n    color: lightseagreen;\n}\n\n.jsonView>.value.string:not(.edit):before, .jsonView>.value.string:not(.edit):after{\n    content: "\\"";\n}\n\n.jsonView>.value.string {\n    color: lightsalmon;\n}\n\n.jsonView>.name:hover, .jsonView>.value:hover{\n    background-color: rgba(56, 121, 217, 0.1);\n}\n\n.jsonView>.jv-expand, .jsonView>.jv-collapse{\n    min-width: 20px;\n    margin-left: -20px;\n    cursor: pointer;\n}\n\n.jsonView>.jv-expand:before{\n    content: \'\\25B6\';\n}\n\n.jsonView>.jv-collapse:before{\n    content: \'\\25BC\';\n}\n\n.jsonView>.edit{\n    padding: 0px 5px 0px 5px;\n    white-space: nowrap;\n    overflow: hidden;\n    background-color: transparent;\n}\n\n.jsonView>.edit br{\n    display: none;\n}\n\n.jsonView>.edit *{\n    display: inline;\n    white-space: nowrap;\n}\n\n.jsonView>.value.edit{\n    color: rgb(0, 0, 0);\n}\n\n.jsonView>.delete:before{\n    content: \'X\';\n}\n\n.jsonView>.delete{\n    opacity: 0;\n    display: inline;\n    padding: 3px;\n    margin-left: 20px;\n    cursor: pointer;\n    color: rgb(150, 150, 150);\n}\n\n.jsonView>.delete:hover{\n    opacity: 1;\n    color: rgb(0, 0, 0);\n    background: rgb(220, 220, 220);\n}\n\n.jsonView>.insert:before{\n    content: \'+\';\n}\n\n.jsonView>.insert{\n    display: none;\n    color: rgb(150, 150, 150);\n    cursor: pointer;\n}\n\n.jsonView.jv-expanded>.insert, .jsonView.jv-expanded>.insert{\n    display: inline-block;\n    margin-left: 20px;\n    padding: 3px;\n}\n\n.jsonView>.insert:hover{\n    color: rgb(0, 0, 0);\n    background: rgb(220, 220, 220);\n}\n',""]),e.exports=t},850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(851),i=(o=r)&&o.__esModule?o:{default:o};t.default=i.default},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=p(n(1)),i=p(n(231));n(868);var u,a,l,c,s,f=p(n(869));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}l=r.default.Radio.channel("global"),u=l.request("main:app:IndexRouter"),s=[{label:"Muppy Home",url:"#muppy",icon:".fa.fa-home"},{label:"List",url:"#muppy/summaries",icon:".fa.fa-list"},{label:"Calendar",url:"#muppy/calendar",icon:".fa.fa-calendar"}],c=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(u);return e.prototype.channelName="muppy",e.prototype.appRoutes={muppy:"viewIndex","muppy/summaries":"listSummaries","muppy/summary/view/:id":"viewSummary"},e}.call(void 0),a=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(i.default);return e.prototype.Controller=f.default,e.prototype.Router=c,e.prototype.appletEntries=[{label:(0,o.capitalize)("muppy")+" Menu",menu:s}],e}.call(void 0),t.default=a},868:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sumdiff=t.dbsummary=void 0;var o,r,i,u,a,l,c,s,f,p=n(0),d=n(1),h=n(385),y=(o=h)&&o.__esModule?o:{default:o};function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u=d.Radio.channel("global"),i=u.request("main:app:AuthModel"),r=u.request("main:app:AuthCollection"),f={channelName:"muppy"},a=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),t}(i);return e.prototype.urlRoot="/api/dev/memleak/summary",e}.call(void 0),l=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),t}(r);return e.prototype.url="/api/dev/memleak/summary",e.prototype.model=a,e}.call(void 0);t.dbsummary=new y.default((0,p.extend)(f,{modelName:"summary",modelClass:a,collectionClass:l}));s=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),t}(i);return e.prototype.urlRoot="/api/dev/memdiff",e}.call(void 0),c=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),t}(r);return e.prototype.model=s,e.prototype.url="/api/dev/memdiff",e}.call(void 0);t.sumdiff=new y.default((0,p.extend)(f,{modelName:"sumdiff",modelClass:s,collectionClass:c}))},869:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),a=n(102),l=n(103);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o=u.Radio.channel("muppy"),r=function(){var e=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(63).then(function(){var t;return t=new(0,n(1082).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewSummary",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(65).then(function(){var r,i;return r=n(1084).default,(i=o.request("db:summary:get",e)).fetch().done((function(){var e;return e=new r({model:i}),t.layout.showChildView("content",e),console.log("SUMMARY",i)}))}.bind(null,n)).catch(n.oe)}},{key:"listSummaries",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(64).then(function(){var t,r;return t=n(1085).default,(r=o.request("db:summary:collection")).fetch().done((function(){var n;return n=new t({collection:r}),e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}}]),t}(a.MainController);return e.prototype.layoutClass=l.ToolbarAppletLayout,e}.call(void 0),t.default=r},870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(61)),r=s(n(231)),i=s(n(404));n(871);var u,a,l,c=s(n(872));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}l=[{label:"List",url:"#netark",icon:".fa.fa-list"},{label:"SciFi Movies",url:"#netark/scifi/list",icon:".fa.fa-film"},{label:"Search",url:"#netark/search",icon:".fa.fa-search"}],a=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(o.default);return e.prototype.channelName="netark",e.prototype.appRoutes={netark:"viewIndex","netark/otrr/list":"listOtrr","netark/librivox/list":"listLibrivox","netark/scifi/list":"listSciFiMovies","netark/misc/list":"listMiscStuff","netark/view/:id":"viewMetadata","netark/search":"searchView"},e}.call(void 0),u=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(r.default);return e.prototype.Controller=c.default,e.prototype.Router=a,e.prototype.appletEntries=[{label:(0,i.default)("netark")+" Menu",menu:l}],e}.call(void 0),t.default=u},871:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=n(1),d=n(105),h=(o=d)&&o.__esModule?o:{default:o};function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(7),r=p.Radio.channel("netark"),l=function(e,t){var n,o;return o=t.server,n=t.dir,"/api/dev/proxy/","/api/dev/proxy/"+btoa("https://"+o+n+"/"+e)},c=function(e,t){return"//"+t.server+t.dir+"/"+e},i=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),f(t,[{key:"fileUrl",value:function(e){return l(e,this.toJSON())}}]),t}(p.Model);return e.prototype.urlRoot="https://archive.org/metadata",e}.call(void 0),r.reply("get-file-url",(function(e,t){return l(e,t)})),r.reply("get-image-url",(function(e,t){return c(e,t)})),r.reply("get-metadata-model",(function(){return i})),u=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),f(t,[{key:"parse",value:function(e){return console.log("PARSE",e),null===this.state.totalRecords&&(this.state.totalRecords=e.total,this._checkState(this.state)),console.log("totalRecords",this.state.totalRecords),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e.items)}}]),t}(h.default);return e.prototype.mode="server",e.prototype.url="/api/dev/proxy/https://archive.org/services/search/v1/scrape",e.prototype.state={pageSize:100},e.prototype.queryParams={pageSize:"count"},e}.call(void 0),r.reply("Scraper",(function(){return u})),a=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),f(t,[{key:"parse",value:function(e){return console.log("PARSE",e),null===this.state.totalRecords&&(this.state.totalRecords=e.response.numFound,this._checkState(this.state)),console.log("totalRecords",this.state.totalRecords),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e.response.docs)}}]),t}(h.default);return e.prototype.mode="server",e.prototype.url="/api/dev/proxy/https://archive.org/advancedsearch.php",e.prototype.state={pageSize:20,firstPage:1},e.prototype.queryParams={pageSize:"rows",output:"json",q:function(){return this.query}},e}.call(void 0),r.reply("SearchResults",(function(){return a}))},872:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),a=n(102),l=n(103);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o=u.Radio.channel("netark"),r=function(){var e=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(67).then(function(){var t;return t=new(0,n(1086).default),e.layout.showChildView("content",t),e.scrollTop()}.bind(null,n)).catch(n.oe)}},{key:"listOtrr",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(70).then(function(){var t;return t=new(0,n(1089).default),e.layout.showChildView("content",t),e.scrollTop()}.bind(null,n)).catch(n.oe)}},{key:"listLibrivox",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(70).then(function(){var t;return t=new(0,n(1093).default),e.layout.showChildView("content",t),e.scrollTop()}.bind(null,n)).catch(n.oe)}},{key:"listSciFiMovies",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(71).then(function(){var t;return t=new(0,n(1097).default),e.layout.showChildView("content",t),e.scrollTop()}.bind(null,n)).catch(n.oe)}},{key:"listMiscStuff",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(69).then(function(){var t;return t=new(0,n(1103).default),e.layout.showChildView("content",t),e.scrollTop()}.bind(null,n)).catch(n.oe)}},{key:"searchView",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(66).then(function(){var t;return t=new(0,n(1105).default),e.layout.showChildView("content",t),e.scrollTop()}.bind(null,n)).catch(n.oe)}},{key:"viewMetadata",value:function(e){var t,r=this;return this.setupLayoutIfNeeded(),t=o.request("get-metadata-model"),n.e(68).then(function(){var o,i;return o=n(1106).default,i=new t({id:e}),console.log("model---",i),i.fetch().done((function(){var e;return console.log("MODEL----------\x3e",i),e=new o({model:i}),r.layout.showChildView("content",e),r.scrollTop()}))}.bind(null,n)).catch(n.oe)}}]),t}(a.MainController);return e.prototype.layoutClass=l.ToolbarAppletLayout,e}.call(void 0),t.default=r},873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=s(n(61)),a=s(n(231)),l=s(n(404)),c=s(n(874));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=[{label:"Main",url:"#places",icon:".fa.fa-star"},{label:"Your Places",url:"#places/list",icon:".fa.fa-list"},{label:"All Places",url:"#places/all",icon:".fa.fa-globe"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(u.default);return e.prototype.channelName="places",e.prototype.appRoutes={places:"viewIndex","places/list":"listPlaces","places/view/:id":"viewPlace","places/all":"viewAllPlaces"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(a.default);return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,l.default)("places")+" Menu",menu:i}],e}.call(void 0),t.default=o},874:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=n(102),c=n(103);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(875),i=a.Radio.channel("messages"),o=a.Radio.channel("places"),r=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(1),n.e(72)]).then(function(){var t,r;return t=o.request("db:userlocation:collection"),(r=t.fetch()).fail((function(){return i.request("xhr-error",r)})),r.done((function(){var o;return o=new(0,n(1107).default)({collection:t}),e.layout.showChildView("content",o)}))}.bind(null,n)).catch(n.oe)}},{key:"listPlaces",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(1),n.e(110),n.e(73)]).then(function(){var t,r;return t=o.request("db:userlocation:collection"),(r=t.fetch()).fail((function(){return i.request("xhr-error",r)})),r.done((function(){var o;return o=new(0,n(1117).default)({collection:t}),e.layout.showChildView("content",o)}))}.bind(null,n)).catch(n.oe)}},{key:"viewPlace",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(1),n.e(74)]).then(function(){var r,u;return r=o.request("db:userlocation:get",e),(u=r.fetch()).fail((function(){return i.request("xhr-error",u)})),u.done((function(){var e;return e=new(0,n(1118).default)({model:r}),t.layout.showChildView("content",e)}))}.bind(null,n)).catch(n.oe)}},{key:"viewAllPlaces",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(1),n.e(110),n.e(73)]).then(function(){var t;return t=new(0,n(1119).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}(l.MainController);return e.prototype.channelName="places",e.prototype.layoutClass=c.ToolbarAppletLayout,e}.call(void 0),t.default=r},875:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c,s=d(n(0)),f=n(1),p=d(n(385));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=f.Radio.channel("global"),r=i.request("main:app:AuthModel"),o=i.request("main:app:AuthCollection"),l={},c={channelName:"places"},u=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),t}(r);return e.prototype.urlRoot="/api/dev/places/user",e}.call(void 0),a=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),t}(o);return e.prototype.model=u,e.prototype.url="/api/dev/places/user",e}.call(void 0),l.userlocation=new p.default(s.default.extend(c,{modelName:"userlocation",modelClass:u,collectionClass:a})),t.default=l},876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=s(n(61)),a=s(n(231)),l=n(0),c=s(n(877));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=[{label:"Main",url:"#pmc",icon:".fa.fa-star"},{label:"manageTopics",url:"#pmc/manage/topics",icon:".fa.fa-sitemap"},{label:"Search PMC",url:"#pmc/search/pmc",icon:".fa.fa-sitemap"},{label:"Import Site PMC",url:"#pmc/import/site",icon:".fa.fa-sitemap"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(u.default);return e.prototype.channelName="pmc",e.prototype.appRoutes={pmc:"viewIndex","pmc/topics/:name":"viewByTopic","pmc/manage/topics":"manageTopics","pmc/search/pmc":"viewSearchPMC","pmc/view/:id":"viewPMCArticle","pmc/import/site":"importSite"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(a.default);return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,l.capitalize)("pmc")+" Menu",menu:i}],e}.call(void 0),t.default=o},877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=n(102),c=n(103),s=(d(n(105)),d(n(603))),f=n(104),p=n(585);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(880),o=a.Radio.channel("pmc"),i=new s.default,o.reply("get-event-manager",(function(){return i})),r=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(77)]).then(function(){var t;return t=n(1153).default,o.request("get-fm-collection").fetch().done((function(){var n;return n=new t({model:f.eventIndex}),e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}},{key:"viewByTopic",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(75)]).then(function(){var r,i,u,l,c;return r=n(1155).default,i=o.request("get-fm-collection"),c=o.request("get-topic-collection"),u=o.request("get-fmtopic-collection"),l=[i.fetch(),c.fetch(),u.fetch()],Promise.all(l).then((function(){var n,o,i;return o=c.findWhere({name:e}),n=u.filter({topic_id:o.id}),i=new r({name:e,collection:new a.Collection(n)}),t.layout.showChildView("content",i)}))}.bind(null,n)).catch(n.oe)}},{key:"manageTopics",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(78).then(function(){var t;return t=new(0,n(1156).default)({model:f.eventIndex}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewSiteTopics",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(81).then(function(){var t;return t=new(0,n(1157).default)({model:f.eventIndex}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewSearchPMC",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(80)]).then(function(){var t;return t=n(1159).default,o.request("get-fm-collection").fetch().done((function(){var n;return n=new t({model:f.eventIndex}),e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}},{key:"viewPMCArticle",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(79)]).then(function(){var o,r;return o=n(1160).default,(r=new p.FrontMatterModel({id:e})).fetch().done((function(){var e;return e=new o({model:r}),t.layout.showChildView("content",e)}))}.bind(null,n)).catch(n.oe)}},{key:"importSite",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(76)]).then(function(){var t;return t=new(0,n(1161).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}(l.MainController);return e.prototype.channelName="pmc",e.prototype.layoutClass=c.ToolbarAppletLayout,e}.call(void 0),t.default=r},880:function(e,t,n){"use strict";n(585),n(881),n(679)},881:function(e,t,n){"use strict";var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=s(n(0)),a=n(1),l=s(n(676)),c=s(n(606));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o=a.Radio.channel("pmc"),r=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"url",value:function(){var e,t;return e={db:"pmc",term:this.get("term"),tool:"jquery",email:"joseph.rawson.works@gmail.com"},"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi",t="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?"+l.default.stringify(e),t}},{key:"parse",value:function(e){return(new c.default).xml2js(e)}},{key:"fetch",value:function(e){return e=u.default.extend(e||{},{dataType:"text"}),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}}]),t}(a.Model),o.reply("make-search-model",(function(e){return new r({term:e})}))},882:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=p(n(231)),i=n(0);n(883);var u,a,l,c,s,f=p(n(884));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}l=o.Radio.channel("global"),u=l.request("main:app:IndexRouter"),s=[{label:"List",url:"#sunny/clients",icon:".fa.fa-list"},{label:"New Client",url:"#sunny/clients/new",icon:".fa.fa-list"},{label:"Map View",url:"#sunny/mapview",icon:".fa.fa-globe"}],c=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(u);return e.prototype.channelName="sunny",e.prototype.appRoutes={sunny:"listClients","sunny/clients":"listClients","sunny/clients/new":"newClient","sunny/clients/edit/:id":"editClient","sunny/clients/view/:id":"viewClient","sunny/yards/add/:client_id":"addYard","sunny/yards/view/:id":"viewYard","sunny/yards/routines/:yard_id":"yardRoutines","sunny/mapview":"mapView"},e}.call(void 0),a=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(r.default);return e.prototype.Controller=f.default,e.prototype.Router=c,e.prototype.appletEntries=[{label:(0,i.capitalize)("sunny")+" Menu",menu:s}],e}.call(void 0),t.default=a},883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,w,_,m,g,O,j,P,k=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),C=n(0),E=n(1),M=n(385),R=(o=M)&&o.__esModule?o:{default:o};function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}f=E.Radio.channel("global"),r=E.Radio.channel("sunny"),g="/api/dev/sunny/crud",u=f.request("main:app:AuthModel"),i=f.request("main:app:AuthCollection"),O={},j={channelName:"sunny"},P=g+"/client",a=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(u);return e.prototype.urlRoot=P,e}.call(void 0),l=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(i);return e.prototype.model=a,e.prototype.url=P,e}.call(void 0),O.client=new R.default((0,C.extend)(j,{modelName:"client",modelClass:a,collectionClass:l})),P=g+"/yard",p=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(u);return e.prototype.urlRoot=P,e}.call(void 0),m=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(i);return e.prototype.model=p,e.prototype.url=P,e}.call(void 0),O.yard=new R.default((0,C.extend)(j,{modelName:"yard",modelClass:p,collectionClass:m})),P=g+"/yardroutine",d=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),k(t,[{key:"defaults",value:function(){return{frequency:14,leeway:3,rate:50,active:!0,routine_date:new Date}}}]),t}(u);return e.prototype.urlRoot=P,e}.call(void 0),v=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(i);return e.prototype.model=d,e.prototype.url=P,e}.call(void 0),O.yardroutine=new R.default((0,C.extend)(j,{modelName:"yardroutine",modelClass:d,collectionClass:v})),P=g+"/yardroutinejob",h=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(u);return e.prototype.urlRoot=P,e}.call(void 0),y=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(i);return e.prototype.model=h,e.prototype.url=P,e}.call(void 0),O.yardroutinejob=new R.default((0,C.extend)(j,{modelName:"yardroutinejob",modelClass:h,collectionClass:y})),P="/api/dev/sunny/gpslocations",c=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(u);return e.prototype.urlRoot=P,e}.call(void 0),s=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(i);return e.prototype.model=c,e.prototype.url=P,e}.call(void 0),O.location=new R.default((0,C.extend)(j,{modelName:"location",modelClass:c,collectionClass:s})),P="/api/dev/sunny/yardsession",b=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(u);return e.prototype.urlRoot=P,e}.call(void 0),_=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(i);return e.prototype.model=b,e.prototype.url=P,e}.call(void 0),O.yardsession=new R.default((0,C.extend)(j,{modelName:"yardsession",modelClass:b,collectionClass:_})),w=function(){var e=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),t}(u);return e.prototype.urlRoot="/api/dev/sunny/yard-clock",e}.call(void 0),r.reply("YardSessionClock",(function(){return w})),t.default=O},884:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=n(102),c=n(103);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i=a.Radio.channel("messages"),o=a.Radio.channel("sunny"),r=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"listClients",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(84).then(function(){var t,o,r;return t=n(1164).default,r=new t({collection:e.clients}),(o=e.clients.fetch()).done((function(){return e.layout.showChildView("content",r)})),o.fail((function(){return i.request("xhr-error",o)}))}.bind(null,n)).catch(n.oe)}},{key:"newClient",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(12).then(function(){var t;return t=n(594).NewClientView,e.layout.showChildView("content",new t)}.bind(null,n)).catch(n.oe)}},{key:"addYard",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(0),n.e(1),n.e(7),n.e(11)]).then(function(){var r,i,u;return r=n(765).default,console.log("YardView",r),(i=o.request("db:yard:new")).set("sunnyclient_id",e),u=new r({model:i}),t.layout.showChildView("content",u)}.bind(null,n)).catch(n.oe)}},{key:"viewYard",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(0),n.e(1),n.e(7),n.e(11)]).then(function(){var r,u,a;return r=n(765).default,(u=o.request("db:yard:get",e)).has("sunnyclient")?t._show_edit_client(r,u):(a=u.fetch({data:{include:"*"}})).done((function(){return t._show_edit_client(r,u)})),a.fail((function(){return i.request("xhr-error",a)}))}.bind(null,n)).catch(n.oe)}},{key:"yardRoutines",value:function(e){return console.log("yard_routines",e)}},{key:"_show_edit_client",value:function(e,t){var n;return n=new e({model:t}),this.layout.showChildView("content",n)}},{key:"editClient",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(12).then(function(){var r,u,a,l=n(594);return r=l.EditClientView,(u=o.request("db:client:get",e)).has("name")?t._show_edit_client(r,u):((a=u.fetch()).done((function(){return t._show_edit_client(r,u)})),a.fail((function(){return i.request("xhr-error",a)})))}.bind(null,n)).catch(n.oe)}},{key:"_fetch_yards_and_view_client",value:function(e,t){var n,r,u=this;return(r=(n=o.request("db:yard:collection")).fetch({data:{where:{sunnyclient_id:e.id}}})).done((function(){var o;return o=new t({model:e,collection:n}),window.cview=o,u.layout.showChildView("content",o)})),r.fail((function(){return i.request("danger","Failed to load yards.")}))}},{key:"viewClient",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(83).then(function(){var r,u,a;return r=n(1208).default,(u=o.request("db:client:get",e)).has("name")?t._fetch_yards_and_view_client(u,r):((a=u.fetch()).done((function(){return t._fetch_yards_and_view_client(u,r)})),a.fail((function(){return i.request("danger","Failed to load client data.")})))}.bind(null,n)).catch(n.oe)}},{key:"mapView",value:function(){var e=this;return this.setupLayoutIfNeeded(),console.log("layout should be ready"),Promise.all([n.e(1),n.e(82)]).then(function(){var t;return t=new(0,n(1210).default),e.layout.showChildView("content",t),console.log("view shown?",t)}.bind(null,n)).catch(n.oe)}}]),t}(l.MainController);return e.prototype.layoutClass=c.ToolbarAppletLayout,e.prototype.clients=o.request("db:client:collection"),e}.call(void 0),t.default=r},885:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=n(1),c=p(n(231)),s=p(n(404)),f=p(n(886));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=l.Radio.channel("global"),o=i.request("main:app:IndexRouter"),a=[{label:"Main Tax Page",url:"#taxes",icon:".fa.fa-newspaper-o"}],u=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(o);return e.prototype.channelName="taxes",e.prototype.appRoutes={taxes:"viewIndex","taxes/pages/*name":"viewPage"},e}.call(void 0),r=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(c.default);return e.prototype.Controller=f.default,e.prototype.Router=u,e.prototype.appletEntries=[{label:(0,s.default)("taxes")+" Menu",menu:a}],e}.call(void 0),t.default=r},886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=n(102),s=n(103),f=n(670),p=(o=f)&&o.__esModule?o:{default:o};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i=l.Radio.channel("global"),u=l.Radio.channel("messages"),r=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"viewPage",value:function(e){var t,n,o=this;return console.log("name is",e),this.setupLayoutIfNeeded(),(n=(t=i.request("main:app:get-document",e)).fetch()).done((function(){var e;return e=new p.default({model:t}),o.layout.showChildView("content",e)})),n.fail((function(){return u.request("warning","failed to get "+e)}))}},{key:"viewIndex",value:function(){return this.viewPage("taxes/index")}}]),t}(c.MainController);return e.prototype.layoutClass=s.ToolbarAppletLayout,e}.call(void 0),t.default=r},887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=n(1),a=(f(n(3)),f(n(61))),l=f(n(231)),c=f(n(404)),s=f(n(888));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u.Radio.channel("global"),u.Radio.channel("terminal"),i=[{label:"Main",url:"#terminal",icon:".fa.fa-star"}],r=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),t}(a.default);return e.prototype.channelName="terminal",e.prototype.appRoutes={terminal:"viewIndex"},e}.call(void 0),o=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),t}(l.default);return e.prototype.Controller=s.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,c.default)("terminal")+" Menu",menu:i}],e}.call(void 0),t.default=o},888:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),u=(l(n(6)),l(n(40)),n(102)),a=n(103);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i.Radio.channel("global"),i.Radio.channel("messages"),i.Radio.channel("terminal"),o=function(){var e=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(19),n.e(85)]).then(function(){var t;return t=new(0,n(1212).default)({channelName:"terminal"}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}(u.MainController);return e.prototype.channelName="terminal",e.prototype.layoutClass=a.ToolbarAppletLayout,e}.call(void 0),t.default=o},889:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=s(n(231));n(890);var i,u,a,l,c=s(n(891));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=o.Radio.channel("global"),i=a.request("main:app:IndexRouter"),l=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(i);return e.prototype.channelName="todos",e.prototype.appRoutes={todos:"list_todos","todos/completed":"list_completed_todos","todos/calendar":"view_calendar","todos/todos/new":"new_todo","todos/todos/edit/:id":"edit_todo","todos/todos/view/:id":"view_todo"},e}.call(void 0),u=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(r.default);return e.prototype.Controller=c.default,e.prototype.Router=l,e.prototype.appletEntries=[{label:"Todos Menu",menu:[{label:"list todos",icon:".fa.fa-list",url:"#todos"},{label:"Calendar",url:"#todos/calendar",icon:".fa.fa-calendar"},{label:"new todo",icon:".fa.fa-plus",url:"#todos/todos/new"}]}],e}.call(void 0),t.default=u},890:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dbcfg=void 0;var o,r,i,u,a,l,c,s,f,p,d,h=w(n(7)),y=n(0),v=n(1),b=w(n(385));function w(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u=v.Radio.channel("global"),o=v.Radio.channel("todos"),i=u.request("main:app:AuthModel"),r=u.request("main:app:AuthCollection"),d="/api/dev/bapi/todos",f={channelName:"todos"},a=function(){var e=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),t}(i);return e.prototype.urlRoot=d,e.prototype.defaults={completed:!1},e}.call(void 0),c=function(){var e=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),t}(r);return e.prototype.url=d,e.prototype.model=a,e}.call(void 0);t.dbcfg=new b.default((0,y.extend)(f,{modelName:"todo",modelClass:a,collectionClass:c}));l=function(){var e=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),t}(r);return e.prototype.url="/api/dev/basic/todos/create-cal",e.prototype.model=a,e}.call(void 0),p=new l,o.reply("todocal-collection",(function(){return p})),s=void 0,o.reply("maincalendar:set-date",(function(){var e;e=(0,h.default)("#maincalendar"),s=e.fullCalendar("getDate")})),o.reply("maincalendar:get-date",(function(){return s}))},891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),f=n(604),p=(o=f)&&o.__esModule?o:{default:o},d=n(102),h=n(103);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}u=s.Radio.channel("messages"),r=s.Radio.channel("todos"),a=[],l=new s.Collection(a),r.reply("get-toolbar-entries",(function(){return l})),i=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new p.default({collection:l}),this.layout.showChildView("toolbar",e)}},{key:"_isModelPresent",value:function(e){return e.isEmpty()||!e.has("created_at")}},{key:"list_certain_todos",value:function(e){var t=this;return this.setupLayoutIfNeeded(),0,n.e(86).then(function(){var e,o,r;return e=n(1217).default,r=new e({collection:t.collection}),(o=t.collection.fetch()).done((function(){return console.log(t.collection),t.layout.showChildView("content",r)})),o.fail((function(){return u.request("danger","Failed to load todos.")}))}.bind(null,n)).catch(n.oe)}},{key:"list_completed_todos",value:function(){return this.list_certain_todos(!0)}},{key:"list_todos",value:function(){return this.list_certain_todos(!1)}},{key:"new_todo",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(13).then(function(){var t;return t=n(798).NewView,e.layout.showChildView("content",new t)}.bind(null,n)).catch(n.oe)}},{key:"edit_todo",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(13).then(function(){var o,i;return o=n(798).EditView,i=r.request("db:todo:get",e),t._loadView(o,i,"todo")}.bind(null,n)).catch(n.oe)}},{key:"view_todo",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(88).then(function(){var o,i;return o=n(1218),(i=r.request("db:todo:get",e)).fetch().done((function(){var e;return e=new o({model:i}),t.layout.showChildView("content",e)}))}.bind(null,n)).catch(n.oe)}},{key:"view_calendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(7),n.e(87)]).then(function(){var t;return t=n(1219),e.layout.showChildView("content",new t)}.bind(null,n)).catch(n.oe)}}]),t}(d.MainController);return e.prototype.layoutClass=h.ToolbarAppletLayout,e.prototype.collection=r.request("db:todo:collection"),e}.call(void 0),t.default=i},892:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});h(n(7));var o,r,i,u,a,l,c,s=n(1),f=h(n(231)),p=h(n(404)),d=h(n(893));h(n(897));function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u=s.Radio.channel("global"),o=s.Radio.channel("tvmaze"),r=u.request("main:app:IndexRouter"),l=[{label:"List Shows",url:"#tvmaze/shows",icon:".fa.fa-list"},{label:"Search Show",url:"#tvmaze/searchshow",icon:".fa.fa-search"},{label:"Import Sample Data",url:"#tvmaze/import-sample-data",icon:".fa.fa-download"},{label:"Calendar",url:"#tvmaze/calendar",icon:".fa.fa-calendar"}],a=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(r);return e.prototype.channelName="tvmaze",e.prototype.appRoutes={tvmaze:"viewIndex","tvmaze/searchshow":"viewSearchShow","tvmaze/shows":"viewShowList","tvmaze/shows/flat":"viewShowListFlat","tvmaze/shows/view/:id":"viewShow","tvmaze/import-sample-data":"importSampleData","tvmaze/calendar":"viewCalendar"},e}.call(void 0),i=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(f.default);return e.prototype.Controller=d.default,e.prototype.Router=a,e.prototype.appletEntries=[{label:(0,p.default)("tvmaze")+" Menu",menu:l},{label:"List Shows",url:"#tvmaze/shows"}],e}.call(void 0),c=void 0,o.reply("maincalendar:set-date",(function(e){return c=e.fullCalendar("getDate")})),o.reply("maincalendar:get-date",(function(){return c})),t.default=i},893:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),a=n(102),l=n(103);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(894),o=u.Radio.channel("tvmaze"),r=function(){var e=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(91).then(function(){var t,r,i;return i=o.request("get-local-tvshows"),t=o.request("tv-show-search-collection"),r=n(1220).default,i.fetch().then((function(){var n;return n=new r({collection:new t}),e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}},{key:"viewShowList",value:function(){return this.viewShowListCards()}},{key:"viewShowListCards",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),n.e(94).then(function(){var o;return o=n(1225).default,t._loadView(o,e,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"viewShowListFlat",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),window.tvshows=e,n.e(95).then(function(){var o;return o=n(1227).default,e.fetch().done((function(){var n;return n=new o({collection:e}),t.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}},{key:"viewSearchShow",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(93).then(function(){var t;return t=new(0,n(1228).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewShow",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(92).then(function(){var r,i;return r=n(1229).default,i=new(o.request("get-local-tvshow-model"))({id:e}),t._loadView(r,i,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"importSampleData",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(89).then(function(){var t,r;return r=o.request("get-all-local-tvshows"),t=n(1232).default,r.fetch().then((function(){var n;return n=new t,e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}},{key:"viewCalendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(0),n.e(7),n.e(90)]).then(function(){var t,r;return r=o.request("get-local-tvshows"),t=n(1234).default,r.fetch().then((function(){var n;return n=new t,e.layout.showChildView("content",n)}))}.bind(null,n)).catch(n.oe)}}]),t}(a.MainController);return e.prototype.layoutClass=l.ToolbarAppletLayout,e}.call(void 0),t.default=r},894:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=n(7),d=((o=p)&&o.__esModule,n(1));function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(895),n(896),r=d.Radio.channel("tvmaze"),s="//api.tvmaze.com",c=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"url",value:function(){var e;return e=this.searchName,s+"/singlesearch/shows?q="+e}}]),t}(d.Model),r.reply("single-show-search",(function(e){var t;return(t=new c).searchName=e,t})),l=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"url",value:function(){return s+"/search/shows"}}]),t}(d.Collection),r.reply("new-tv-show-search",(function(e){return new l(e=e||{})})),r.reply("tv-show-search-collection",(function(){return l})),r.reply("search-tv-shows",(function(){return new l})),a=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"urlRoot",value:function(){return s+"/shows"}}]),t}(d.Model),r.reply("get-remote-show",(function(e){return new a({id:e})})),i=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"url",value:function(){return this.get("_links").self.href}}]),t}(d.Model),u=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),f(t,[{key:"url",value:function(){return s+"/shows/"+this.showId+"/episodes"}}]),t}(d.Collection);return e.prototype.model=i,e}.call(void 0),r.reply("get-remote-episodes",(function(e){var t;return(t=new u).showId=e,t}))},895:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=b(n(1)),y=n(414),v=b(n(105));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=h.default.Radio.channel("global"),r=h.default.Radio.channel("tvmaze"),s=a.request("main:app:dbConn","tvmaze"),l=new y.LoveStore(s,"TVMazeShow"),p=["id","name","url","self","premiered","runtime","network_name","imdb","status","summary","img_med","img_orig","content"],i=function(){var e=function(e){function t(){return w(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),d(t,[{key:"toJSON",value:function(){var e,t=this;return e={},p.forEach((function(n){return e[n]=t.get(n)})),e}}]),t}(h.default.Model);return e.prototype.loveStore=l,e}.call(void 0),u=function(){var e=function(e){function t(){return w(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),t}(v.default);return e.prototype.loveStore=l,e.prototype.model=i,e.prototype.mode="client",e}.call(void 0),o=function(){var e=function(e){function t(){return w(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),t}(h.default.Collection);return e.prototype.loveStore=l,e.prototype.model=i,e}.call(void 0),c=new o,f=new u,r.reply("get-all-local-tvshows",(function(){return c})),r.reply("get-local-tvshows",(function(){return f})),r.reply("get-local-tvshow-model",(function(){return i})),r.reply("get-local-tvshow-collection",(function(){return u})),r.reply("save-local-show",(function(e){var t,n,o,r,u,a;return t=new i({id:e.id,name:e.name,url:e.url,self:e._links.self.href,premiered:new Date(e.premiered),runtime:(null!=e?e.runtime:void 0)||"",network_name:(null!=e&&null!=(n=e.network)?n.name:void 0)||"NO NETWORK",imdb:(null!=(o=e.externals)?o.imdb:void 0)||"",status:(null!=e?e.status:void 0)||"",summary:(null!=e?e.summary:void 0)||"",img_med:(null!=e&&null!=(r=e.image)?r.medium:void 0)||"",img_orig:(null!=e&&null!=(u=e.image)?u.original:void 0)||"",content:e}),a=!0,t.isNew=function(){return!!a&&(a=!1,!0)},f.add(t),t.save()}))},896:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(1),h=(o=d)&&o.__esModule?o:{default:o},y=n(414);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=h.default.Radio.channel("global"),r=h.default.Radio.channel("tvmaze"),c=a.request("main:app:dbConn","tvmaze"),l=new y.LoveStore(c,"TVMazeEpisode"),s=["id","show_id","name","url","self","season","number","airdate","airtime","runtime","summary","img_med","img_orig","content"],i=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),p(t,[{key:"toJSON",value:function(){var e,t=this;return e={},s.forEach((function(n){return e[n]=t.get(n)})),e}}]),t}(h.default.Model);return e.prototype.loveStore=l,e}.call(void 0),u=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),t}(h.default.Collection);return e.prototype.loveStore=l,e.prototype.model=i,e}.call(void 0),f=new u,r.reply("get-local-episodes",(function(){return f})),r.reply("get-local-episode-model",(function(){return i})),r.reply("get-local-episode-collection",(function(){return u})),r.reply("save-local-episode",(function(e){var t,n,o,r,u,a,l,c,s;return t=new i({id:e.id,show_id:e.show_id,name:e.content.name,url:e.content.url,self:null!=(n=e.content._links)?n.self.href:void 0,season:e.content.season,number:e.content.number,airdate:new Date(e.content.airdate),airtime:e.content.airtime,runtime:(null!=(o=e.content)?o.runtime:void 0)||"",summary:(null!=(r=e.content)?r.summary:void 0)||"",img_med:(null!=(u=e.content)&&null!=(a=u.image)?a.medium:void 0)||"",img_orig:(null!=(l=e.content)&&null!=(c=l.image)?c.original:void 0)||"",content:e.content}),s=!0,t.isNew=function(){return!!s&&(s=!1,!0)},f.add(t),t.save()}))},897:function(e,t,n){e.exports=function(){return new Worker(n.p+"17ce10ceeffab1dd85ae.worker.js")}},898:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=n(0),a=s(n(231)),l=s(n(899)),c=s(n(413));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=[{label:"Main",url:"#useradmin",icon:".fa.fa-star"},{label:"Users",url:"#useradmin/user/list",icon:".fa.fa-list"},{label:"Add User",url:"#useradmin/user/add",icon:".fa.fa-plus"},{label:"Groups",url:"#useradmin/group/list",icon:".fa.fa-list"},{label:"Add Group",url:"#useradmin/group/add",icon:".fa.fa-plus"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(c.default);return e.prototype.channelName="useradmin",e.prototype.appRoutes={useradmin:"viewIndex","useradmin/user/list":"listUsers","useradmin/user/add":"addUser","useradmin/user/view/:id":"viewUser","useradmin/user/edit/:id":"editUser","useradmin/group/list":"listGroups","useradmin/group/add":"viewIndex","useradmin/group/view/:id":"viewIndex","useradmin/group/edit/:id":"editGroup"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),t}(a.default);return e.prototype.Controller=l.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,u.capitalize)("useradmin")+" Menu",menu:i}],e}.call(void 0),t.default=o},899:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=n(102),c=n(103);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(900),r=a.Radio.channel("global"),i=a.Radio.channel("messages"),o=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"editModel",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(14).then(function(){var o,r,u,a;return o=n(800).BaseEditFormView,r=e.model,a=new o(e),(u=r.fetch()).fail((function(){return i.request("danger","failed to get "+e.modelName)})),u.done((function(){return console.log(e.modelName+" fetched",r),t.layout.showChildView("content",a)}))}.bind(null,n)).catch(n.oe)}},{key:"addModel",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(14).then(function(){var o;return o=new(0,n(800).BaseNewFormView)(e),t.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(96).then(function(){var t;return t=new(0,n(1235).default),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"listUsers",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(98).then(function(){var t,o,r,u;return o=e.getChannel().request("db:user:collection"),t=n(663).default,u=new t({collection:o}),(r=o.fetch()).fail((function(){return i.request("danger","failed to get users")})),r.done((function(){return console.log("users fetched",o),e.layout.showChildView("content",u)}))}.bind(null,n)).catch(n.oe)}},{key:"viewUser",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(100).then(function(){var o,r,u,a;return r=new(t.getChannel().request("db:user:modelClass"))({id:e}),o=n(1236).default,a=new o({model:r}),(u=r.fetch()).fail((function(){return i.request("danger","failed to get user")})),u.done((function(){return t.layout.showChildView("content",a)}))}.bind(null,n)).catch(n.oe)}},{key:"editUser",value:function(e){var t,n;return n={modelName:"user",fieldList:["username","fullname","email"],entryField:"fullname",model:new(this.getChannel().request("db:user:modelClass"))({id:e})},t=r.request("crud:template:form",n),n.template=t,this.editModel(n)}},{key:"addUser",value:function(){var e,t;return t={modelName:"user",fieldList:["username","fullname","email"],entryField:"fullname",channelName:this.channelName},e=r.request("crud:template:form",t),t.template=e,this.addModel(t)}},{key:"listGroups",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(97).then(function(){var t,o,r,u;return o=e.getChannel().request("db:group:collection"),t=n(663).default,u=new t({collection:o}),(r=o.fetch()).fail((function(){return i.request("danger","failed to get groups")})),r.done((function(){return console.log("groups fetched",o),e.layout.showChildView("content",u)}))}.bind(null,n)).catch(n.oe)}},{key:"editGroup",value:function(e){var t,n;return n={modelName:"group",fieldList:["name"],entryField:"name",model:new(this.getChannel().request("db:group:modelClass"))({id:e})},t=r.request("crud:template:form",n),n.template=t,this.editModel(n)}}]),t}(l.MainController);return e.prototype.channelName="useradmin",e.prototype.layoutClass=c.ToolbarAppletLayout,e}.call(void 0),t.default=o},900:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),w=g(n(0)),_=n(1),m=g(n(385));function g(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=_.Radio.channel("global"),r=a.request("main:app:AuthModel"),o=a.request("main:app:AuthCollection"),d={channelName:"useradmin"},p={},v="/api/dev/useradmin/crud/users",l=function(){var e=function(e){function t(){return O(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),b(t,[{key:"itemLabel",value:function(){return this.get("fullname")+" ("+this.get("username")+")"}},{key:"itemViewUrl",value:function(){return"#useradmin/user/view/"+this.get("id")}},{key:"itemEditUrl",value:function(){return"#useradmin/user/edit/"+this.get("id")}}]),t}(r);return e.prototype.urlRoot=v,e.prototype.validation={username:{required:!0},fullname:{required:!0},email:{required:!0}},e}.call(void 0),c=function(){var e=function(e){function t(){return O(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),t}(o);return e.prototype.url=v,e.prototype.model=l,e}.call(void 0),p.user=new m.default(w.default.extend(d,{modelName:"user",modelClass:l,collectionClass:c})),h="/api/dev/useradmin/crud/groups",i=function(){var e=function(e){function t(){return O(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),b(t,[{key:"itemLabel",value:function(){return this.get("name")}},{key:"itemViewUrl",value:function(){return"#useradmin/group/view/"+this.get("id")}},{key:"itemEditUrl",value:function(){return"#useradmin/group/edit/"+this.get("id")}}]),t}(r);return e.prototype.urlRoot=h,e}.call(void 0),u=function(){var e=function(e){function t(){return O(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),t}(o);return e.prototype.url=h,e.prototype.model=i,e}.call(void 0),p.group=new m.default(w.default.extend(d,{modelName:"group",modelClass:i,collectionClass:u})),y="/api/dev/useradmin/usergroup",s=function(){var e=function(e){function t(){return O(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),b(t,[{key:"url",value:function(){var e,t,n;return n=this.get("user_id"),e=this.get("group_id"),t=y+"/"+e+"/"+n,t}},{key:"itemLabel",value:function(){var e;return e=this.get("user_id"),this.get("group_id")+", "+e}}]),t}(r);return e.prototype.urlRoot=y,e.prototype.idAttribute="group_id",e}.call(void 0),f=function(){var e=function(e){function t(){return O(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),t}(o);return e.prototype.url=y,e.prototype.model=s,e}.call(void 0),p.usergroup=new m.default(w.default.extend(d,{modelName:"usergroup",modelClass:s,collectionClass:f})),t.default=p},901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},i=n(1),u=h(n(231));n(902);var a,l,c,s,f,p,d=h(n(903));function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s=i.Radio.channel("global"),a=i.Radio.channel("userprofile"),l=s.request("main:app:IndexRouter"),p=[{label:"Main",url:"#profile"},{label:"Edit Config",url:"#profile/editconfig"},{label:"Change Password",url:"#profile/chpassword"},{label:"View Map",url:"#profile/mapview"}],f=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),t}(l);return e.prototype.channelName="userprofile",e.prototype.appRoutes={profile:"show_profile","profile/editconfig":"editConfig","profile/chpassword":"change_password","profile/mapview":"view_map"},e}.call(void 0),c=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),o(t,[{key:"onBeforeStart",value:function(){var e=this;return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onBeforeStart",this).call(this,arguments),a.reply("main-controller",(function(){return console.warn("Stop using 'main-controller' request on AppChannel"),e.router.controller}))}}]),t}(u.default);return e.prototype.Controller=d.default,e.prototype.Router=f,e.prototype.appletEntries=[{label:"User Profile",menu:p}],e}.call(void 0),t.default=c},902:function(e,t,n){"use strict";var o,r,i,u,a,l=n(7),c=(o=l)&&o.__esModule?o:{default:o},s=n(1);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}u=s.Radio.channel("global"),(r=s.Radio.channel("userprofile")).reply("update-user-config",(function(){return console.log("update-user-config called")})),i=u.request("main:app:AuthModel"),a=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i);return e.prototype.url="/auth/chpass",e.prototype.validation={password:{required:!0,minLength:8},confirm:function(e){var t;return e===(t=(0,c.default)('input[name="password"]').val())&&(0,c.default)('input[type="submit"]').show(),e!==t}},e}.call(void 0),r.reply("new-password-model",(function(){return new a}))},903:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=n(3),s=h(n(6)),f=h(n(57)),p=n(102),d=n(103);function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=l.Radio.channel("global"),o=l.Radio.channel("userprofile"),u=s.default.renderable((function(e){return s.default.div(".btn-group.btn-group-justified",(function(){var t,n,o,r,i,u;for(u=[],n=0,r=(i=e.entries).length;n<r;n++)t=i[n],o=(null!=t?t.icon:void 0)||"info",u.push(s.default.div(".toolbar-button.btn.btn-primary",{"button-url":t.url},(function(){return s.default.span(".fa.fa-"+o," "+t.name)})));return u}))})),function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),a(t,[{key:"toolbarButtonPressed",value:function(e){var t;return console.log("toolbarButtonPressed",e),t=e.currentTarget.getAttribute("button-url"),(0,f.default)(t)}}]),t}(c.View);return e.prototype.template=u,e.prototype.ui={toolbarButton:".toolbar-button"},e.prototype.events={"click @ui.toolbarButton":"toolbarButtonPressed"},e}.call(void 0),r=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),a(t,[{key:"show_profile",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(102).then(function(){var t,o,r;return t=n(1239).default,o=i.request("main:app:decode-auth-token"),console.log("TOKEN",o),r=new t({model:new l.Model(o),templateContext:{title:o.fullname,text:o.fullname+" ("+o.name+")"}}),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}},{key:"view_map",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(1),n.e(16)]).then(function(){var t,o,r;return t=n(801).default,o=i.request("main:app:decode-auth-token"),r=new t({model:new l.Model(o)}),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}},{key:"editConfig",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(101).then(function(){var t,o,r;return t=n(1242).default,o=i.request("main:app:decode-auth-token"),r=new t({model:new l.Model(o)}),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}},{key:"change_password",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(8),n.e(22),n.e(15)]).then(function(){var t;return t=new(0,n(802).default)({model:o.request("new-password-model")}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}(p.MainController);return e.prototype.layoutClass=d.ToolbarAppletLayout,e}.call(void 0),t.default=r},904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=f(n(231));n(905);var i,u,a,l,c,s=f(n(906));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=o.Radio.channel("global"),i=a.request("main:app:IndexRouter"),c=[{button:"#list-button",label:"List",url:"#wikipages",icon:".fa.fa-list"}],l=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),t}(i);return e.prototype.channelName="wikipages",e.prototype.appRoutes={wikipages:"list_wikipages","wikipages/view/:name":"view_wikipage"},e}.call(void 0),u=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),t}(r.default);return e.prototype.Controller=s.default,e.prototype.Router=l,e.prototype.appletEntries=[{label:"Wikipages Menu",menu:c}],e}.call(void 0),t.default=u},905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dbcfg=void 0;var o,r,i,u,a,l,c,s=d(n(0)),f=n(1),p=d(n(385));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=f.Radio.channel("global"),r=i.request("main:app:AuthModel"),o=i.request("main:app:AuthCollection"),c="/api/dev/bsapi/main/wikipages",l={channelName:"wikipages"},u=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),t}(r);return e.prototype.urlRoot=c,e}.call(void 0),a=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),t}(o);return e.prototype.url=c,e.prototype.model=u,e}.call(void 0);t.dbcfg=new p.default(s.default.extend(l,{modelName:"wikipage",modelClass:u,collectionClass:a}))},906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),f=y(n(604)),p=n(102),d=n(103),h=y(n(111));function y(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i=s.Radio.channel("global"),u=s.Radio.channel("messages"),o=s.Radio.channel("wikipages"),a=[],l=new s.Collection(a),o.reply("get-toolbar-entries",(function(){return l})),r=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new f.default({collection:l}),this.layout.showChildView("toolbar",e)}},{key:"_load_view",value:function(e,t,n){var o,r=this;return t.isEmpty()||!t.has("created_at")?((o=t.fetch()).done((function(){return r._show_view(e,t),(0,h.default)()})),o.fail((function(){var e;return e="Failed to load "+n+" data.",u.request("danger",e)}))):this._show_view(e,t)}},{key:"list_wikipages",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(111).then(function(){var t,o,r;return t=n(1248).default,r=new t({collection:e.collection}),(o=e.collection.fetch()).done((function(){var t;if(e.layout.showChildView("content",r),!e.collection.length)return u.request("warning","adding initial page"),(t=new(i.request("main:app:AuthModel"))).url="/api/dev/bsapi/main/wikipages/X32_ABI",t.fetch().done((function(){return window.location.hash="#"}))})),o.fail((function(){return u.request("danger","Failed to load wikipages.")}))}.bind(null,n)).catch(n.oe)}},{key:"view_wikipage",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(112).then(function(){var r,i;return r=n(1249).default,i=o.request("db:wikipage:get",e),console.log("MODEL",i),t._load_view(r,i,"wikipage")}.bind(null,n)).catch(n.oe)}}]),t}(p.MainController);return e.prototype.layoutClass=d.ToolbarAppletLayout,e.prototype.collection=o.request("db:wikipage:collection"),e}.call(void 0),t.default=r}}]);
//# sourceMappingURL=23-ec01c2b1d6a9c3b254ec.js.map