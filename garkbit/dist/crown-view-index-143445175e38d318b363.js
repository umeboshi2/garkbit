(self.webpackJsonp=self.webpackJsonp||[]).push([[41],{886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,o,u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),f=n(3),c=p(n(6)),d=p(n(380));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(599),l=function(e){return e.split(".md")[0]},u=function(e){return"#pages/blog/cv19/"+l(e)},i=function(){var e=function(e){function t(){return h(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),t}(f.View);return e.prototype.template=c.default.renderable((function(e){return c.default.ul((function(){var t,n,i,r,o;for(o=[],t=0,n=(r=e.links).length;t<n;t++)i=r[t],o.push(c.default.li((function(){return i.startsWith("#pages")?c.default.span(".badge.badge-dark",(function(){return c.default.a({href:i},(function(){return c.default.text(i.split("#pages/blog/cv19/")[1])}))})):c.default.a({href:i},i)})));return o}))})),e}.call(void 0),o=function(){var e=function(e){function t(){return h(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),s(t,[{key:"linkBtnClicked",value:function(){var e;return(e=this.getRegion("linksView")).hasView()?(e.empty(),this.ui.toggleIcon.removeClass("fa-toggle-up"),this.ui.toggleIcon.addClass("fa-toggle-down")):(this.showListView(),this.ui.toggleIcon.removeClass("fa-toggle-down"),this.ui.toggleIcon.addClass("fa-toggle-up"))}},{key:"showListView",value:function(){var e;return e=new i({model:this.model}),this.showChildView("linksView",e)}}]),t}(f.View);return e.prototype.template=c.default.renderable((function(e){return c.default.div(".row.card",(function(){return c.default.div(".card-body",(function(){return c.default.button(".links-btn.btn.btn-dark.btn-sm",(function(){return c.default.i(".fa.fa-toggle-down.toggle-icon")})),c.default.a({href:u(e.name)},l(e.name))})),c.default.div(".links-view")}))})),e.prototype.ui={linksBtn:".links-btn",linksView:".links-view",toggleIcon:".toggle-icon"},e.prototype.regions={linksView:"@ui.linksView"},e.prototype.events={"click @ui.linksBtn":"linkBtnClicked"},e}.call(void 0),r=function(){var e=function(e){function t(){return h(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),s(t,[{key:"showIndexView",value:function(){var e;return e=new f.CollectionView({childView:o,collection:new a.Collection(this.model.get("pages"))}),this.showChildView("indexView",e)}},{key:"onRender",value:function(){return this.showIndexView()}},{key:"refreshBtnClicked",value:function(){var e=this;return this.ui.refreshBtn.removeClass("btn-link"),this.ui.refreshBtn.addClass("btn-warning"),this.model.fetch({data:{nocache:Date.now()}}).done((function(){return e.getRegion("indexView").empty(),e.showIndexView(),e.ui.refreshBtn.removeClass("btn-warning"),e.ui.refreshBtn.addClass("btn-link")}))}},{key:"onDomRefresh2",value:function(){return this.jsonView=new d.default(this.model.toJSON()),this.ui.jsonView.prepend(this.jsonView.dom)}}]),t}(f.View);return e.prototype.template=c.default.renderable((function(){return c.default.div(".listview-header.text-center",(function(){return c.default.h1("Index")})),c.default.button(".refresh-btn.btn.btn-link.btn-sm","Refresh"),c.default.div(".index-view")})),e.prototype.ui={indexView:".index-view",refreshBtn:".refresh-btn"},e.prototype.regions={indexView:"@ui.indexView"},e.prototype.events={"click @ui.refreshBtn":"refreshBtnClicked"},e}.call(void 0),t.default=r}}]);
//# sourceMappingURL=crown-view-index-143445175e38d318b363.js.map