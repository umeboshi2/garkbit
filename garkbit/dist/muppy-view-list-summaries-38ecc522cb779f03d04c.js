(self.webpackJsonp=self.webpackJsonp||[]).push([[52],{542:function(t,e,n){"use strict";var r,o,i,u,a,l,p,c,f,m,s,d,y,b,h,v,_,k,g,w,O=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0},j=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function D(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r=n(4),i=n(1),m=n(2),g=n(3),k=n(6).default,n(11);var q=n(10);_=q.modal_close_button,f=i.Radio.channel("global"),s=i.Radio.channel("messages"),i.Radio.channel("muppy"),o=f.request("main:app:AuthModel"),f.request("main:app:AuthCollection"),u=f.request("crud:view:item"),a=f.request("crud:view:list"),w={name:"summary",entryField:"name",routeName:"muppy"},b=f.request("crud:template:list",w),y=function(t){return g.renderable(function(e){var n;return n=".btn.btn-secondary.btn-sm",g.span(".mr-auto",function(){var n,r;return n="#"+t.routeName+"/"+t.name+"/view/"+e.id,r=e[t.entryField]+" - "+e.content.length,g.a({href:n},r)}),g.span(".ml-auto.btn-group.pull-right",function(){return g.button(".mark-item."+n+".btn-info.fa.fa-spinner"," mark"),g.button(".edit-item."+n+".btn-info.fa.fa-edit"," edit"),g.button(".delete-item."+n+".btn-danger.fa.fa-close"," delete")})})}(w),h=[],v=g.renderable(function(t){return g.div(".modal-dialog.modal-lg",function(){return g.div(".modal-content",function(){return g.h3(".center","Diff of Summaries"),g.div(".modal-body",function(){return g.pre({style:"font-size:.2rem;"},t.output)}),g.div(".modal-footer",function(){return g.ul(".list-inline",function(){return"btn.btn-primary.btn-sm",g.li("#confirm-delete-button",function(){return _("OK","check")}),g.li("#cancel-delete-button",function(){return _("Cancel")})})})})})}),d=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,m.View),j(e,[{key:"onDomRefresh",value:function(){return r("#modal").addClass("fade")}}]),e}();return t.prototype.template=v,t}.call(void 0),p=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,u),j(e,[{key:"ui",value:function(){var t;return(t=O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ui",this).call(this)).markItem=".mark-item",t}},{key:"events",value:function(){var t;return(t=O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"events",this).call(this))["click @ui.markItem"]="markItemClicked",t}},{key:"markItemClicked",value:function(){return h.length<=1?(h.push(this.model),this.ui.markItem.removeClass("btn-info"),this.ui.markItem.addClass("btn-primary")):this.ui.markItem.hide(),2===h.length&&r(".mark-item.btn-info").hide(),console.log(h)}}]),e}();return t.prototype.route_name="muppy",t.prototype.template=y,t.prototype.item_type="summary",t}.call(void 0),l=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,o),e}();return t.prototype.url="api/dev/memdiff",t}.call(void 0),c=function(){var t=function(t){function e(){return C(this,e),P(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D(e,a),j(e,[{key:"onDomRefresh",value:function(){var t;for(t=[];h.length;)t.push(h.pop());return t}},{key:"addSummaryClicked",value:function(){return k("#muppy")}},{key:"showDiffClicked",value:function(){var t,e,n,r,o=this;return console.log("MARKEDMODELS",h),e=h[0],n=h[1],(r=(t=new l({sum1:e.id,sum2:n.id})).save()).done(function(){var e;return e=new d({model:t}),o._show_modal(e,!1),s.request("info","diff should be performed"),console.log(t.attributes)}),r.fail(function(){return s.request("danger","something bad happened")})}},{key:"_show_modal",value:function(t,e){var n;return(n=f.request("main:app:object").getView().getRegion("modal")).backdrop=e,n.show(t)}}]),e}();return t.prototype.template=g.renderable(function(){return g.button(".add-summary-button.btn.btn-primary","Add summary"),g.button(".diff-summaries-button.btn.btn-primary","Show diff"),b()}),t.prototype.ui={addSummaryBtn:".add-summary-button",showDiffBtn:".diff-summaries-button"},t.prototype.events={"click @ui.addSummaryBtn":"addSummaryClicked","click @ui.showDiffBtn":"showDiffClicked"},t.prototype.route_name="muppy",t.prototype.childView=p,t.prototype.template2=b,t.prototype.childViewContainer="#summary-container",t.prototype.item_type="summary",t}.call(void 0),t.exports=c}}]);
//# sourceMappingURL=muppy-view-list-summaries-38ecc522cb779f03d04c.js.map