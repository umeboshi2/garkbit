(self.webpackJsonp=self.webpackJsonp||[]).push([[42],{464:function(t,e,n){var s={"./af":313,"./af.js":313,"./ar":314,"./ar-dz":315,"./ar-dz.js":315,"./ar-kw":316,"./ar-kw.js":316,"./ar-ly":317,"./ar-ly.js":317,"./ar-ma":318,"./ar-ma.js":318,"./ar-sa":319,"./ar-sa.js":319,"./ar-tn":320,"./ar-tn.js":320,"./ar.js":314,"./az":321,"./az.js":321,"./be":322,"./be.js":322,"./bg":323,"./bg.js":323,"./bm":324,"./bm.js":324,"./bn":325,"./bn-bd":326,"./bn-bd.js":326,"./bn.js":325,"./bo":327,"./bo.js":327,"./br":328,"./br.js":328,"./bs":329,"./bs.js":329,"./ca":330,"./ca.js":330,"./cs":331,"./cs.js":331,"./cv":332,"./cv.js":332,"./cy":333,"./cy.js":333,"./da":334,"./da.js":334,"./de":335,"./de-at":336,"./de-at.js":336,"./de-ch":337,"./de-ch.js":337,"./de.js":335,"./dv":338,"./dv.js":338,"./el":339,"./el.js":339,"./en-au":340,"./en-au.js":340,"./en-ca":341,"./en-ca.js":341,"./en-gb":342,"./en-gb.js":342,"./en-ie":343,"./en-ie.js":343,"./en-il":344,"./en-il.js":344,"./en-in":345,"./en-in.js":345,"./en-nz":346,"./en-nz.js":346,"./en-sg":347,"./en-sg.js":347,"./eo":348,"./eo.js":348,"./es":349,"./es-do":350,"./es-do.js":350,"./es-mx":351,"./es-mx.js":351,"./es-us":352,"./es-us.js":352,"./es.js":349,"./et":353,"./et.js":353,"./eu":354,"./eu.js":354,"./fa":355,"./fa.js":355,"./fi":356,"./fi.js":356,"./fil":357,"./fil.js":357,"./fo":358,"./fo.js":358,"./fr":359,"./fr-ca":360,"./fr-ca.js":360,"./fr-ch":361,"./fr-ch.js":361,"./fr.js":359,"./fy":362,"./fy.js":362,"./ga":363,"./ga.js":363,"./gd":364,"./gd.js":364,"./gl":365,"./gl.js":365,"./gom-deva":366,"./gom-deva.js":366,"./gom-latn":367,"./gom-latn.js":367,"./gu":368,"./gu.js":368,"./he":369,"./he.js":369,"./hi":370,"./hi.js":370,"./hr":371,"./hr.js":371,"./hu":372,"./hu.js":372,"./hy-am":373,"./hy-am.js":373,"./id":374,"./id.js":374,"./is":375,"./is.js":375,"./it":376,"./it-ch":377,"./it-ch.js":377,"./it.js":376,"./ja":378,"./ja.js":378,"./jv":379,"./jv.js":379,"./ka":380,"./ka.js":380,"./kk":381,"./kk.js":381,"./km":382,"./km.js":382,"./kn":383,"./kn.js":383,"./ko":384,"./ko.js":384,"./ku":385,"./ku.js":385,"./ky":386,"./ky.js":386,"./lb":387,"./lb.js":387,"./lo":388,"./lo.js":388,"./lt":389,"./lt.js":389,"./lv":390,"./lv.js":390,"./me":391,"./me.js":391,"./mi":392,"./mi.js":392,"./mk":393,"./mk.js":393,"./ml":394,"./ml.js":394,"./mn":395,"./mn.js":395,"./mr":396,"./mr.js":396,"./ms":397,"./ms-my":398,"./ms-my.js":398,"./ms.js":397,"./mt":399,"./mt.js":399,"./my":400,"./my.js":400,"./nb":401,"./nb.js":401,"./ne":402,"./ne.js":402,"./nl":403,"./nl-be":404,"./nl-be.js":404,"./nl.js":403,"./nn":405,"./nn.js":405,"./oc-lnc":406,"./oc-lnc.js":406,"./pa-in":407,"./pa-in.js":407,"./pl":408,"./pl.js":408,"./pt":409,"./pt-br":410,"./pt-br.js":410,"./pt.js":409,"./ro":411,"./ro.js":411,"./ru":412,"./ru.js":412,"./sd":413,"./sd.js":413,"./se":414,"./se.js":414,"./si":415,"./si.js":415,"./sk":416,"./sk.js":416,"./sl":417,"./sl.js":417,"./sq":418,"./sq.js":418,"./sr":419,"./sr-cyrl":420,"./sr-cyrl.js":420,"./sr.js":419,"./ss":421,"./ss.js":421,"./sv":422,"./sv.js":422,"./sw":423,"./sw.js":423,"./ta":424,"./ta.js":424,"./te":425,"./te.js":425,"./tet":426,"./tet.js":426,"./tg":427,"./tg.js":427,"./th":428,"./th.js":428,"./tk":429,"./tk.js":429,"./tl-ph":430,"./tl-ph.js":430,"./tlh":431,"./tlh.js":431,"./tr":432,"./tr.js":432,"./tzl":433,"./tzl.js":433,"./tzm":434,"./tzm-latn":435,"./tzm-latn.js":435,"./tzm.js":434,"./ug-cn":436,"./ug-cn.js":436,"./uk":437,"./uk.js":437,"./ur":438,"./ur.js":438,"./uz":439,"./uz-latn":440,"./uz-latn.js":440,"./uz.js":439,"./vi":441,"./vi.js":441,"./x-pseudo":442,"./x-pseudo.js":442,"./yo":443,"./yo.js":443,"./zh-cn":444,"./zh-cn.js":444,"./zh-hk":445,"./zh-hk.js":445,"./zh-mo":446,"./zh-mo.js":446,"./zh-tw":447,"./zh-tw.js":447};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=o,t.exports=r,r.id=464},818:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,r,o,u,a,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),l=n(1),c=n(4),f=p(n(7)),j=p(n(295)),d=p(n(819));function p(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r=l.Radio.channel("messages"),o=function(){var t=function(t){function e(){return h(this,e),b(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return y(e,t),e}(c.View);return t.prototype.template=f.default.renderable((function(){return f.default.div(".row.listview-list-entry",(function(){return f.default.text("You are not a worker.")}))})),t}.call(void 0),u=function(){var t=function(t){function e(){return h(this,e),b(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return y(e,t),i(e,[{key:"onSomething",value:function(){var t;t=this.model.get("id"),new d.default({worker_id:t})}}]),e}(c.View);return t.prototype.template=f.default.renderable((function(t){return f.default.div((function(){var e,n,s,r;return n=t.session,"off"===(r=t.worker.status)&&n.end?(e=(0,j.default)(n.end),f.default.text("Your last session ended "+e.fromNow())):"on"===r?(s=(0,j.default)(n.start),f.default.text("You have been working since "+s.fromNow())):void 0}))})),t}.call(void 0),a=function(){var t=function(t){function e(){return h(this,e),b(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return y(e,t),i(e,[{key:"ui",value:function(){return{clockBtn:".clock-btn",workSessionRegion:".work-session"}}},{key:"events",value:function(){return{"click @ui.clockBtn":"punchClock"}}},{key:"onRender",value:function(){var t,e=this;return(t=new d.default).fetch().done((function(){var n;return n=new u({model:t}),e.showChildView("workSessionRegion",n)}))}},{key:"punchClock",value:function(){var t;return"off"===(t=this.model.get("status"))||null===t?this.punchIn():"on"===t?this.punchOut():r.request("warning","Bad worker status "+t)}},{key:"punchIn",value:function(){var t,e,n=this;return t=new d.default,(e=t.save(null,{type:"POST",url:t.urlRoot})).done((function(){return n.updateLocalStatus("on")})),e.fail((function(){return r.request("warning",e.responseJSON.code)}))}},{key:"punchOut",value:function(){var t,e,n=this;return e=this.model.get("id"),(t=new d.default({worker_id:e})).fetch().done((function(){var e;return(e=t.save()).done((function(){return n.updateLocalStatus("off")})),e.fail((function(){return r.request("warning",e.responseJSON.code)}))}))}},{key:"updateLocalStatus",value:function(t){return this.model.set("status",t),this.render()}}]),e}(c.View);return t.prototype.template=f.default.renderable((function(t){var e;return f.default.div(".row.listview-list-entry",(function(){return f.default.text(t.user.fullname+" is a worker.")})),f.default.div(".row.listview-list-entry.work-session"),e={action:"in",btnClass:".clock-btn.btn.btn-info.fa.fa-clock-o"},null===t.status&&f.default.div(".row.listview-list-entry",(function(){return f.default.text(t.user.fullname+" has never clocked in.")})),"on"===t.status&&(e.action="out",e.btnClass=".clock-btn.btn.btn-warning.fa.fa-clock-o"),f.default.div(".row",(function(){return f.default.button(e.btnClass,(function(){return f.default.text("Clock "+e.action)}))}))})),t.prototype.regions={workSessionRegion:"@ui.workSessionRegion"},t}.call(void 0),s=function(){var t=function(t){function e(){return h(this,e),b(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return y(e,t),i(e,[{key:"ui",value:function(){return{status:".status"}}},{key:"onRender",value:function(){var t,e=this;return(t=this.model.fetch()).done((function(){var t;return t=new a({model:e.model}),e.showChildView("status",t)})),t.fail((function(){var t;return t=new o({model:e.model}),e.showChildView("status",t)}))}}]),e}(c.View);return t.prototype.template=f.default.renderable((function(){return f.default.div(".row.status")})),t.prototype.regions={status:"@ui.status"},t.prototype.templateContext={appName:"hourly"},t}.call(void 0),e.default=s},819:function(t,e,n){"use strict";var s,r,o;Object.defineProperty(e,"__esModule",{value:!0}),r=n(1).Radio.channel("global"),s=r.request("main:app:AuthModel"),o=function(){var t=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(s);return t.prototype.urlRoot="/api/dev/hourly/time-clock",t}.call(void 0),e.default=o}}]);
//# sourceMappingURL=hourly-view-index-bcedc2de41e984567fe9.js.map