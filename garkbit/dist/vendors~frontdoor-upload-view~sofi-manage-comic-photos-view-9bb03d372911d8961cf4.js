(self.webpackJsonp=self.webpackJsonp||[]).push([[12],{124:function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},166:function(e,t,i){e.exports=i.p+"loading-13630905267b809161e71d0f8a0c017b.gif"},167:function(e,t,i){var r=i(397);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i(97)(r,n);r.locals&&(e.exports=r.locals)},168:function(e,t,i){var r,n,a;
/*!
 * bootstrap-fileinput v4.4.8
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2018, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD 3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */
/*!
 * bootstrap-fileinput v4.4.8
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2018, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD 3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */
!function(o){"use strict";n=[i(4)],void 0===(a="function"==typeof(r=function(e){var t,i;e.fn.fileinputLocales={},e.fn.fileinputThemes={},String.prototype.setTokens=function(e){var t,i,r=this.toString();for(t in e)e.hasOwnProperty(t)&&(i=new RegExp("{"+t+"}","g"),r=r.replace(i,e[t]));return r},t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(e,t,i){return void 0!==e&&(i?e===t:e.match(t))},isIE:function(e){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===e)return new RegExp("msie\\s"+e,"i").test(navigator.userAgent);var t,i=document.createElement("div");return i.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",t=i.getElementsByTagName("i").length,document.body.appendChild(i),i.parentNode.removeChild(i),t},canAssignFilesToInput:function(){var e=document.createElement("input");try{return e.type="file",e.files=null,!0}catch(e){return!1}},getDragDropFolders:function(e){var t,i,r=e.length,n=0;if(r>0&&e[0].webkitGetAsEntry())for(t=0;t<r;t++)(i=e[t].webkitGetAsEntry())&&i.isDirectory&&n++;return n},initModal:function(t){var i=e("body");i.length&&t.appendTo(i)},isEmpty:function(t,i){return void 0===t||null===t||0===t.length||i&&""===e.trim(t)},isArray:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},ifSet:function(e,t,i){return i=i||"",t&&"object"==typeof t&&e in t?t[e]:i},cleanArray:function(e){return e instanceof Array||(e=[]),e.filter(function(e){return void 0!==e&&null!==e})},spliceArray:function(t,i,r){var n,a,o=0,s=[];if(!(t instanceof Array))return[];for(a=e.extend(!0,[],t),r&&a.reverse(),n=0;n<a.length;n++)n!==i&&(s[o]=a[n],o++);return r&&s.reverse(),s},getNum:function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!t.isIE(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}},dataURI2Blob:function(e){var i,r,n,a,o,s,l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,d=t.hasBlobSupport(),c=(d||l)&&window.atob&&window.ArrayBuffer&&window.Uint8Array;if(!c)return null;for(i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),r=new ArrayBuffer(i.length),n=new Uint8Array(r),a=0;a<i.length;a+=1)n[a]=i.charCodeAt(a);return o=e.split(",")[0].split(":")[1].split(";")[0],d?new Blob([t.hasArrayBufferViewSupport()?n:r],{type:o}):((s=new l).append(r),s.getBlob(o))},arrayBuffer2String:function(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);var t,i,r,n,a=Array.prototype.slice.apply(new Uint8Array(e)),o="",s=0;for(t=a.length;s<t;)switch((i=a[s++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:r=a[s++],o+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=a[s++],n=a[s++],o+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&n)<<0)}return o},isHtml:function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.childNodes,r=i.length;r--;)if(1===i[r].nodeType)return!0;return!1},isSvg:function(e){return e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,t,i){switch(e){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(e.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(e.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":i}}}},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(i,r,n){return t.isEmpty(i)||t.isEmpty(i[r])?n:e(i[r])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(100*Math.random())},htmlEncode:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,i){var r=t;return i?(e.each(i,function(e,t){"function"==typeof t&&(t=t()),r=r.split(e).join(t)}),r):r},cleanMemory:function(e){var i=e.is("img")?e.attr("src"):e.find("source").attr("src");t.objUrl.revokeObjectURL(i)},findFileName:function(e){var t=e.lastIndexOf("/");return-1===t&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,r=i.documentElement;r&&e&&!t.checkFullScreen()?r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()},moveArray:function(t,i,r,n){var a=e.extend(!0,[],t);if(n&&a.reverse(),r>=a.length)for(var o=r-a.length;1+o--;)a.push(void 0);return a.splice(r,0,a.splice(i,1)[0]),n&&a.reverse(),a},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");t.length||(t=e.closest(".kv-zoom-cache")),t.remove()},setOrientation:function(e,t){var i,r,n,a=new DataView(e),o=0,s=1;if(65496!==a.getUint16(o)||e.length<2)t&&t();else{for(o+=2,i=a.byteLength;o<i-2;)switch(r=a.getUint16(o),o+=2,r){case 65505:n=a.getUint16(o),i=n-o,o+=2;break;case 274:s=a.getUint16(o+6,!1),i=0}t&&t(s)}},validateOrientation:function(e,i){if(window.FileReader&&window.DataView){var r,n=new FileReader;n.onloadend=function(){r=n.result,t.setOrientation(r,i)},n.readAsArrayBuffer(e)}},adjustOrientedImage:function(e,t){var i,r,n;e.hasClass("is-portrait-gt4")&&(t?e.css({width:e.parent().height()}):(e.css({height:"auto",width:e.height()}),i=e.parent().offset().top,r=e.offset().top,n=i-r,e.css("margin-top",n)))},closeButton:function(e){return'<button type="button" class="'+(e=e?"close "+e:"close")+'" aria-label="Close">\n  <span aria-hidden="true">&times;</span>\n</button>'}},(i=function(i,r){this.$element=e(i),this.$parent=this.$element.parent(),this._validate()&&(this.isPreviewable=t.hasFileAPISupport(),this.isIE9=t.isIE(9),this.isIE10=t.isIE(10),(this.isPreviewable||this.isIE9)&&(this._init(r),this._listen()),this.$element.removeClass("file-loading"))}).prototype={constructor:i,_cleanup:function(){this.reader=null,this.formdata={},this.uploadCount=0,this.uploadStatus={},this.uploadLog=[],this.uploadAsyncCount=0,this.loadedImages=[],this.totalImagesCount=0,this.ajaxRequests=[],this.clearStack(),this.fileBatchCompleted=!0,this.isPreviewable||(this.showPreview=!1),this.isError=!1,this.ajaxAborted=!1,this.cancelling=!1},_init:function(i,r){var n,a,o,s,l=this,d=l.$element;l.options=i,e.each(i,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":l[e]=t.getNum(i);break;default:l[e]=i}}),l.rtl&&(s=l.previewZoomButtonIcons.prev,l.previewZoomButtonIcons.prev=l.previewZoomButtonIcons.next,l.previewZoomButtonIcons.next=s),r||l._cleanup(),l.$form=d.closest("form"),l._initTemplateDefaults(),l.uploadFileAttr=t.isEmpty(d.attr("name"))?"file_data":d.attr("name"),o=l._getLayoutTemplate("progress"),l.progressTemplate=o.replace("{class}",l.progressClass),l.progressCompleteTemplate=o.replace("{class}",l.progressCompleteClass),l.progressErrorTemplate=o.replace("{class}",l.progressErrorClass),l.dropZoneEnabled=t.hasDragDropSupport()&&l.dropZoneEnabled&&t.canAssignFilesToInput(),l.isDisabled=d.attr("disabled")||d.attr("readonly"),l.isDisabled&&d.attr("disabled",!0),l.isAjaxUpload=t.hasFileUploadSupport()&&!t.isEmpty(l.uploadUrl),l.isClickable=l.browseOnZoneClick&&l.showPreview&&(l.dropZoneEnabled||!t.isEmpty(l.defaultPreviewContent)),l.slug="function"==typeof i.slugCallback?i.slugCallback:l._slugDefault,l.mainTemplate=l.showCaption?l._getLayoutTemplate("main1"):l._getLayoutTemplate("main2"),l.captionTemplate=l._getLayoutTemplate("caption"),l.previewGenericTemplate=l._getPreviewTemplate("generic"),!l.imageCanvas&&l.resizeImage&&(l.maxImageWidth||l.maxImageHeight)&&(l.imageCanvas=document.createElement("canvas"),l.imageCanvasContext=l.imageCanvas.getContext("2d")),t.isEmpty(d.attr("id"))&&d.attr("id",t.uniqId()),l.namespace=".fileinput_"+d.attr("id").replace(/-/g,"_"),void 0===l.$container?l.$container=l._createContainer():l._refreshContainer(),a=l.$container,l.$dropZone=a.find(".file-drop-zone"),l.$progress=a.find(".kv-upload-progress"),l.$btnUpload=a.find(".fileinput-upload"),l.$captionContainer=t.getElement(i,"elCaptionContainer",a.find(".file-caption")),l.$caption=t.getElement(i,"elCaptionText",a.find(".file-caption-name")),t.isEmpty(l.msgPlaceholder)||(n=d.attr("multiple")?l.filePlural:l.fileSingle,l.$caption.attr("placeholder",l.msgPlaceholder.replace("{files}",n))),l.$captionIcon=l.$captionContainer.find(".file-caption-icon"),l.$previewContainer=t.getElement(i,"elPreviewContainer",a.find(".file-preview")),l.$preview=t.getElement(i,"elPreviewImage",a.find(".file-preview-thumbnails")),l.$previewStatus=t.getElement(i,"elPreviewStatus",a.find(".file-preview-status")),l.$errorContainer=t.getElement(i,"elErrorContainer",l.$previewContainer.find(".kv-fileinput-error")),l._validateDisabled(),t.isEmpty(l.msgErrorClass)||t.addCss(l.$errorContainer,l.msgErrorClass),r?l._errorsExist()||l.$errorContainer.hide():(l.$errorContainer.hide(),l.previewInitId="preview-"+t.uniqId(),l._initPreviewCache(),l._initPreview(!0),l._initPreviewActions(),l.$parent.hasClass("file-loading")&&(l.$container.insertBefore(l.$parent),l.$parent.remove())),l._setFileDropZoneTitle(),d.attr("disabled")&&l.disable(),l._initZoom(),l.hideThumbnailContent&&t.addCss(l.$preview,"hide-content")},_initTemplateDefaults:function(){var i,r,n,a,o,s,l,d,c,p,h,f,u,m,g,v,w,b,_,x,C,y,k,T,E,S,F,P,I,A,z,D,$,j,U,B,O,L,R=this;i='{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {upload}\n      {browse}\n    </div>\n</div>',r='{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',n='<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',o=t.closeButton("fileinput-remove"),a='<i class="glyphicon glyphicon-file"></i>',s='<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"></span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n</div>',l='<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',d='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',c='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',p='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"></div>',h='<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}</h5>\n      <span class="kv-zoom-title"></span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',f='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',u=" <samp>({sizeText})</samp>",m='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}</div>\n        <div class="file-size-info">{size}</div>\n    </div>\n    {progress}\n{indicator}\n{actions}\n</div>',g='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',v='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',w='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',b='<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',_='<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',x='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',C='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',k=(y='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"')+'><div class="kv-file-content">\n',T=y+' title="{caption}"><div class="kv-file-content">\n',E="</div>{footer}\n</div>\n",S='<div class="kv-preview-data file-preview-html" title="{caption}" {style}>{data}</div>\n',F='<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" {style}>\n',P='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly {style}>{data}</textarea>\n',I='<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}" {style}></iframe>',A='<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true" {style}></iframe>',z='<video class="kv-preview-data file-preview-video" controls {style}>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</video>\n",D='\x3c!--suppress ALL --\x3e<audio class="kv-preview-data file-preview-audio" controls {style}>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</audio>\n",$='<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash" {style}>\n',U='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf" {style}>\n',j='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}" {style}>\n<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n",B='<div class="kv-preview-data file-preview-other-frame" {style}>\n'+t.DEFAULT_PREVIEW+"\n</div>\n",O='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>',L={width:"100%",height:"100%","min-height":"480px"},R.defaults={layoutTemplates:{main1:i,main2:r,preview:n,close:o,fileIcon:a,caption:s,modalMain:p,modal:h,progress:f,size:u,footer:m,indicator:C,actions:g,actionDelete:v,actionUpload:w,actionDownload:b,actionZoom:_,actionDrag:x,btnDefault:l,btnLink:d,btnBrowse:c,zoomCache:O},previewMarkupTags:{tagBefore1:k,tagBefore2:T,tagAfter:E},previewContentTemplates:{generic:"{content}\n",html:S,image:F,text:P,office:I,gdocs:A,video:z,audio:D,flash:$,object:j,pdf:U,other:B},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"213px",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:L,text:L,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:L,other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(e,i){return t.compare(e,"image.*")&&!t.compare(e,/(tiff?|wmf)$/i)||t.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return t.compare(e,"text/html")||t.compare(i,/\.(htm|html)$/i)},office:function(e,i){return t.compare(e,/(word|excel|powerpoint|office)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(e,i){return t.compare(e,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(e,i){return t.compare(e,"text.*")||t.compare(i,/\.(xml|javascript)$/i)||t.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return t.compare(e,"video.*")&&(t.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return t.compare(e,"audio.*")&&(t.compare(i,/(ogg|mp3|mp?g|wav)$/i)||t.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return t.compare(e,"application/x-shockwave-flash",!0)||t.compare(i,/\.(swf)$/i)},pdf:function(e,i){return t.compare(e,"application/pdf",!0)||t.compare(i,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},e.each(R.defaults,function(t,i){"allowedPreviewTypes"!==t?R[t]=e.extend(!0,{},i,R[t]):void 0===R.allowedPreviewTypes&&(R.allowedPreviewTypes=i)}),R._initPreviewTemplates()},_initPreviewTemplates:function(){var i,r=this,n=r.defaults,a=r.previewMarkupTags,o=a.tagAfter;e.each(n.previewContentTemplates,function(e,n){t.isEmpty(r.previewTemplates[e])&&(i=a.tagBefore2,"generic"!==e&&"image"!==e&&"html"!==e&&"text"!==e||(i=a.tagBefore1),r.previewTemplates[e]=i+n+o)})},_initPreviewCache:function(){var i=this;i.previewCache={data:{},init:function(){var e=i.initialPreview;e.length>0&&!t.isArray(e)&&(e=e.split(i.initialPreviewDelimiter)),i.previewCache.data={content:e,config:i.initialPreviewConfig,tags:i.initialPreviewThumbTags}},count:function(){return i.previewCache.data&&i.previewCache.data.content?i.previewCache.data.content.length:0},get:function(r,n){var a,o,s,l,d,c,p,h="init_"+r,f=i.previewCache.data,u=f.config[r],m=f.content[r],g=i.previewInitId+"-"+h,v=t.ifSet("previewAsData",u,i.initialPreviewAsData),w=function(e,r,n,a,o,s,l,d,c){return d=" file-preview-initial "+t.SORT_CSS+(d?" "+d:""),i._generatePreviewTemplate(e,r,n,a,o,!1,null,d,s,l,c)};return m?(n=void 0===n||n,s=t.ifSet("type",u,i.initialPreviewFileType||"generic"),d=t.ifSet("filename",u,t.ifSet("caption",u)),c=t.ifSet("filetype",u,s),l=i.previewCache.footer(r,n,u&&u.size||null),p=t.ifSet("frameClass",u),a=v?w(s,m,d,c,g,l,h,p):w("generic",m,d,c,g,l,h,p,s).setTokens({content:f.content[r]}),f.tags.length&&f.tags[r]&&(a=t.replaceTags(a,f.tags[r])),t.isEmpty(u)||t.isEmpty(u.frameAttr)||((o=e(document.createElement("div")).html(a)).find(".file-preview-initial").attr(u.frameAttr),a=o.html(),o.remove()),a):""},add:function(e,r,n,a){var o,s=i.previewCache.data;return t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),a?(o=s.content.push(e)-1,s.config[o]=r,s.tags[o]=n):(o=e.length-1,s.content=e,s.config=r,s.tags=n),i.previewCache.data=s,o},set:function(e,r,n,a){var o,s=i.previewCache.data;if(e&&e.length&&(t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),e.filter(function(e){return null!==e}).length)){if(void 0===s.content&&(s.content=[]),void 0===s.config&&(s.config=[]),void 0===s.tags&&(s.tags=[]),a){for(o=0;o<e.length;o++)e[o]&&s.content.push(e[o]);for(o=0;o<r.length;o++)r[o]&&s.config.push(r[o]);for(o=0;o<n.length;o++)n[o]&&s.tags.push(n[o])}else s.content=e,s.config=r,s.tags=n;i.previewCache.data=s}},unset:function(e){var r=i.previewCache.count(),n=i.reversePreviewOrder;if(r){if(1===r)return i.previewCache.data.content=[],i.previewCache.data.config=[],i.previewCache.data.tags=[],i.initialPreview=[],i.initialPreviewConfig=[],void(i.initialPreviewThumbTags=[]);i.previewCache.data.content=t.spliceArray(i.previewCache.data.content,e,n),i.previewCache.data.config=t.spliceArray(i.previewCache.data.config,e,n),i.previewCache.data.tags=t.spliceArray(i.previewCache.data.tags,e,n)}},out:function(){var e,t,r,n="",a=i.previewCache.count();if(0===a)return{content:"",caption:""};for(t=0;t<a;t++)r=i.previewCache.get(t),n=i.reversePreviewOrder?r+n:n+r;return e=i._getMsgSelected(a),{content:n,caption:e}},footer:function(e,r,n){var a=i.previewCache.data||{};if(t.isEmpty(a.content))return"";(t.isEmpty(a.config)||t.isEmpty(a.config[e]))&&(a.config[e]={}),r=void 0===r||r;var o,s=a.config[e],l=t.ifSet("caption",s),d=t.ifSet("width",s,"auto"),c=t.ifSet("url",s,!1),p=t.ifSet("key",s,null),h=i.fileActionSettings,f=i.initialPreviewShowDelete||!1,u=s.downloadUrl||i.initialPreviewDownloadUrl||"",m=s.filename||s.caption||"",g=!!u,v=t.ifSet("showRemove",s,t.ifSet("showRemove",h,f)),w=t.ifSet("showDownload",s,t.ifSet("showDownload",h,g)),b=t.ifSet("showZoom",s,t.ifSet("showZoom",h,!0)),_=t.ifSet("showDrag",s,t.ifSet("showDrag",h,!0)),x=!1===c&&r;return w=w&&!1!==s.downloadUrl&&!!u,o=i._renderFileActions(!1,w,v,b,_,x,c,p,!0,u,m),i._getLayoutTemplate("footer").setTokens({progress:i._renderThumbProgress(),actions:o,caption:l,size:i._getSize(n),width:d,indicator:""})}},i.previewCache.init()},_handler:function(e,t,i){var r=this.namespace,n=t.split(" ").join(r+" ")+r;e&&e.length&&e.off(n).on(n,i)},_log:function(e){var t=this.$element.attr("id");t&&(e='"'+t+'": '+e),void 0!==window.console.log?window.console.log(e):window.alert(e)},_validate:function(){var e="file"===this.$element.attr("type");return e||this._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.'),e},_errorsExist:function(){var t,i=this.$errorContainer.find("li");return!!i.length||((t=e(document.createElement("div")).html(this.$errorContainer.html())).find(".kv-error-close").remove(),t.find("ul").remove(),!!e.trim(t.text()).length)},_errorHandler:function(e,t){var i=this,r=e.target.error,n=function(e){i._showError(e.replace("{name}",t))};r.code===r.NOT_FOUND_ERR?n(i.msgFileNotFound):r.code===r.SECURITY_ERR?n(i.msgFileSecured):r.code===r.NOT_READABLE_ERR?n(i.msgFileNotReadable):r.code===r.ABORT_ERR?n(i.msgFilePreviewAborted):n(i.msgFilePreviewError)},_addError:function(e){var t=this,i=t.$errorContainer;e&&i.length&&(i.html(t.errorCloseButton+e),t._handler(i.find(".kv-error-close"),"click",function(){setTimeout(function(){t.showPreview&&!t.getFrames().length&&t.clear(),i.fadeOut("slow")},10)}))},_setValidationError:function(e){e=(e?e+" ":"")+"has-error",this.$container.removeClass(e).addClass("has-error"),t.addCss(this.$captionContainer,"is-invalid")},_resetErrors:function(e){var t=this.$errorContainer;this.isError=!1,this.$container.removeClass("has-error"),this.$captionContainer.removeClass("is-invalid"),t.html(""),e?t.fadeOut("slow"):t.hide()},_showFolderError:function(e){var t,i=this.$errorContainer;e&&(this.isAjaxUpload||this._clearFileInput(),t=this.msgFoldersNotAllowed.replace("{n}",e),this._addError(t),this._setValidationError(),i.fadeIn(800),this._raise("filefoldererror",[e,t]))},_showUploadError:function(e,t,i){var r=this.$errorContainer,n=i||"fileuploaderror",a=t&&t.id?'<li data-file-id="'+t.id+'">'+e+"</li>":"<li>"+e+"</li>";return 0===r.find("ul").length?this._addError("<ul>"+a+"</ul>"):r.find("ul").append(a),r.fadeIn(800),this._raise(n,[t,e]),this._setValidationError("file-input-new"),!0},_showError:function(e,t,i){var r=this.$errorContainer,n=i||"fileerror";return(t=t||{}).reader=this.reader,this._addError(e),r.fadeIn(800),this._raise(n,[t,e]),this.isAjaxUpload||this._clearFileInput(),this._setValidationError("file-input-new"),this.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this.minFileCount>1?this.filePlural:this.fileSingle,i=this.msgFilesTooLess.replace("{n}",this.minFileCount).replace("{files}",t),r=this.$errorContainer;this._addError(i),this.isError=!0,this._updateFileDetails(0),r.fadeIn(800),this._raise("fileerror",[e,i]),this._clearFileInput(),this._setValidationError()},_parseError:function(t,i,r,n){var a,o=e.trim(r+""),s=void 0!==i.responseJSON&&void 0!==i.responseJSON.error?i.responseJSON.error:i.responseText;return this.cancelling&&this.msgUploadAborted&&(o=this.msgUploadAborted),this.showAjaxErrorDetails&&s&&(s=e.trim(s.replace(/\n\s*\n/g,"\n")),a=s.length?"<pre>"+s+"</pre>":"",o+=o?a:s),o||(o=this.msgAjaxError.replace("{operation}",t)),this.cancelling=!1,n?"<b>"+n+": </b>"+o:o},_parseFileType:function(e,i){var r,n,a,o,s=this.allowedPreviewTypes||[];if("application/text-plain"===e)return"text";for(o=0;o<s.length;o++)if(a=s[o],r=this.fileTypeSettings[a],n=r(e,i)?a:"",!t.isEmpty(n))return n;return"other"},_getPreviewIcon:function(t){var i,r=this,n=null;return t&&t.indexOf(".")>-1&&(i=t.split(".").pop(),r.previewFileIconSettings&&(n=r.previewFileIconSettings[i]||r.previewFileIconSettings[i.toLowerCase()]||null),r.previewFileExtSettings&&e.each(r.previewFileExtSettings,function(e,t){r.previewFileIconSettings[e]&&t(i)&&(n=r.previewFileIconSettings[e])})),n},_parseFilePreviewIcon:function(e,t){var i=this._getPreviewIcon(t)||this.previewFileIcon,r=e;return r.indexOf("{previewFileIcon}")>-1&&(r=r.setTokens({previewFileIconClass:this.previewFileIconClass,previewFileIcon:i})),r},_raise:function(t,i){var r=e.Event(t);if(void 0!==i?this.$element.trigger(r,i):this.$element.trigger(r),r.isDefaultPrevented()||!1===r.result)return!1;switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:this.ajaxAborted||(this.ajaxAborted=r.result)}return!0},_listenFullScreen:function(e){var t,i,r=this.$modal;r&&r.length&&(t=r&&r.find(".btn-fullscreen"),i=r&&r.find(".btn-borderless"),t.length&&i.length&&(t.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),e?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true"),r.hasClass("file-zoom-fullscreen")?this._maximizeZoomDialog():e?this._maximizeZoomDialog():i.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var i,r=this,n=r.$element,a=r.$form,o=r.$container;r._handler(n,"change",e.proxy(r._change,r)),r.showBrowse&&r._handler(r.$btnFile,"click",e.proxy(r._browse,r)),r._handler(o.find(".fileinput-remove:not([disabled])"),"click",e.proxy(r.clear,r)),r._handler(o.find(".fileinput-cancel"),"click",e.proxy(r.cancel,r)),r._initDragDrop(),r._handler(a,"reset",e.proxy(r.clear,r)),r.isAjaxUpload||r._handler(a,"submit",e.proxy(r._submitForm,r)),r._handler(r.$container.find(".fileinput-upload"),"click",e.proxy(r._uploadClick,r)),r._handler(e(window),"resize",function(){r._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),i="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",r._handler(e(document),i,function(){r._listenFullScreen(t.checkFullScreen())}),r._autoFitContent(),r._initClickable()},_autoFitContent:function(){var t,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=this,n=i<400?r.previewSettingsSmall||r.defaults.previewSettingsSmall:r.previewSettings||r.defaults.previewSettings;e.each(n,function(e,i){t=".file-preview-frame .file-preview-"+e,r.$preview.find(t+".kv-preview-data,"+t+" .kv-preview-data").css(i)})},_initClickable:function(){var i,r=this;r.isClickable&&(i=r.isAjaxUpload?r.$dropZone:r.$preview.find(".file-default-preview"),t.addCss(i,"clickable"),i.attr("tabindex",-1),r._handler(i,"click",function(t){var n=e(t.target);e(r.elErrorContainer+":visible").length||n.parents(".file-preview-thumbnails").length&&!n.parents(".file-default-preview").length||(r.$element.trigger("click"),i.blur())}))},_scanDroppedItems:function(e,t,i){i=i||"";var r,n,a,o=this,s=function(e){o._log("Error scanning dropped files!"),o._log(e)};e.isFile?e.file(function(e){t.push(e)},s):e.isDirectory&&(n=e.createReader(),(a=function(){n.readEntries(function(n){if(n&&n.length>0){for(r=0;r<n.length;r++)o._scanDroppedItems(n[r],t,i+e.name+"/");a()}return null},s)})())},_initDragDrop:function(){var t=this.$dropZone;this.dropZoneEnabled&&this.showPreview&&(this._handler(t,"dragenter dragover",e.proxy(this._zoneDragEnter,this)),this._handler(t,"dragleave",e.proxy(this._zoneDragLeave,this)),this._handler(t,"drop",e.proxy(this._zoneDrop,this)),this._handler(e(document),"dragenter dragover drop",this._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(i){var r=e.inArray("Files",i.originalEvent.dataTransfer.types)>-1;if(this._zoneDragDropInit(i),this.isDisabled||!r)return i.originalEvent.dataTransfer.effectAllowed="none",void(i.originalEvent.dataTransfer.dropEffect="none");t.addCss(this.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){this._zoneDragDropInit(e),this.isDisabled||this.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var i,r=this,n=r.$element,a=e.originalEvent.dataTransfer,o=a.files,s=a.items,l=t.getDragDropFolders(s),d=function(){r.isAjaxUpload?r._change(e,o):(r.changeTriggered=!0,n.get(0).files=o,setTimeout(function(){r.changeTriggered=!1,n.trigger("change"+r.namespace)},10)),r.$dropZone.removeClass("file-highlighted")};if(e.preventDefault(),!r.isDisabled&&!t.isEmpty(o))if(l>0){if(!r.isAjaxUpload)return void r._showFolderError(l);for(o=[],i=0;i<s.length;i++){var c=s[i].webkitGetAsEntry();c&&r._scanDroppedItems(c,o)}setTimeout(function(){d()},500)}else d()},_uploadClick:function(e){var i,r=this.$container.find(".fileinput-upload"),n=!r.hasClass("disabled")&&t.isEmpty(r.attr("disabled"));e&&e.isDefaultPrevented()||(this.isAjaxUpload?(e.preventDefault(),n&&this.upload()):n&&"submit"!==r.attr("type")&&((i=r.closest("form")).length&&i.trigger("submit"),e.preventDefault()))},_submitForm:function(){return this._isFileSelectionValid()&&!this._abort({})},_clearPreview:function(){var i=this.$preview,r=this.showUploadedThumbs?this.getFrames(":not(.file-preview-success)"):this.getFrames();r.each(function(){var r=e(this);r.remove(),t.cleanZoomCache(i.find("#zoom-"+r.attr("id")))}),this.getFrames().length&&this.showPreview||this._resetUpload(),this._validateDefaultPreview()},_initSortable:function(){var i,r=this,n=r.$preview,a="."+t.SORT_CSS,o=r.reversePreviewOrder;window.KvSortable&&0!==n.find(a).length&&(i={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:a,onSort:function(i){var n=i.oldIndex,a=i.newIndex,s=0;r.initialPreview=t.moveArray(r.initialPreview,n,a,o),r.initialPreviewConfig=t.moveArray(r.initialPreviewConfig,n,a,o),r.previewCache.init(),r.getFrames(".file-preview-initial").each(function(){e(this).attr("data-fileindex","init_"+s),s++}),r._raise("filesorted",{previewId:e(i.item).attr("id"),oldIndex:n,newIndex:a,stack:r.initialPreviewConfig})}},n.data("kvsortable")&&n.kvsortable("destroy"),e.extend(!0,i,r.fileActionSettings.dragSettings),n.kvsortable(i))},_setPreviewContent:function(e){this.$preview.html(e),this._autoFitContent()},_initPreview:function(e){var i,r=this.initialCaption||"";if(!this.previewCache.count())return this._clearPreview(),void(e?this._setCaption(r):this._initCaption());i=this.previewCache.out(),r=e&&this.initialCaption?this.initialCaption:i.caption,this._setPreviewContent(i.content),this._setInitThumbAttr(),this._setCaption(r),this._initSortable(),t.isEmpty(i.content)||this.$container.removeClass("file-input-new")},_getZoomButton:function(e){var t=this.previewZoomButtonIcons[e],i=this.previewZoomButtonClasses[e],r=' title="'+(this.previewZoomButtonTitles[e]||"")+'" ',n=r+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(n+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+i+" btn-"+e+'"'+n+">"+t+"</button>"},_getModalContent:function(){return this._getLayoutTemplate("modal").setTokens({rtl:this.rtl?" kv-rtl":"",zoomFrameClass:this.frameClass,heading:this.msgZoomModalHeading,prev:this._getZoomButton("prev"),next:this._getZoomButton("next"),toggleheader:this._getZoomButton("toggleheader"),fullscreen:this._getZoomButton("fullscreen"),borderless:this._getZoomButton("borderless"),close:this._getZoomButton("close")})},_listenModalEvent:function(e){var i=this,r=i.$modal;r.on(e+".bs.modal",function(n){var a=r.find(".btn-fullscreen"),o=r.find(".btn-borderless");i._raise("filezoom"+e,function(e){return{sourceEvent:e,previewId:r.data("previewId"),modal:r}}(n)),"shown"===e&&(o.removeClass("active").attr("aria-pressed","false"),a.removeClass("active").attr("aria-pressed","false"),r.hasClass("file-zoom-fullscreen")&&(i._maximizeZoomDialog(),t.checkFullScreen()?a.addClass("active").attr("aria-pressed","true"):o.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var i,r=this,n=r._getLayoutTemplate("modalMain"),a="#"+t.MODAL_ID;r.showPreview&&(r.$modal=e(a),r.$modal&&r.$modal.length||(i=e(document.createElement("div")).html(n).insertAfter(r.$container),r.$modal=e(a).insertBefore(i),i.remove()),t.initModal(r.$modal),r.$modal.html(r._getModalContent()),e.each(t.MODAL_EVENTS,function(e,t){r._listenModalEvent(t)}))},_initZoomButtons:function(){var t,i,r=this.$modal.data("previewId")||"",n=this.getFrames().toArray(),a=n.length,o=this.$modal.find(".btn-prev"),s=this.$modal.find(".btn-next");if(n.length<2)return o.hide(),void s.hide();o.show(),s.show(),a&&(t=e(n[0]),i=e(n[a-1]),o.removeAttr("disabled"),s.removeAttr("disabled"),t.length&&t.attr("id")===r&&o.attr("disabled",!0),i.length&&i.attr("id")===r&&s.attr("disabled",!0))},_maximizeZoomDialog:function(){var t=this.$modal,i=t.find(".modal-header:visible"),r=t.find(".modal-footer:visible"),n=t.find(".modal-body"),a=e(window).height(),o=0;t.addClass("file-zoom-fullscreen"),i&&i.length&&(a-=i.outerHeight(!0)),r&&r.length&&(a-=r.outerHeight(!0)),n&&n.length&&(o=n.outerHeight(!0)-n.height(),a-=o),t.find(".kv-zoom-body").height(a)},_resizeZoomDialog:function(e){var i=this.$modal,r=i.find(".btn-fullscreen"),n=i.find(".btn-borderless");if(i.hasClass("file-zoom-fullscreen"))t.toggleFullScreen(!1),e?r.hasClass("active")||(i.removeClass("file-zoom-fullscreen"),this._resizeZoomDialog(!0),n.hasClass("active")&&n.removeClass("active").attr("aria-pressed","false")):r.hasClass("active")?r.removeClass("active").attr("aria-pressed","false"):(i.removeClass("file-zoom-fullscreen"),this.$modal.find(".kv-zoom-body").css("height",this.zoomModalHeight));else{if(!e)return void this._maximizeZoomDialog();t.toggleFullScreen(!0)}i.focus()},_setZoomContent:function(i,r){var n,a,o,s,l,d,c,p,h,f,u=this,m=i.attr("id"),g=u.$modal,v=g.find(".btn-prev"),w=g.find(".btn-next"),b=g.find(".btn-fullscreen"),_=g.find(".btn-borderless"),x=g.find(".btn-toggleheader"),C=u.$preview.find("#zoom-"+m);a=C.attr("data-template")||"generic",n=C.find(".kv-file-content"),o=n.length?n.html():"",h=i.data("caption")||"",f=i.data("size")||"",s=h+" "+f,g.find(".kv-zoom-title").attr("title",e("<div/>").html(s).text()).html(s),l=g.find(".kv-zoom-body"),g.removeClass("kv-single-content"),r?(p=l.addClass("file-thumb-loading").clone().insertAfter(l),l.html(o).hide(),p.fadeOut("fast",function(){l.fadeIn("fast",function(){l.removeClass("file-thumb-loading")}),p.remove()})):l.html(o),(c=u.previewZoomSettings[a])&&(d=l.find(".kv-preview-data"),t.addCss(d,"file-zoom-detail"),e.each(c,function(e,t){d.css(e,t),(d.attr("width")&&"width"===e||d.attr("height")&&"height"===e)&&d.removeAttr(e)})),g.data("previewId",m);var y=l.find("img");y.length&&t.adjustOrientedImage(y,!0),u._handler(v,"click",function(){u._zoomSlideShow("prev",m)}),u._handler(w,"click",function(){u._zoomSlideShow("next",m)}),u._handler(b,"click",function(){u._resizeZoomDialog(!0)}),u._handler(_,"click",function(){u._resizeZoomDialog(!1)}),u._handler(x,"click",function(){var e,t=g.find(".modal-header"),i=g.find(".modal-body .floating-buttons"),r=t.find(".kv-zoom-actions"),n=function(e){var i=u.$modal.find(".kv-zoom-body"),r=u.zoomModalHeight;g.hasClass("file-zoom-fullscreen")&&(r=i.outerHeight(!0),e||(r-=t.outerHeight(!0))),i.css("height",e?r+e:r)};t.is(":visible")?(e=t.outerHeight(!0),t.slideUp("slow",function(){r.find(".btn").appendTo(i),n(e)})):(i.find(".btn").appendTo(r),t.slideDown("slow",function(){n()})),g.focus()}),u._handler(g,"keydown",function(e){var t=e.which||e.keyCode;37!==t||v.attr("disabled")||u._zoomSlideShow("prev",m),39!==t||w.attr("disabled")||u._zoomSlideShow("next",m)})},_zoomPreview:function(e){var i,r=this.$modal;if(!e.length)throw"Cannot zoom to detailed preview!";t.initModal(r),r.html(this._getModalContent()),i=e.closest(t.FRAMES),this._setZoomContent(i),r.modal("show"),this._initZoomButtons()},_zoomSlideShow:function(t,i){var r,n,a,o=this.$modal.find(".kv-zoom-actions .btn-"+t),s=this.getFrames().toArray(),l=s.length;if(!o.attr("disabled")){for(n=0;n<l;n++)if(e(s[n]).attr("id")===i){a="prev"===t?n-1:n+1;break}a<0||a>=l||!s[a]||((r=e(s[a])).length&&this._setZoomContent(r,!0),this._initZoomButtons(),this._raise("filezoom"+t,{previewId:i,modal:this.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var i=e(this);t._handler(i,"click",function(){t._zoomPreview(i)})})},_clearObjects:function(t){t.find("video audio").each(function(){this.pause(),e(this).remove()}),t.find("img object div").each(function(){e(this).remove()})},_clearFileInput:function(){var i,r,n,a=this.$element;t.isEmpty(a.files)&&t.isEmpty(a.val())||(a.files=null,i=a.closest("form"),r=e(document.createElement("form")),n=e(document.createElement("div")),a.before(n),i.length?i.after(r):n.after(r),r.append(a).trigger("reset"),n.before(a).remove(),r.remove())},_resetUpload:function(){this.uploadCache={content:[],config:[],tags:[],append:!0},this.uploadCount=0,this.uploadStatus={},this.uploadLog=[],this.uploadAsyncCount=0,this.loadedImages=[],this.totalImagesCount=0,this.$btnUpload.removeAttr("disabled"),this._setProgress(0),this.$progress.hide(),this._resetErrors(!1),this.ajaxAborted=!1,this.ajaxRequests=[],this._resetCanvas(),this.cacheInitialPreview={},this.overwriteInitial&&(this.initialPreview=[],this.initialPreviewConfig=[],this.initialPreviewThumbTags=[],this.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){this.canvas&&this.imageCanvasContext&&this.imageCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)},_hasInitialPreview:function(){return!this.overwriteInitial&&this.previewCache.count()},_resetPreview:function(){var e,t;this.previewCache.count()?(e=this.previewCache.out(),this._setPreviewContent(e.content),this._setInitThumbAttr(),t=this.initialCaption?this.initialCaption:e.caption,this._setCaption(t)):(this._clearPreview(),this._initCaption()),this.showPreview&&(this._initZoom(),this._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){this.showPreview&&!t.isEmpty(this.defaultPreviewContent)&&(this._setPreviewContent('<div class="file-default-preview">'+this.defaultPreviewContent+"</div>"),this.$container.removeClass("file-input-new"),this._initClickable())},_resetPreviewThumbs:function(e){var t;if(e)return this._clearPreview(),void this.clearStack();this._hasInitialPreview()?(t=this.previewCache.out(),this._setPreviewContent(t.content),this._setInitThumbAttr(),this._setCaption(t.caption),this._initPreviewActions()):this._clearPreview()},_getLayoutTemplate:function(e){var i=this.layoutTemplates[e];return t.isEmpty(this.customLayoutTags)?i:t.replaceTags(i,this.customLayoutTags)},_getPreviewTemplate:function(e){var i=this.previewTemplates[e];return t.isEmpty(this.customPreviewTags)?i:t.replaceTags(i,this.customPreviewTags)},_getOutData:function(e,t,i){return e=e||{},t=t||{},i=i||this.filestack.slice(0)||{},{form:this.formdata,files:i,filenames:this.filenames,filescount:this.getFilesCount(),extra:this._getExtraData(),response:t,reader:this.reader,jqXHR:e}},_getMsgSelected:function(e){var t=1===e?this.fileSingle:this.filePlural;return e>0?this.msgSelected.replace("{n}",e).replace("{files}",t):this.msgNoFilesSelected},_getFrame:function(t){var i=e("#"+t);return i.length?i:(this._log('Invalid thumb frame with id: "'+t+'".'),null)},_getThumbs:function(e){return e=e||"",this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this.uploadExtraData;return"function"==typeof this.uploadExtraData&&(i=this.uploadExtraData(e,t)),i},_initXhr:function(e,t,i){var r=this;return e.upload&&e.upload.addEventListener("progress",function(e){var n=0,a=e.total,o=e.loaded||e.position;e.lengthComputable&&(n=Math.floor(o/a*100)),t?r._setAsyncUploadStatus(t,n,i):r._setProgress(n)},!1),e},_initAjaxSettings:function(){this._ajaxSettings=e.extend(!0,{},this.ajaxSettings),this._ajaxDeleteSettings=e.extend(!0,{},this.ajaxDeleteSettings)},_mergeAjaxCallback:function(e,t,i){var r,n=this._ajaxSettings,a=this.mergeAjaxCallbacks;"delete"===i&&(n=this._ajaxDeleteSettings,a=this.mergeAjaxDeleteCallbacks),r=n[e],n[e]=a&&"function"==typeof r?"before"===a?function(){r.apply(this,arguments),t.apply(this,arguments)}:function(){t.apply(this,arguments),r.apply(this,arguments)}:t},_ajaxSubmit:function(t,i,r,n,a,o){var s,l=this;l._raise("filepreajax",[a,o])&&(l._uploadExtra(a,o),l._initAjaxSettings(),l._mergeAjaxCallback("beforeSend",t),l._mergeAjaxCallback("success",i),l._mergeAjaxCallback("complete",r),l._mergeAjaxCallback("error",n),s=e.extend(!0,{},{xhr:function(){var t=e.ajaxSettings.xhr();return l._initXhr(t,a,l.getFileStack().length)},url:o&&l.uploadUrlThumb?l.uploadUrlThumb:l.uploadUrl,type:"POST",dataType:"json",data:l.formdata,cache:!1,processData:!1,contentType:!1},l._ajaxSettings),l.ajaxRequests.push(e.ajax(s)))},_mergeArray:function(e,i){var r=t.cleanArray(this[e]),n=t.cleanArray(i);this[e]=r.concat(n)},_initUploadSuccess:function(i,r,n){var a,o,s,l,d,c,p,h,f,u=this;u.showPreview&&"object"==typeof i&&!e.isEmptyObject(i)&&void 0!==i.initialPreview&&i.initialPreview.length>0&&(u.hasInitData=!0,c=i.initialPreview||[],p=i.initialPreviewConfig||[],h=i.initialPreviewThumbTags||[],a=void 0===i.append||i.append,c.length>0&&!t.isArray(c)&&(c=c.split(u.initialPreviewDelimiter)),u._mergeArray("initialPreview",c),u._mergeArray("initialPreviewConfig",p),u._mergeArray("initialPreviewThumbTags",h),void 0!==r?n?(f=r.attr("data-fileindex"),u.uploadCache.content[f]=c[0],u.uploadCache.config[f]=p[0]||[],u.uploadCache.tags[f]=h[0]||[],u.uploadCache.append=a):(s=u.previewCache.add(c,p[0],h[0],a),o=u.previewCache.get(s,!1),l=e(document.createElement("div")).html(o).hide().insertAfter(r),(d=l.find(".kv-zoom-cache"))&&d.length&&d.insertAfter(r),r.fadeOut("slow",function(){var e=l.find(".file-preview-frame");e&&e.length&&e.insertBefore(r).fadeIn("slow").css("display:inline-block"),u._initPreviewActions(),u._clearFileInput(),t.cleanZoomCache(u.$preview.find("#zoom-"+r.attr("id"))),r.remove(),l.remove(),u._initSortable()})):(u.previewCache.set(c,p,h,a),u._initPreview(),u._initPreviewActions()))},_initSuccessThumbs:function(){var i=this;i.showPreview&&i._getThumbs(t.FRAMES+".file-preview-success").each(function(){var r=e(this),n=i.$preview,a=r.find(".kv-file-remove");a.removeAttr("disabled"),i._handler(a,"click",function(){var e=r.attr("id"),a=i._raise("filesuccessremove",[e,r.attr("data-fileindex")]);t.cleanMemory(r),!1!==a&&r.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+e)),r.remove(),i.getFrames().length||i.reset()})})})},_checkAsyncComplete:function(){var t,i;for(i=0;i<this.filestack.length;i++)if(this.filestack[i]&&(t=this.previewInitId+"-"+i,-1===e.inArray(t,this.uploadLog)))return!1;return this.uploadAsyncCount===this.uploadLog.length},_uploadExtra:function(t,i){var r=this,n=r._getExtraData(t,i);0!==n.length&&e.each(n,function(e,t){r.formdata.append(e,t)})},_uploadSingle:function(i,r){var n,a,o,s,l,d,c,p,h,f,u,m=this,g=m.getFileStack().length,v=new FormData,w=m.previewInitId+"-"+i,b=m.filestack.length>0||!e.isEmptyObject(m.uploadExtraData),_=e("#"+w).find(".file-thumb-progress"),x={id:w,index:i};m.formdata=v,m.showPreview&&(a=e("#"+w+":not(.file-preview-initial)"),s=a.find(".kv-file-upload"),l=a.find(".kv-file-remove"),_.show()),0===g||!b||s&&s.hasClass("disabled")||m._abort(x)||(u=function(e,t){d||m.updateStack(e,void 0),m.uploadLog.push(t),m._checkAsyncComplete()&&(m.fileBatchCompleted=!0)},o=function(){var e,i,r,n=m.uploadCache,a=0,o=m.cacheInitialPreview;m.fileBatchCompleted&&(o&&o.content&&(a=o.content.length),setTimeout(function(){var s=0===m.getFileStack(!0).length;if(m.showPreview){if(m.previewCache.set(n.content,n.config,n.tags,n.append),a){for(i=0;i<n.content.length;i++)r=i+a,o.content[r]=n.content[i],o.config.length&&(o.config[r]=n.config[i]),o.tags.length&&(o.tags[r]=n.tags[i]);m.initialPreview=t.cleanArray(o.content),m.initialPreviewConfig=t.cleanArray(o.config),m.initialPreviewThumbTags=t.cleanArray(o.tags)}else m.initialPreview=n.content,m.initialPreviewConfig=n.config,m.initialPreviewThumbTags=n.tags;m.cacheInitialPreview={},m.hasInitData&&(m._initPreview(),m._initPreviewActions())}m.unlock(s),s&&m._clearFileInput(),e=m.$preview.find(".file-preview-initial"),m.uploadAsync&&e.length&&(t.addCss(e,t.SORT_CSS),m._initSortable()),m._raise("filebatchuploadcomplete",[m.filestack,m._getExtraData()]),m.uploadCount=0,m.uploadStatus={},m.uploadLog=[],m._setProgress(101),m.ajaxAborted=!1},100))},c=function(o){n=m._getOutData(o),m.fileBatchCompleted=!1,r||(m.ajaxAborted=!1),m.showPreview&&(a.hasClass("file-preview-success")||(m._setThumbStatus(a,"Loading"),t.addCss(a,"file-uploading")),s.attr("disabled",!0),l.attr("disabled",!0)),r||m.lock(),m._raise("filepreupload",[n,w,i]),e.extend(!0,x,n),m._abort(x)&&(o.abort(),r||(m._setThumbStatus(a,"New"),a.removeClass("file-uploading"),s.removeAttr("disabled"),l.removeAttr("disabled"),m.unlock()),m._setProgressCancelled())},p=function(o,l,c){var p=m.showPreview&&a.attr("id")?a.attr("id"):w;n=m._getOutData(c,o),e.extend(!0,x,n),setTimeout(function(){t.isEmpty(o)||t.isEmpty(o.error)?(m.showPreview&&(m._setThumbStatus(a,"Success"),s.hide(),m._initUploadSuccess(o,a,r),m._setProgress(101,_)),m._raise("fileuploaded",[n,p,i]),r?u(i,p):m.updateStack(i,void 0)):(d=!0,m._showUploadError(o.error,x),m._setPreviewError(a,i,m.filestack[i],m.retryErrorUploads),m.retryErrorUploads||s.hide(),r&&u(i,p),m._setProgress(101,e("#"+p).find(".file-thumb-progress"),m.msgUploadError))},100)},h=function(){setTimeout(function(){m.showPreview&&(s.removeAttr("disabled"),l.removeAttr("disabled"),a.removeClass("file-uploading")),r?o():(m.unlock(!1),m._clearFileInput()),m._initSuccessThumbs()},100)},f=function(t,n,o){var l=m.ajaxOperations.uploadThumb,c=m._parseError(l,t,o,r&&m.filestack[i].name?m.filestack[i].name:null);d=!0,setTimeout(function(){r&&u(i,w),m.uploadStatus[w]=100,m._setPreviewError(a,i,m.filestack[i],m.retryErrorUploads),m.retryErrorUploads||s.hide(),e.extend(!0,x,m._getOutData(t)),m._setProgress(101,_,m.msgAjaxProgressError.replace("{operation}",l)),m._setProgress(101,e("#"+w).find(".file-thumb-progress"),m.msgUploadError),m._showUploadError(c,x)},100)},v.append(m.uploadFileAttr,m.filestack[i],m.filenames[i]),v.append("file_id",i),m._ajaxSubmit(c,p,h,f,w,i))},_uploadBatch:function(){var i,r,n,a,o,s=this,l=s.filestack,d=l.length,c=s.filestack.length>0||!e.isEmptyObject(s.uploadExtraData);s.formdata=new FormData,0!==d&&c&&!s._abort({})&&(o=function(){e.each(l,function(e){s.updateStack(e,void 0)}),s._clearFileInput()},i=function(i){s.lock();var r=s._getOutData(i);s.ajaxAborted=!1,s.showPreview&&s._getThumbs().each(function(){var i=e(this),r=i.find(".kv-file-upload"),n=i.find(".kv-file-remove");i.hasClass("file-preview-success")||(s._setThumbStatus(i,"Loading"),t.addCss(i,"file-uploading")),r.attr("disabled",!0),n.attr("disabled",!0)}),s._raise("filebatchpreupload",[r]),s._abort(r)&&(i.abort(),s._getThumbs().each(function(){var t=e(this),i=t.find(".kv-file-upload"),r=t.find(".kv-file-remove");t.hasClass("file-preview-loading")&&(s._setThumbStatus(t,"New"),t.removeClass("file-uploading")),i.removeAttr("disabled"),r.removeAttr("disabled")}),s._setProgressCancelled())},r=function(i,r,n){var a=s._getOutData(n,i),l=0,d=s._getThumbs(":not(.file-preview-success)"),c=t.isEmpty(i)||t.isEmpty(i.errorkeys)?[]:i.errorkeys;t.isEmpty(i)||t.isEmpty(i.error)?(s._raise("filebatchuploadsuccess",[a]),o(),s.showPreview?(d.each(function(){var t=e(this);s._setThumbStatus(t,"Success"),t.removeClass("file-uploading"),t.find(".kv-file-upload").hide().removeAttr("disabled")}),s._initUploadSuccess(i)):s.reset(),s._setProgress(101)):(s.showPreview&&(d.each(function(){var t=e(this),i=t.attr("data-fileindex");t.removeClass("file-uploading"),t.find(".kv-file-upload").removeAttr("disabled"),t.find(".kv-file-remove").removeAttr("disabled"),0===c.length||-1!==e.inArray(l,c)?(s._setPreviewError(t,i,s.filestack[i],s.retryErrorUploads),s.retryErrorUploads||(t.find(".kv-file-upload").hide(),s.updateStack(i,void 0))):(t.find(".kv-file-upload").hide(),s._setThumbStatus(t,"Success"),s.updateStack(i,void 0)),t.hasClass("file-preview-error")&&!s.retryErrorUploads||l++}),s._initUploadSuccess(i)),s._showUploadError(i.error,a,"filebatchuploaderror"),s._setProgress(101,s.$progress,s.msgUploadError))},a=function(){s.unlock(),s._initSuccessThumbs(),s._clearFileInput(),s._raise("filebatchuploadcomplete",[s.filestack,s._getExtraData()])},n=function(t,i,r){var n=s._getOutData(t),a=s.ajaxOperations.uploadBatch,o=s._parseError(a,t,r);s._showUploadError(o,n,"filebatchuploaderror"),s.uploadFileCount=d-1,s.showPreview&&(s._getThumbs().each(function(){var t=e(this),i=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==s.filestack[i]&&s._setPreviewError(t)}),s._getThumbs().removeClass("file-uploading"),s._getThumbs(" .kv-file-upload").removeAttr("disabled"),s._getThumbs(" .kv-file-delete").removeAttr("disabled"),s._setProgress(101,s.$progress,s.msgAjaxProgressError.replace("{operation}",a)))},e.each(l,function(e,i){t.isEmpty(l[e])||s.formdata.append(s.uploadFileAttr,i,s.filenames[e])}),s._ajaxSubmit(i,r,a,n))},_uploadExtraOnly:function(){var e,i,r,n,a=this,o={};a.formdata=new FormData,a._abort(o)||(e=function(e){a.lock();var t=a._getOutData(e);a._raise("filebatchpreupload",[t]),a._setProgress(50),o.data=t,o.xhr=e,a._abort(o)&&(e.abort(),a._setProgressCancelled())},i=function(e,i,r){var n=a._getOutData(r,e);t.isEmpty(e)||t.isEmpty(e.error)?(a._raise("filebatchuploadsuccess",[n]),a._clearFileInput(),a._initUploadSuccess(e),a._setProgress(101)):a._showUploadError(e.error,n,"filebatchuploaderror")},r=function(){a.unlock(),a._clearFileInput(),a._raise("filebatchuploadcomplete",[a.filestack,a._getExtraData()])},n=function(e,t,i){var r=a._getOutData(e),n=a.ajaxOperations.uploadExtra,s=a._parseError(n,e,i);o.data=r,a._showUploadError(s,r,"filebatchuploaderror"),a._setProgress(101,a.$progress,a.msgAjaxProgressError.replace("{operation}",n))},a._ajaxSubmit(e,i,r,n))},_deleteFileIndex:function(i){var r=i.attr("data-fileindex"),n=this.reversePreviewOrder;"init_"===r.substring(0,5)&&(r=parseInt(r.replace("init_","")),this.initialPreview=t.spliceArray(this.initialPreview,r,n),this.initialPreviewConfig=t.spliceArray(this.initialPreviewConfig,r,n),this.initialPreviewThumbTags=t.spliceArray(this.initialPreviewThumbTags,r,n),this.getFrames().each(function(){var t=e(this),i=t.attr("data-fileindex");"init_"===i.substring(0,5)&&(i=parseInt(i.replace("init_","")))>r&&(i--,t.attr("data-fileindex","init_"+i))}),this.uploadAsync&&(this.cacheInitialPreview=this.getPreview()))},_initFileActions:function(){var i=this,r=i.$preview;i.showPreview&&(i._initZoomButton(),i.getFrames(" .kv-file-remove").each(function(){var n,a,o,s=e(this),l=s.closest(t.FRAMES),d=l.attr("id"),c=l.attr("data-fileindex");i._handler(s,"click",function(){if(!1===i._raise("filepreremove",[d,c])||!i._validateMinCount())return!1;n=l.hasClass("file-preview-error"),t.cleanMemory(l),l.fadeOut("slow",function(){t.cleanZoomCache(r.find("#zoom-"+d)),i.updateStack(c,void 0),i._clearObjects(l),l.remove(),d&&n&&i.$errorContainer.find('li[data-file-id="'+d+'"]').fadeOut("fast",function(){e(this).remove(),i._errorsExist()||i._resetErrors()}),i._clearFileInput();var s=i.getFileStack(!0),p=i.previewCache.count(),h=s.length,f=i.showPreview&&i.getFrames().length;0!==h||0!==p||f?(o=(a=p+h)>1?i._getMsgSelected(a):s[0]?i._getFileNames()[0]:"",i._setCaption(o)):i.reset(),i._raise("fileremoved",[d,c])})})}),i.getFrames(" .kv-file-upload").each(function(){var r=e(this);i._handler(r,"click",function(){var e=r.closest(t.FRAMES),n=e.attr("data-fileindex");i.$progress.hide(),e.hasClass("file-preview-error")&&!i.retryErrorUploads||i._uploadSingle(n,!1)})}))},_initPreviewActions:function(){var i=this,r=i.$preview,n=i.deleteExtraData||{},a=t.FRAMES+" .kv-file-remove",o=i.fileActionSettings,s=o.removeClass,l=o.removeErrorClass,d=function(){var e=i.isAjaxUpload?i.previewCache.count():i.$element.get(0).files.length;r.find(t.FRAMES).length||e||(i._setCaption(""),i.reset(),i.initialCaption="")};i._initZoomButton(),r.find(a).each(function(){var a,o,c,p=e(this),h=p.data("url")||i.deleteUrl,f=p.data("key");if(!t.isEmpty(h)&&void 0!==f){var u,m,g,v,w=p.closest(t.FRAMES),b=i.previewCache.data,_=w.attr("data-fileindex");_=parseInt(_.replace("init_","")),g=t.isEmpty(b.config)&&t.isEmpty(b.config[_])?null:b.config[_],"function"==typeof(v=t.isEmpty(g)||t.isEmpty(g.extra)?n:g.extra)&&(v=v()),m={id:p.attr("id"),key:f,extra:v},a=function(e){i.ajaxAborted=!1,i._raise("filepredelete",[f,e,v]),i._abort()?e.abort():(p.removeClass(l),t.addCss(w,"file-uploading"),t.addCss(p,"disabled "+s))},o=function(e,n,a){var o,c;if(!t.isEmpty(e)&&!t.isEmpty(e.error))return m.jqXHR=a,m.response=e,i._showError(e.error,m,"filedeleteerror"),w.removeClass("file-uploading"),p.removeClass("disabled "+s).addClass(l),void d();w.removeClass("file-uploading").addClass("file-deleted"),w.fadeOut("slow",function(){_=parseInt(w.attr("data-fileindex").replace("init_","")),i.previewCache.unset(_),i._deleteFileIndex(w),o=i.previewCache.count(),c=o>0?i._getMsgSelected(o):"",i._setCaption(c),i._raise("filedeleted",[f,a,v]),t.cleanZoomCache(r.find("#zoom-"+w.attr("id"))),i._clearObjects(w),w.remove(),d()})},c=function(e,t,r){var n=i.ajaxOperations.deleteThumb,a=i._parseError(n,e,r);m.jqXHR=e,m.response={},i._showError(a,m,"filedeleteerror"),w.removeClass("file-uploading"),p.removeClass("disabled "+s).addClass(l),d()},i._initAjaxSettings(),i._mergeAjaxCallback("beforeSend",a,"delete"),i._mergeAjaxCallback("success",o,"delete"),i._mergeAjaxCallback("error",c,"delete"),u=e.extend(!0,{},{url:h,type:"POST",dataType:"json",data:e.extend(!0,{},{key:f},v)},i._ajaxDeleteSettings),i._handler(p,"click",function(){if(!i._validateMinCount())return!1;i.ajaxAborted=!1,i._raise("filebeforedelete",[f,v]),i.ajaxAborted instanceof Promise?i.ajaxAborted.then(function(t){t||e.ajax(u)}):i.ajaxAborted||e.ajax(u)})}})},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){t.addCss(this.$captionContainer,"icon-visible")},_getSize:function(t){var i,r,n,a=parseFloat(t),o=this.fileSizeGetter;return e.isNumeric(t)&&e.isNumeric(a)?("function"==typeof o?n=o(a):0===a?n="0.00 B":(i=Math.floor(Math.log(a)/Math.log(1024)),r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=1*(a/Math.pow(1024,i)).toFixed(2)+" "+r[i]),this._getLayoutTemplate("size").replace("{sizeText}",n)):""},_generatePreviewTemplate:function(i,r,n,a,o,s,l,d,c,p,h){var f,u=this,m=u.slug(n),g="",v="",w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=w<400?u.previewSettingsSmall[i]||u.defaults.previewSettingsSmall[i]:u.previewSettings[i]||u.defaults.previewSettings[i],_=c||u._renderFileFooter(m,l,"auto",s),x=u._getPreviewIcon(n),C="type-default",y=x&&u.preferIconicPreview,k=x&&u.preferIconicZoomPreview;return b&&e.each(b,function(e,t){v+=e+":"+t+";"}),f=function(r,s,l,c){var f=l?"zoom-"+o:o,g=u._getPreviewTemplate(r),w=(d||"")+" "+c;return u.frameClass&&(w=u.frameClass+" "+w),l&&(w=w.replace(" "+t.SORT_CSS,"")),g=u._parseFilePreviewIcon(g,n),"text"===r&&(s=t.htmlEncode(s)),"object"!==i||a||e.each(u.defaults.fileTypeSettings,function(e,t){"object"!==e&&"other"!==e&&t(n,a)&&(C="type-"+e)}),g.setTokens({previewId:f,caption:m,frameClass:w,type:a,fileindex:p,typeCss:C,footer:_,data:s,template:h||i,style:v?'style="'+v+'"':""})},p=p||o.slice(o.lastIndexOf("-")+1),u.fileActionSettings.showZoom&&(g=f(k?"other":i,r,!0,"kv-zoom-thumb")),g="\n"+u._getLayoutTemplate("zoomCache").replace("{zoomContent}",g),f(y?"other":i,r,!1,"kv-preview-thumb")+g},_addToPreview:function(e,t){return this.reversePreviewOrder?e.prepend(t):e.append(t)},_previewDefault:function(i,r,n){var a=this.$preview;if(this.showPreview){var o,s=i?i.name:"",l=i?i.type:"",d=i.size||0,c=this.slug(s),p=!0===n&&!this.isAjaxUpload,h=t.objUrl.createObjectURL(i);this._clearDefaultPreview(),o=this._generatePreviewTemplate("other",h,s,l,r,p,d),this._addToPreview(a,o),this._setThumbAttr(r,c,d),!0===n&&this.isAjaxUpload&&this._setThumbStatus(e("#"+r),"Error")}},_previewFile:function(e,i,r,n,a,o){if(this.showPreview){var s,l=this,d=i?i.name:"",c=o.type,p=o.name,h=l._parseFileType(c,d),f=l.allowedPreviewTypes,u=l.allowedPreviewMimeTypes,m=l.$preview,g=i.size||0,v=f&&f.indexOf(h)>=0,w=u&&-1!==u.indexOf(c),b="text"===h||"html"===h||"image"===h?r.target.result:a;if("html"===h&&l.purifyHtml&&window.DOMPurify&&(b=window.DOMPurify.sanitize(b)),v||w){s=l._generatePreviewTemplate(h,b,d,c,n,!1,g),l._clearDefaultPreview(),l._addToPreview(m,s);var _=m.find("#"+n+" img");_.length&&l.autoOrientImage?t.validateOrientation(i,function(e){if(e){var r=m.find("#zoom-"+n+" img"),a="rotate-"+e;e>4&&(a+=_.width()>_.height()?" is-portrait-gt4":" is-landscape-gt4"),t.addCss(_,a),t.addCss(r,a),l._raise("fileimageoriented",{$img:_,file:i}),l._validateImage(n,p,c,g,b),t.adjustOrientedImage(_)}else l._validateImage(n,p,c,g,b)}):l._validateImage(n,p,c,g,b)}else l._previewDefault(i,n);l._setThumbAttr(n,p,g),l._initSortable()}},_setThumbAttr:function(t,i,r){var n=e("#"+t);n.length&&(r=r&&r>0?this._getSize(r):"",n.data({caption:i,size:r}))},_setInitThumbAttr:function(){var e,i,r,n,a=this.previewCache.data,o=this.previewCache.count();if(0!==o)for(var s=0;s<o;s++)e=a.config[s],n=this.previewInitId+"-init_"+s,i=t.ifSet("caption",e,t.ifSet("filename",e)),r=t.ifSet("size",e),this._setThumbAttr(n,i,r)},_slugDefault:function(e){return t.isEmpty(e)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var i=this.$element,r=this.getFileStack(),n=t.isIE(9)&&t.findFileName(i.val())||i[0].files[0]&&i[0].files[0].name||r.length&&r[0].name||"",a=this.slug(n),o=this.isAjaxUpload?r.length:e,s=this.previewCache.count()+o,l=1===o?a:this._getMsgSelected(s);this.isError?(this.$previewContainer.removeClass("file-thumb-loading"),this.$previewStatus.html(""),this.$captionContainer.removeClass("icon-visible")):this._showFileIcon(),this._setCaption(l,this.isError),this.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&this._raise("fileselect",[e,a]),this.previewCache.count()&&this._initPreviewActions()},_setThumbStatus:function(e,t){if(this.showPreview){var i="indicator"+t,r=i+"Title",n="file-preview-"+t.toLowerCase(),a=e.find(".file-upload-indicator"),o=this.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Success"===t&&e.find(".file-drag-handle").remove(),a.html(o[i]),a.attr("title",o[r]),e.addClass(n),"Error"!==t||this.retryErrorUploads||e.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){this._setProgress(101,this.$progress,this.msgCancelled)},_setProgress:function(e,i,r){var n,a=Math.min(e,100),o=this.progressUploadThreshold,s=e<=100?this.progressTemplate:this.progressCompleteTemplate,l=a<100?this.progressTemplate:r?this.progressErrorTemplate:s;i=i||this.$progress,t.isEmpty(l)||(n=o&&a>o&&e<=100?l.setTokens({percent:o,status:this.msgUploadThreshold}):l.setTokens({percent:a,status:e>100?this.msgUploadEnd:a+"%"}),i.html(n),r&&i.find('[role="progressbar"]').html(r))},_setFileDropZoneTitle:function(){var e,i=this.$container.find(".file-drop-zone"),r=this.dropZoneTitle;this.isClickable&&(e=t.isEmpty(this.$element.attr("multiple"))?this.fileSingle:this.filePlural,r+=this.dropZoneClickTitle.replace("{files}",e)),i.find("."+this.dropZoneTitleClass).remove(),!this.showPreview||0===i.length||this.getFileStack().length>0||!this.dropZoneEnabled||!this.isAjaxUpload&&this.$element.files||(0===i.find(t.FRAMES).length&&t.isEmpty(this.defaultPreviewContent)&&i.prepend('<div class="'+this.dropZoneTitleClass+'">'+r+"</div>"),this.$container.removeClass("file-input-new"),t.addCss(this.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(t,i,r){var n=0;this._setProgress(i,e("#"+t).find(".file-thumb-progress")),this.uploadStatus[t]=i,e.each(this.uploadStatus,function(e,t){n+=t}),this._setProgress(Math.floor(n/r))},_validateMinCount:function(){var e=this.isAjaxUpload?this.getFileStack().length:this.$element.get(0).files.length;return!(this.validateInitialCount&&this.minFileCount>0&&this._getFileCount(e-1)<this.minFileCount)||(this._noFilesError({}),!1)},_getFileCount:function(e){var t=0;return this.validateInitialCount&&!this.overwriteInitial&&(t=this.previewCache.count(),e+=t),e},_getFileId:function(e){var t,i=this.generateFileId;return"function"==typeof i?i(e,event):e&&(t=String(e.webkitRelativePath||e.fileName||e.name||null))?e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,""):null},_getFileName:function(e){return e&&e.name?this.slug(e.name):void 0},_getFileIds:function(e){return this.fileids.filter(function(t){return e?void 0!==t:void 0!==t&&null!==t})},_getFileNames:function(e){return this.filenames.filter(function(t){return e?void 0!==t:void 0!==t&&null!==t})},_setPreviewError:function(e,t,i,r){void 0!==t&&this.updateStack(t,i),this.showPreview&&(!this.removeFromPreviewOnError||r?(this._setThumbStatus(e,"Error"),this._refreshUploadButton(e,r)):e.remove())},_refreshUploadButton:function(e,t){var i=e.find(".kv-file-upload"),r=this.fileActionSettings,n=r.uploadIcon,a=r.uploadTitle;i.length&&(t&&(n=r.uploadRetryIcon,a=r.uploadRetryTitle),i.attr("title",a).html(n))},_checkDimensions:function(e,i,r,n,a,o,s){var l,d,c,p="Small"===i?"min":"max",h=this[p+"Image"+o];!t.isEmpty(h)&&r.length&&(c=r[0],d="Width"===o?c.naturalWidth||c.width:c.naturalHeight||c.height,("Small"===i?d>=h:d<=h)||(l=this["msgImage"+o+i].setTokens({name:a,size:h}),this._showUploadError(l,s),this._setPreviewError(n,e,null)))},_validateImage:function(t,i,r,n,a){var o,s,l,d,c=this,p=c.$preview,h=p.find("#"+t),f=h.attr("data-fileindex"),u=h.find("img");i=i||"Untitled",u.one("load",function(){s=h.width(),l=p.width(),s>l&&u.css("width","100%"),o={ind:f,id:t},c._checkDimensions(f,"Small",u,h,i,"Width",o),c._checkDimensions(f,"Small",u,h,i,"Height",o),c.resizeImage||(c._checkDimensions(f,"Large",u,h,i,"Width",o),c._checkDimensions(f,"Large",u,h,i,"Height",o)),c._raise("fileimageloaded",[t]);try{d=window.piexif?window.piexif.load(a):null}catch(e){d=null}c.loadedImages.push({ind:f,img:u,thumb:h,pid:t,typ:r,siz:n,validated:!1,imgData:a,exifObj:d}),h.data("exif",d),c._validateAllImages()}).one("error",function(){c._raise("fileimageloaderror",[t])}).each(function(){this.complete?e(this).trigger("load"):this.error&&e(this).trigger("error")})},_validateAllImages:function(){var e,t,i,r={val:0},n=this.loadedImages.length,a=this.resizeIfSizeMoreThan;if(n===this.totalImagesCount&&(this._raise("fileimagesloaded"),this.resizeImage))for(e=0;e<this.loadedImages.length;e++)(t=this.loadedImages[e]).validated||((i=t.siz)&&i>1e3*a&&this._getResizedImage(t,r,n),this.loadedImages[e].validated=!0)},_getResizedImage:function(i,r,n){var a,o,s,l,d,c,p,h=this,f=e(i.img)[0],u=f.naturalWidth,m=f.naturalHeight,g=1,v=h.maxImageWidth||u,w=h.maxImageHeight||m,b=!(!u||!m),_=h.imageCanvas,x=h.imageCanvasContext,C=i.typ,y=i.pid,k=i.ind,T=i.thumb,E=i.exifObj;if(d=function(e,t,i){h.isAjaxUpload?h._showUploadError(e,t,i):h._showError(e,t,i),h._setPreviewError(T,k)},h.filestack[k]&&b&&!(u<=v&&m<=w)||(b&&h.filestack[k]&&h._raise("fileimageresized",[y,k]),r.val++,r.val===n&&h._raise("fileimagesresized"),b)){C=C||h.resizeDefaultImageType,o=u>v,s=m>w,g="width"===h.resizePreference?o?v/u:s?w/m:1:s?w/m:o?v/u:1,h._resetCanvas(),u*=g,m*=g,_.width=u,_.height=m;try{x.drawImage(f,0,0,u,m),l=_.toDataURL(C,h.resizeQuality),E&&(p=window.piexif.dump(E),l=window.piexif.insert(p,l)),a=t.dataURI2Blob(l),h.filestack[k]=a,h._raise("fileimageresized",[y,k]),r.val++,r.val===n&&h._raise("fileimagesresized",[void 0,void 0]),a instanceof Blob||d(h.msgImageResizeError,{id:y,index:k},"fileimageresizeerror")}catch(e){r.val++,r.val===n&&h._raise("fileimagesresized",[void 0,void 0]),c=h.msgImageResizeException.replace("{errors}",e.message),d(c,{id:y,index:k},"fileimageresizeexception")}}else d(h.msgImageResizeError,{id:y,index:k},"fileimageresizeerror")},_initBrowse:function(e){this.showBrowse?(this.$btnFile=e.find(".btn-file"),this.$btnFile.append(this.$element)):this.$element.hide()},_initCaption:function(){var e=this.initialCaption||"";return this.overwriteInitial||t.isEmpty(e)?(this.$caption.val(""),!1):(this._setCaption(e),!0)},_setCaption:function(i,r){var n,a,o,s,l,d=this.getFileStack();if(this.$caption.length){if(this.$captionContainer.removeClass("icon-visible"),r)n=e("<div>"+this.msgValidationError+"</div>").text(),s=d.length,l=s?1===s&&d[0]?this._getFileNames()[0]:this._getMsgSelected(s):this._getMsgSelected(this.msgNo),a=t.isEmpty(i)?l:i,o='<span class="'+this.msgValidationErrorClass+'">'+this.msgValidationErrorIcon+"</span>";else{if(t.isEmpty(i))return;n=e("<div>"+i+"</div>").text(),a=n,o=this._getLayoutTemplate("fileIcon")}this.$captionContainer.addClass("icon-visible"),this.$caption.attr("title",n).val(a),this.$captionIcon.html(o)}},_createContainer:function(){var t={class:"file-input file-input-new"+(this.rtl?" kv-rtl":"")},i=e(document.createElement("div")).attr(t).html(this._renderMain());return this.$element.before(i),this._initBrowse(i),this.theme&&i.addClass("theme-"+this.theme),i},_refreshContainer:function(){var e=this.$container;e.before(this.$element),e.html(this._renderMain()),this._initBrowse(e),this._validateDisabled()},_validateDisabled:function(){this.$caption.attr({readonly:this.isDisabled})},_renderMain:function(){var e=this.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",t=this.showClose?this._getLayoutTemplate("close"):"",i=this.showPreview?this._getLayoutTemplate("preview").setTokens({class:this.previewClass,dropClass:e}):"",r=this.isDisabled?this.captionClass+" file-caption-disabled":this.captionClass,n=this.captionTemplate.setTokens({class:r+" kv-fileinput-caption"});return this.mainTemplate.setTokens({class:this.mainClass+(!this.showBrowse&&this.showCaption?" no-browse":""),preview:i,close:t,caption:n,upload:this._renderButton("upload"),remove:this._renderButton("remove"),cancel:this._renderButton("cancel"),browse:this._renderButton("browse")})},_renderButton:function(e){var i=this._getLayoutTemplate("btnDefault"),r=this[e+"Class"],n=this[e+"Title"],a=this[e+"Icon"],o=this[e+"Label"],s=this.isDisabled?" disabled":"",l="button";switch(e){case"remove":if(!this.showRemove)return"";break;case"cancel":if(!this.showCancel)return"";r+=" kv-hidden";break;case"upload":if(!this.showUpload)return"";this.isAjaxUpload&&!this.isDisabled?i=this._getLayoutTemplate("btnLink").replace("{href}",this.uploadUrl):l="submit";break;case"browse":if(!this.showBrowse)return"";i=this._getLayoutTemplate("btnBrowse");break;default:return""}return r+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",t.isEmpty(o)||(o=' <span class="'+this.buttonLabelClass+'">'+o+"</span>"),i.setTokens({type:l,css:r,title:n,status:s,icon:a,label:o})},_renderThumbProgress:function(){return'<div class="file-thumb-progress kv-hidden">'+this.progressTemplate.setTokens({percent:"0",status:this.msgUploadBegin})+"</div>"},_renderFileFooter:function(e,i,r,n){var a,o=this.fileActionSettings,s=o.showRemove,l=o.showDrag,d=o.showUpload,c=o.showZoom,p=this._getLayoutTemplate("footer"),h=this._getLayoutTemplate("indicator"),f=n?o.indicatorError:o.indicatorNew,u=n?o.indicatorErrorTitle:o.indicatorNewTitle,m=h.setTokens({indicator:f,indicatorTitle:u});return i=this._getSize(i),a=this.isAjaxUpload?p.setTokens({actions:this._renderFileActions(d,!1,s,c,l,!1,!1,!1),caption:e,size:i,width:r,progress:this._renderThumbProgress(),indicator:m}):p.setTokens({actions:this._renderFileActions(!1,!1,!1,c,l,!1,!1,!1),caption:e,size:i,width:r,progress:"",indicator:m}),a=t.replaceTags(a,this.previewThumbTags)},_renderFileActions:function(e,t,i,r,n,a,o,s,l,d,c){if(!(e||t||i||r||n))return"";var p,h=!1===o?"":' data-url="'+o+'"',f=!1===s?"":' data-key="'+s+'"',u="",m="",g="",v="",w="",b=this._getLayoutTemplate("actions"),_=this.fileActionSettings,x=this.otherActionButtons.setTokens({dataKey:f,key:s}),C=a?_.removeClass+" disabled":_.removeClass;return i&&(u=this._getLayoutTemplate("actionDelete").setTokens({removeClass:C,removeIcon:_.removeIcon,removeTitle:_.removeTitle,dataUrl:h,dataKey:f,key:s})),e&&(m=this._getLayoutTemplate("actionUpload").setTokens({uploadClass:_.uploadClass,uploadIcon:_.uploadIcon,uploadTitle:_.uploadTitle})),t&&(g=(g=this._getLayoutTemplate("actionDownload").setTokens({downloadClass:_.downloadClass,downloadIcon:_.downloadIcon,downloadTitle:_.downloadTitle,downloadUrl:d||this.initialPreviewDownloadUrl})).setTokens({filename:c,key:s})),r&&(v=this._getLayoutTemplate("actionZoom").setTokens({zoomClass:_.zoomClass,zoomIcon:_.zoomIcon,zoomTitle:_.zoomTitle})),n&&l&&(p="drag-handle-init "+_.dragClass,w=this._getLayoutTemplate("actionDrag").setTokens({dragClass:p,dragTitle:_.dragTitle,dragIcon:_.dragIcon})),b.setTokens({delete:u,upload:m,download:g,zoom:v,drag:w,other:x})},_browse:function(e){this._raise("filebrowse"),e&&e.isDefaultPrevented()||(this.isError&&!this.isAjaxUpload&&this.clear(),this.$captionContainer.focus())},_filterDuplicate:function(e,t,i){var r=this._getFileId(e);r&&i&&i.indexOf(r)>-1||(i||(i=[]),t.push(e),i.push(r))},_change:function(i){var r=this;if(!r.changeTriggered){var n,a,o,s,l,d,c,p,h,f,u,m=r.$element,g=arguments.length>1,v=r.isAjaxUpload,w=[],b=g?arguments[1]:m.get(0).files,_=!v&&t.isEmpty(m.attr("multiple"))?1:r.maxFileCount,x=r.filestack.length,C=t.isEmpty(m.attr("multiple")),y=C&&x>0,k=r._getFileIds();if(r.reader=null,r._resetUpload(),r._hideFileIcon(),r.dropZoneEnabled&&r.$container.find(".file-drop-zone ."+r.dropZoneTitleClass).remove(),v?e.each(b,function(e,t){r._filterDuplicate(t,w,k)}):(b=i.target&&void 0===i.target.files?i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]:i.target.files||{},w=b),t.isEmpty(w)||0===w.length)return v||r.clear(),void r._raise("fileselectnone");if(r._resetErrors(),a=w.length,n=r._getFileCount(v?r.getFileStack().length+a:a),_>0&&n>_){if(!r.autoReplace||a>_)return o=r.autoReplace&&a>_?a:n,s=_,l=r.msgFilesTooMany.replace("{m}",s).replace("{n}",o),r.isError=(d=l,c=null,p=null,h=null,f=e.extend(!0,{},r._getOutData({},{},b),{id:p,index:h}),u={id:p,index:h,file:c,files:b},v?r._showUploadError(d,f):r._showError(d,u)),r.$captionContainer.removeClass("icon-visible"),r._setCaption("",!0),void r.$container.removeClass("file-input-new file-input-ajax-new");n>_&&r._resetPreviewThumbs(v)}else!v||y?(r._resetPreviewThumbs(!1),y&&r.clearStack()):!v||0!==x||r.previewCache.count()&&!r.overwriteInitial||r._resetPreviewThumbs(!0);r.isPreviewable?r.readFiles(w):r._updateFileDetails(1)}},_abort:function(t){var i;return this.ajaxAborted&&"object"==typeof this.ajaxAborted&&void 0!==this.ajaxAborted.message?((i=e.extend(!0,{},this._getOutData(),t)).abortData=this.ajaxAborted.data||{},i.abortMessage=this.ajaxAborted.message,this._setProgress(101,this.$progress,this.msgCancelled),this._showUploadError(this.ajaxAborted.message,i,"filecustomerror"),this.cancel(),!0):!!this.ajaxAborted},_resetFileStack:function(){var i=this,r=0,n=[],a=[],o=[];i._getThumbs().each(function(){var s=e(this),l=s.attr("data-fileindex"),d=i.filestack[l],c=s.attr("id");"-1"!==l&&-1!==l&&(void 0!==d?(n[r]=d,a[r]=i._getFileName(d),o[r]=i._getFileId(d),s.attr({id:i.previewInitId+"-"+r,"data-fileindex":r}),r++):s.attr({id:"uploaded-"+t.uniqId(),"data-fileindex":"-1"}),i.$preview.find("#zoom-"+c).attr({id:"zoom-"+s.attr("id"),"data-fileindex":s.attr("data-fileindex")}))}),i.filestack=n,i.filenames=a,i.fileids=o},_isFileSelectionValid:function(e){return e=e||0,this.required&&!this.getFilesCount()?(this.$errorContainer.html(""),this._showUploadError(this.msgFileRequired),!1):!(this.minFileCount>0&&this._getFileCount(e)<this.minFileCount)||(this._noFilesError({}),!1)},clearStack:function(){return this.filestack=[],this.filenames=[],this.fileids=[],this.$element},updateStack:function(e,t){return this.filestack[e]=t,this.filenames[e]=this._getFileName(t),this.fileids[e]=t&&this._getFileId(t)||null,this.$element},addToStack:function(e){return this.filestack.push(e),this.filenames.push(this._getFileName(e)),this.fileids.push(this._getFileId(e)),this.$element},getFileStack:function(e){return this.filestack.filter(function(t){return e?void 0!==t:void 0!==t&&null!==t})},getFilesCount:function(){var e=this.isAjaxUpload?this.getFileStack().length:this.$element.get(0).files.length;return this._getFileCount(e)},readFiles:function(i){this.reader=new FileReader;var r,n=this,a=n.$element,o=n.$preview,s=n.reader,l=n.$previewContainer,d=n.$previewStatus,c=n.msgLoading,p=n.msgProgress,h=n.previewInitId,f=i.length,u=n.fileTypeSettings,m=n.filestack.length,g=n.allowedFileTypes,v=g?g.length:0,w=n.allowedFileExtensions,b=t.isEmpty(w)?"":w.join(", "),_=n.maxFilePreviewSize&&parseFloat(n.maxFilePreviewSize),x=o.length&&(!_||isNaN(_)),C=function(t,a,o,s){var l,d=e.extend(!0,{},n._getOutData({},{},i),{id:o,index:s}),c={id:o,index:s,file:a,files:i};n._previewDefault(a,o,!0),n.isAjaxUpload?(n.addToStack(void 0),setTimeout(function(){r(s+1)},100)):f=0,n._initFileActions(),(l=e("#"+o)).find(".kv-file-upload").hide(),n.removeFromPreviewOnError&&l.remove(),n.isError=n.isAjaxUpload?n._showUploadError(t,d):n._showError(t,c),n._updateFileDetails(f)};n.loadedImages=[],n.totalImagesCount=0,e.each(i,function(e,t){var i=n.fileTypeSettings.image;i&&i(t.type)&&n.totalImagesCount++}),(r=function(y){if(t.isEmpty(a.attr("multiple"))&&(f=1),y>=f)return n.isAjaxUpload&&n.filestack.length>0?n._raise("filebatchselected",[n.getFileStack()]):n._raise("filebatchselected",[i]),l.removeClass("file-thumb-loading"),void d.html("");var k,T,E,S,F,P,I,A,z,D,$,j,U=m+y,B=h+"-"+U,O=i[y],L=u.text,R=u.image,M=u.html,Z=O.name?n.slug(O.name):"",N=(O.size||0)/1e3,H="",V=t.objUrl.createObjectURL(O),W=0,q="",K=0,Y=function(){var e=p.setTokens({index:y+1,files:f,percent:50,name:Z});setTimeout(function(){d.html(e),n._updateFileDetails(f),r(y+1)},100),n._raise("fileloaded",[O,B,y,s])};if(v>0)for(T=0;T<v;T++)P=g[T],I=n.msgFileTypes[P]||P,q+=0===T?I:", "+I;if(!1!==Z){if(0===Z.length)return E=n.msgInvalidFileName.replace("{name}",t.htmlEncode(O.name)),void C(E,O,B,y);if(t.isEmpty(w)||(H=new RegExp("\\.("+w.join("|")+")$","i")),k=N.toFixed(2),n.maxFileSize>0&&N>n.maxFileSize)return E=n.msgSizeTooLarge.setTokens({name:Z,size:k,maxSize:n.maxFileSize}),void C(E,O,B,y);if(null!==n.minFileSize&&N<=t.getNum(n.minFileSize))return E=n.msgSizeTooSmall.setTokens({name:Z,size:k,minSize:n.minFileSize}),void C(E,O,B,y);if(!t.isEmpty(g)&&t.isArray(g)){for(T=0;T<g.length;T+=1)S=g[T],A=u[S],W+=A&&"function"==typeof A&&A(O.type,O.name)?1:0;if(0===W)return E=n.msgInvalidFileType.setTokens({name:Z,types:q}),void C(E,O,B,y)}if(0===W&&!t.isEmpty(w)&&t.isArray(w)&&!t.isEmpty(H)&&(F=t.compare(Z,H),0===(W+=t.isEmpty(F)?0:F.length)))return E=n.msgInvalidFileExtension.setTokens({name:Z,extensions:b}),void C(E,O,B,y);if(!n.showPreview)return n.isAjaxUpload&&n.addToStack(O),setTimeout(function(){r(y+1),n._updateFileDetails(f)},100),void n._raise("fileloaded",[O,B,y,s]);if(!x&&N>_)return n.addToStack(O),l.addClass("file-thumb-loading"),n._previewDefault(O,B),n._initFileActions(),n._updateFileDetails(f),void r(y+1);o.length&&void 0!==FileReader?(z=L(O.type,Z),D=M(O.type,Z),$=R(O.type,Z),d.html(c.replace("{index}",y+1).replace("{files}",f)),l.addClass("file-thumb-loading"),s.onerror=function(e){n._errorHandler(e,Z)},s.onload=function(i){var r,a,o,l,d,c,p,h,f=[];if(a={name:Z,type:O.type},e.each(u,function(e,t){"object"!==e&&"other"!==e&&t(O.type,Z)&&K++}),0===K){for(o=new Uint8Array(i.target.result),T=0;T<o.length;T++)l=o[T].toString(16),f.push(l);if(r=f.join("").toLowerCase().substring(0,8),c=t.getMimeType(r,"",""),t.isEmpty(c)&&(d=t.arrayBuffer2String(s.result),c=t.isSvg(d)?"image/svg+xml":t.getMimeType(r,d,O.type)),a={name:Z,type:c},z=L(c,""),D=M(c,""),$=R(c,""),(j=z||D)||$)return p=j,(h=new FileReader).onerror=function(e){n._errorHandler(e,Z)},h.onload=function(e){n._previewFile(y,O,e,B,V,a),n._initFileActions(),Y()},void(p?h.readAsText(O,n.textEncoding):h.readAsDataURL(O))}n._previewFile(y,O,i,B,V,a),n._initFileActions(),Y()},s.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,i=Math.ceil(t);E=p.setTokens({index:y+1,files:f,percent:i,name:Z}),setTimeout(function(){d.html(E)},100)}},z||D?s.readAsText(O,n.textEncoding):$?s.readAsDataURL(O):s.readAsArrayBuffer(O)):(n._previewDefault(O,B),setTimeout(function(){r(y+1),n._updateFileDetails(f)},100),n._raise("fileloaded",[O,B,y,s])),n.addToStack(O)}else r(y+1)})(0),n._updateFileDetails(f,!1)},lock:function(){return this._resetErrors(),this.disable(),this.showRemove&&this.$container.find(".fileinput-remove").hide(),this.showCancel&&this.$container.find(".fileinput-cancel").show(),this._raise("filelock",[this.filestack,this._getExtraData()]),this.$element},unlock:function(e){return void 0===e&&(e=!0),this.enable(),this.showCancel&&this.$container.find(".fileinput-cancel").hide(),this.showRemove&&this.$container.find(".fileinput-remove").show(),e&&this._resetFileStack(),this._raise("fileunlock",[this.filestack,this._getExtraData()]),this.$element},cancel:function(){var t,i=this,r=i.ajaxRequests,n=r.length;if(n>0)for(t=0;t<n;t+=1)i.cancelling=!0,r[t].abort();return i._setProgressCancelled(),i._getThumbs().each(function(){var t=e(this),r=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==i.filestack[r]&&(t.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),t.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),i.unlock()}),i.$element},clear:function(){var i,r=this;if(r._raise("fileclear"))return r.$btnUpload.removeAttr("disabled"),r._getThumbs().find("video,audio,img").each(function(){t.cleanMemory(e(this))}),r._resetUpload(),r.clearStack(),r._clearFileInput(),r._resetErrors(!0),r._hasInitialPreview()?(r._showFileIcon(),r._resetPreview(),r._initPreviewActions(),r.$container.removeClass("file-input-new")):(r._getThumbs().each(function(){r._clearObjects(e(this))}),r.isAjaxUpload&&(r.previewCache.data={}),r.$preview.html(""),i=!r.overwriteInitial&&r.initialCaption.length>0?r.initialCaption:"",r.$caption.attr("title","").val(i),t.addCss(r.$container,"file-input-new"),r._validateDefaultPreview()),0===r.$container.find(t.FRAMES).length&&(r._initCaption()||r.$captionContainer.removeClass("icon-visible")),r._hideFileIcon(),r._raise("filecleared"),r.$captionContainer.focus(),r._setFileDropZoneTitle(),r.$element},reset:function(){if(this._raise("filereset"))return this._resetPreview(),this.$container.find(".fileinput-filename").text(""),t.addCss(this.$container,"file-input-new"),(this.getFrames().length||this.dropZoneEnabled)&&this.$container.removeClass("file-input-new"),this.clearStack(),this.formdata={},this._setFileDropZoneTitle(),this.$element},disable:function(){return this.isDisabled=!0,this._raise("filedisabled"),this.$element.attr("disabled","disabled"),this.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),this.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),t.addCss(this.$container.find(".btn-file"),"disabled"),this._initDragDrop(),this.$element},enable:function(){return this.isDisabled=!1,this._raise("fileenabled"),this.$element.removeAttr("disabled"),this.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),this.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),this.$container.find(".btn-file").removeClass("disabled"),this._initDragDrop(),this.$element},upload:function(){var i,r,n,a=this.getFileStack().length,o=!e.isEmptyObject(this._getExtraData());if(this.isAjaxUpload&&!this.isDisabled&&this._isFileSelectionValid(a))if(this._resetUpload(),0!==a||o)if(this.$progress.show(),this.uploadCount=0,this.uploadStatus={},this.uploadLog=[],this.lock(),this._setProgress(2),0===a&&o)this._uploadExtraOnly();else{if(n=this.filestack.length,this.hasInitData=!1,!this.uploadAsync)return this._uploadBatch(),this.$element;for(r=this._getOutData(),this._raise("filebatchpreupload",[r]),this.fileBatchCompleted=!1,this.uploadCache={content:[],config:[],tags:[],append:!0},this.uploadAsyncCount=this.getFileStack().length,i=0;i<n;i++)this.uploadCache.content[i]=null,this.uploadCache.config[i]=null,this.uploadCache.tags[i]=null;for(this.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS),this._initSortable(),this.cacheInitialPreview=this.getPreview(),i=0;i<n;i++)this.filestack[i]&&this._uploadSingle(i,!0)}else this._showUploadError(this.msgUploadEmpty)},destroy:function(){var t=this.$form,i=this.$container,r=this.$element,n=this.namespace;return e(document).off(n),e(window).off(n),t&&t.length&&t.off(n),this.isAjaxUpload&&this._clearFileInput(),this._cleanup(),this._initPreviewCache(),r.insertBefore(i).off(n).removeData(),i.off().remove(),r},refresh:function(i,r){var n=this.$element;return i="object"!=typeof i||t.isEmpty(i)?this.options:e.extend(!0,{},this.options,i),this._init(i,!0),this._listen(),r&&n.trigger("change"+this.namespace),n},zoom:function(e){var i=this._getFrame(e),r=this.$modal;i&&(t.initModal(r),r.html(this._getModalContent()),this._setZoomContent(i),r.modal("show"),this._initZoomButtons())},getExif:function(e){var t=this._getFrame(e);return t&&t.data("exif")||null},getFrames:function(i){var r;return i=i||"",r=this.$preview.find(t.FRAMES+i),this.reversePreviewOrder&&(r=e(r.get().reverse())),r},getPreview:function(){return{content:this.initialPreview,config:this.initialPreviewConfig,tags:this.initialPreviewThumbTags}}},e.fn.fileinput=function(r){if(t.hasFileAPISupport()||t.isIE(9)){var n=Array.apply(null,arguments),a=[];switch(n.shift(),this.each(function(){var o,s=e(this),l=s.data("fileinput"),d="object"==typeof r&&r,c=d.theme||s.data("theme"),p={},h={},f=d.language||s.data("language")||e.fn.fileinput.defaults.language||"en";l||(c&&(h=e.fn.fileinputThemes[c]||{}),"en"===f||t.isEmpty(e.fn.fileinputLocales[f])||(p=e.fn.fileinputLocales[f]||{}),o=e.extend(!0,{},e.fn.fileinput.defaults,h,e.fn.fileinputLocales.en,p,d,s.data()),l=new i(this,o),s.data("fileinput",l)),"string"==typeof r&&a.push(l[r].apply(l,n))}),a.length){case 0:return this;case 1:return a[0];default:return a}}},e.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:!0,required:!1,rtl:!1,hideThumbnailContent:!1,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:t.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1},e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},e.fn.fileinput.Constructor=i,e(document).ready(function(){var t=e("input.file[type=file]");t.length&&t.fileinput()})})?r.apply(t,n):r)||(e.exports=a)}()},396:function(e,t,i){e.exports=i.p+"loading-sm-e5ad074b7969cc386b387f08dba4fcec.gif"},397:function(e,t,i){var r=i(124);(e.exports=i(98)(!1)).push([e.i,'/*!\r\n * bootstrap-fileinput v4.4.8\r\n * http://plugins.krajee.com/file-input\r\n *\r\n * Krajee default styling for bootstrap-fileinput.\r\n *\r\n * Author: Kartik Visweswaran\r\n * Copyright: 2014 - 2018, Kartik Visweswaran, Krajee.com\r\n *\r\n * Licensed under the BSD 3-Clause\r\n * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md\r\n */\r\n.file-loading input[type=file], input[type=file].file-loading {\r\n    width: 0;\r\n    height: 0;\r\n}\r\n\r\n.kv-hidden, .file-caption-icon, .file-zoom-dialog .modal-header:before, .file-zoom-dialog .modal-header:after, .file-input-new .file-preview, .file-input-new .close, .file-input-new .glyphicon-file, .file-input-new .fileinput-remove-button, .file-input-new .fileinput-upload-button, .file-input-new .no-browse .input-group-btn, .file-input-ajax-new .fileinput-remove-button, .file-input-ajax-new .fileinput-upload-button, .file-input-ajax-new .no-browse .input-group-btn, .hide-content .kv-file-content {\r\n    display: none;\r\n}\r\n\r\n.btn-file input[type=file], .file-caption-icon, .file-preview .fileinput-remove, .krajee-default .file-thumb-progress, .file-zoom-dialog .btn-navigate, .file-zoom-dialog .floating-buttons {\r\n    position: absolute;\r\n}\r\n\r\n.file-loading:before, .btn-file, .file-caption, .file-preview, .krajee-default.file-preview-frame, .krajee-default .file-thumbnail-footer, .file-zoom-dialog .modal-dialog {\r\n    position: relative;\r\n}\r\n\r\n.file-error-message pre, .file-error-message ul, .krajee-default .file-actions, .krajee-default .file-other-error {\r\n    text-align: left;\r\n}\r\n\r\n.file-error-message pre, .file-error-message ul {\r\n    margin: 0;\r\n}\r\n\r\n.krajee-default .file-drag-handle, .krajee-default .file-upload-indicator {\r\n    float: left;\r\n    margin: 5px 0 -5px;\r\n    width: 16px;\r\n    height: 16px;\r\n}\r\n\r\n.krajee-default .file-thumb-progress .progress, .krajee-default .file-thumb-progress .progress-bar {\r\n    height: 11px;\r\n    font-size: 9px;\r\n    line-height: 10px;\r\n}\r\n\r\n.krajee-default .file-caption-info, .krajee-default .file-size-info {\r\n    display: block;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    width: 160px;\r\n    height: 15px;\r\n    margin: auto;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-video, .file-zoom-content > .file-object.type-flash, .file-zoom-content > .file-object.type-image {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    width: auto;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-video, .file-zoom-content > .file-object.type-flash {\r\n    height: 100%;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-pdf, .file-zoom-content > .file-object.type-html, .file-zoom-content > .file-object.type-text, .file-zoom-content > .file-object.type-default {\r\n    width: 100%;\r\n}\r\n\r\n.rotate-2 {\r\n    transform: rotateY(180deg);\r\n}\r\n\r\n.rotate-3 {\r\n    transform: rotate(180deg);\r\n}\r\n\r\n.rotate-4 {\r\n    transform: rotate(180deg) rotateY(180deg);\r\n}\r\n\r\n.rotate-5 {\r\n    transform: rotate(270deg) rotateY(180deg);\r\n}\r\n\r\n.rotate-6 {\r\n    transform: rotate(90deg);\r\n}\r\n\r\n.rotate-7 {\r\n    transform: rotate(90deg) rotateY(180deg);\r\n}\r\n\r\n.rotate-8 {\r\n    transform: rotate(270deg);\r\n}\r\n\r\n.file-loading:before {\r\n    content: " Loading...";\r\n    display: inline-block;\r\n    padding-left: 20px;\r\n    line-height: 16px;\r\n    font-size: 13px;\r\n    font-variant: small-caps;\r\n    color: #999;\r\n    background: transparent url('+r(i(166))+') top left no-repeat;\r\n}\r\n\r\n.file-object {\r\n    margin: 0 0 -5px 0;\r\n    padding: 0;\r\n}\r\n\r\n.btn-file {\r\n    overflow: hidden;\r\n}\r\n\r\n.btn-file input[type=file] {\r\n    top: 0;\r\n    right: 0;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n    text-align: right;\r\n    opacity: 0;\r\n    background: none repeat scroll 0 0 transparent;\r\n    cursor: inherit;\r\n    display: block;\r\n}\r\n\r\n.btn-file ::-ms-browse {\r\n    font-size: 10000px;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.file-caption .file-caption-name {\r\n    width: 100%;\r\n    margin: 0;\r\n    padding: 0;\r\n    box-shadow: none;\r\n    border: none;\r\n    background: none;\r\n    outline: none;\r\n}\r\n\r\n.file-caption.icon-visible .file-caption-icon {\r\n    display: inline-block;\r\n}\r\n\r\n.file-caption.icon-visible .file-caption-name {\r\n    padding-left: 15px;\r\n}\r\n\r\n.file-caption-icon {\r\n    left: 8px;\r\n}\r\n\r\n.file-error-message {\r\n    color: #a94442;\r\n    background-color: #f2dede;\r\n    margin: 5px;\r\n    border: 1px solid #ebccd1;\r\n    border-radius: 4px;\r\n    padding: 15px;\r\n}\r\n\r\n.file-error-message pre {\r\n    margin: 5px 0;\r\n}\r\n\r\n.file-caption-disabled {\r\n    background-color: #eee;\r\n    cursor: not-allowed;\r\n    opacity: 1;\r\n}\r\n\r\n.file-preview {\r\n    border-radius: 5px;\r\n    border: 1px solid #ddd;\r\n    padding: 8px;\r\n    width: 100%;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.file-preview .btn-xs {\r\n    padding: 1px 5px;\r\n    font-size: 12px;\r\n    line-height: 1.5;\r\n    border-radius: 3px;\r\n}\r\n\r\n.file-preview .fileinput-remove {\r\n    top: 1px;\r\n    right: 1px;\r\n    line-height: 10px;\r\n}\r\n\r\n.file-preview .clickable {\r\n    cursor: pointer;\r\n}\r\n\r\n.file-preview-image {\r\n    font: 40px Impact, Charcoal, sans-serif;\r\n    color: #008000;\r\n}\r\n\r\n.krajee-default.file-preview-frame {\r\n    margin: 8px;\r\n    border: 1px solid #ddd;\r\n    box-shadow: 1px 1px 5px 0 #a2958a;\r\n    padding: 6px;\r\n    float: left;\r\n    text-align: center;\r\n}\r\n\r\n.krajee-default.file-preview-frame .kv-file-content {\r\n    width: 213px;\r\n    height: 160px;\r\n}\r\n\r\n.krajee-default.file-preview-frame .file-thumbnail-footer {\r\n    height: 70px;\r\n}\r\n\r\n.krajee-default.file-preview-frame:not(.file-preview-error):hover {\r\n    box-shadow: 3px 3px 5px 0 #333;\r\n}\r\n\r\n.krajee-default .file-preview-text {\r\n    display: block;\r\n    color: #428bca;\r\n    border: 1px solid #ddd;\r\n    font-family: Menlo, Monaco, Consolas, "Courier New", monospace;\r\n    outline: none;\r\n    padding: 8px;\r\n    resize: none;\r\n}\r\n\r\n.krajee-default .file-preview-html {\r\n    border: 1px solid #ddd;\r\n    padding: 8px;\r\n    overflow: auto;\r\n}\r\n\r\n.krajee-default .file-other-icon {\r\n    font-size: 6em;\r\n}\r\n\r\n.krajee-default .file-footer-buttons {\r\n    float: right;\r\n}\r\n\r\n.krajee-default .file-footer-caption {\r\n    display: block;\r\n    text-align: center;\r\n    padding-top: 4px;\r\n    font-size: 11px;\r\n    color: #777;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.krajee-default .file-preview-error {\r\n    opacity: 0.65;\r\n    box-shadow: none;\r\n}\r\n\r\n.krajee-default .file-thumb-progress {\r\n    height: 11px;\r\n    top: 37px;\r\n    left: 0;\r\n    right: 0;\r\n}\r\n\r\n.krajee-default.kvsortable-ghost {\r\n    background: #e1edf7;\r\n    border: 2px solid #a1abff;\r\n}\r\n\r\n.krajee-default .file-preview-other:hover {\r\n    opacity: 0.8;\r\n}\r\n\r\n.krajee-default .file-preview-frame:not(.file-preview-error) .file-footer-caption:hover {\r\n    color: #000;\r\n}\r\n\r\n.kv-upload-progress .progress {\r\n    height: 20px;\r\n    line-height: 20px;\r\n    margin: 10px 0;\r\n    overflow: hidden;\r\n}\r\n\r\n.kv-upload-progress .progress-bar {\r\n    height: 20px;\r\n    line-height: 20px;\r\n}\r\n\r\n/*noinspection CssOverwrittenProperties*/\r\n.file-zoom-dialog .file-other-icon {\r\n    font-size: 22em;\r\n    font-size: 50vmin;\r\n}\r\n\r\n.file-zoom-dialog .modal-dialog {\r\n    width: auto;\r\n}\r\n\r\n.file-zoom-dialog .modal-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.file-zoom-dialog .btn-navigate {\r\n    padding: 0;\r\n    margin: 0;\r\n    background: transparent;\r\n    text-decoration: none;\r\n    outline: none;\r\n    opacity: 0.7;\r\n    top: 45%;\r\n    font-size: 4em;\r\n    color: #1c94c4;\r\n}\r\n\r\n.file-zoom-dialog .btn-navigate:not([disabled]):hover {\r\n    outline: none;\r\n    box-shadow: none;\r\n    opacity: 0.6;\r\n}\r\n\r\n.file-zoom-dialog .floating-buttons {\r\n    top: 5px;\r\n    right: 10px;\r\n}\r\n\r\n.file-zoom-dialog .btn-navigate[disabled] {\r\n    opacity: 0.3;\r\n}\r\n\r\n.file-zoom-dialog .btn-prev {\r\n    left: 1px;\r\n}\r\n\r\n.file-zoom-dialog .btn-next {\r\n    right: 1px;\r\n}\r\n\r\n.file-zoom-dialog .kv-zoom-title {\r\n    font-weight: 300;\r\n    color: #999;\r\n    max-width: 50%;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.file-input-new .no-browse .form-control {\r\n    border-top-right-radius: 4px;\r\n    border-bottom-right-radius: 4px;\r\n}\r\n\r\n.file-input-ajax-new .no-browse .form-control {\r\n    border-top-right-radius: 4px;\r\n    border-bottom-right-radius: 4px;\r\n}\r\n\r\n.file-caption-main {\r\n    width: 100%;\r\n}\r\n\r\n.file-thumb-loading {\r\n    background: transparent url('+r(i(166))+") no-repeat scroll center center content-box !important;\r\n}\r\n\r\n.file-drop-zone {\r\n    border: 1px dashed #aaa;\r\n    border-radius: 4px;\r\n    height: 100%;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n    margin: 12px 15px 12px 12px;\r\n    padding: 5px;\r\n}\r\n\r\n.file-drop-zone.clickable:hover {\r\n    border: 2px dashed #999;\r\n}\r\n\r\n.file-drop-zone.clickable:focus {\r\n    border: 2px solid #5acde2;\r\n}\r\n\r\n.file-drop-zone .file-preview-thumbnails {\r\n    cursor: default;\r\n}\r\n\r\n.file-drop-zone-title {\r\n    color: #aaa;\r\n    font-size: 1.6em;\r\n    padding: 85px 10px;\r\n    cursor: default;\r\n}\r\n\r\n.file-highlighted {\r\n    border: 2px dashed #999 !important;\r\n    background-color: #eee;\r\n}\r\n\r\n.file-uploading {\r\n    background: url("+r(i(396))+") no-repeat center bottom 10px;\r\n    opacity: 0.65;\r\n}\r\n\r\n@media (min-width: 576px) {\r\n    .file-zoom-dialog .modal-dialog {\r\n        max-width: 500px;\r\n    }\r\n}\r\n\r\n@media (min-width: 992px) {\r\n    .file-zoom-dialog .modal-lg {\r\n        max-width: 800px;\r\n    }\r\n}\r\n\r\n.file-zoom-fullscreen.modal {\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n}\r\n\r\n.file-zoom-fullscreen .modal-dialog {\r\n    position: fixed;\r\n    margin: 0;\r\n    padding: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n}\r\n\r\n.file-zoom-fullscreen .modal-content {\r\n    border-radius: 0;\r\n    box-shadow: none;\r\n}\r\n\r\n.file-zoom-fullscreen .modal-body {\r\n    overflow-y: auto;\r\n}\r\n\r\n.floating-buttons {\r\n    z-index: 3000;\r\n}\r\n\r\n.floating-buttons .btn-kv {\r\n    margin-left: 3px;\r\n    z-index: 3000;\r\n}\r\n\r\n.file-zoom-content {\r\n    height: 480px;\r\n    text-align: center;\r\n}\r\n\r\n.file-zoom-content .file-preview-image {\r\n    max-height: 100%;\r\n}\r\n\r\n.file-zoom-content .file-preview-video {\r\n    max-height: 100%;\r\n}\r\n\r\n.file-zoom-content .is-portrait-gt4 {\r\n    margin-top: 60px;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-image {\r\n    height: auto;\r\n    min-height: inherit;\r\n}\r\n\r\n.file-zoom-content > .file-object.type-audio {\r\n    width: auto;\r\n    height: 30px;\r\n}\r\n\r\n@media screen and (max-width: 767px) {\r\n    .file-preview-thumbnails {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .file-zoom-dialog .modal-header {\r\n        flex-direction: column;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 350px) {\r\n    .krajee-default.file-preview-frame .kv-file-content {\r\n        width: 160px;\r\n    }\r\n}\r\n\r\n.file-loading[dir=rtl]:before {\r\n    background: transparent url("+r(i(166))+") top right no-repeat;\r\n    padding-left: 0;\r\n    padding-right: 20px;\r\n}\r\n\r\n.file-sortable .file-drag-handle {\r\n    cursor: move;\r\n    opacity: 1;\r\n}\r\n\r\n.file-sortable .file-drag-handle:hover {\r\n    opacity: 0.7;\r\n}\r\n\r\n.clickable .file-drop-zone-title {\r\n    cursor: pointer;\r\n}\r\n\r\n.kv-zoom-actions .btn-kv {\r\n    margin-left: 3px;\r\n}\r\n\r\n.file-preview-initial.sortable-chosen {\r\n    background-color: #d9edf7;\r\n}",""])}}]);
//# sourceMappingURL=vendors~frontdoor-upload-view~sofi-manage-comic-photos-view-9bb03d372911d8961cf4.js.map