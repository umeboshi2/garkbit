(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{153:function(e,t,o){"use strict";var n,i,r,a,s,u,d,c,l,f,p,h,v,b,y=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}f=o(4),i=o(0),a=o(32),h=o(36),v=o(5),d=o(145),o(141),o(178),b=o(2);var g=o(30);p=g.make_field_input,g.make_field_select,i.Radio.channel("global"),c=i.Radio.channel("messages"),n=i.Radio.channel("sofi"),s=b.renderable(function(e){var t,o,n;for(b.div(".listview-header","Document"),t=0,o=(n=["name","title"]).length;t<o;t++)p(n[t])(e);return b.div("#editor-mode-button.btn.btn-default","Change to handlebars mode"),b.div("#ace-editor",{style:"position:relative;width:100%;height:40em;"}),b.input(".btn.btn-default",{type:"submit",value:"Submit"}),b.div(".spinner.fa.fa-spinner.fa-spin")}),r=function(){var e=function(e){function t(){return m(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,a),y(t,[{key:"ui",value:function(){var e,t;return e={editor:"#ace-editor",edit_mode_btn:"#editor-mode-button"},t=h(this.fieldList),f.extend(t,e),t}},{key:"set_edit_mode",value:function(e){return this.editorMode=e,this.editor.getSession().setMode("ace/mode/"+this.editorMode)}},{key:"change_edit_mode",value:function(){var e;return this.ui.edit_mode_btn.text("Change to "+this.editorMode+" mode"),e="markdown"===this.editorMode?"handlebars":"markdown",this.set_edit_mode(e)}},{key:"afterDomRefresh",value:function(){var e;if(this.set_edit_mode(this.editorMode),this.model.has("content"))return e=this.model.get("content"),this.editor.setValue(e)}},{key:"updateModel",value:function(){var e,t,o,n;for(t=0,o=(n=this.fieldList).length;t<o;t++)e=n[t],this.model.set(e,this.ui[e].val());return this.model.set("content",this.editor.getValue())}},{key:"onSuccess",value:function(e){var t;return t=this.model.get("name"),c.request("success",t+" saved successfully."),v("#sofi/dsc/view/"+this.model.id)}}]),t}();return e.prototype.editorMode="markdown",e.prototype.editorContainer="ace-editor",e.prototype.fieldList=["name","title"],e.prototype.template=s,e.prototype.events={"click @ui.edit_mode_btn":"change_edit_mode"},e.prototype.behaviors={HasAceEditor:{behaviorClass:d}},e}.call(void 0),l=function(e){function t(){return m(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r),y(t,[{key:"createModel",value:function(){return n.request("db:ebdsc:new")}},{key:"saveModel",value:function(){return n.request("db:ebdsc:collection").add(this.model),function e(t,o,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,o);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"saveModel",this).call(this)}},{key:"onSuccess",value:function(e){return v("#sofi/dsc/view/"+e.id)}}]),t}(),u=function(e){function t(){return m(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r),y(t,[{key:"createModel",value:function(){return this.model}}]),t}(),e.exports={NewFormView:l,EditFormView:u}}}]);
//# sourceMappingURL=sofi-view-add-dsc-bfb2156f68daff2caef3.js.map