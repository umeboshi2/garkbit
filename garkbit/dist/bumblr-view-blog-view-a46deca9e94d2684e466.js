(self.webpackJsonp=self.webpackJsonp||[]).push([[24],{395:function(t,e,n){"use strict";var o=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l,r,h,c,p,d,f,y,g,m;l=n(4),r=n(1),c=n(2),p=n(87),f=n(94),m=n(3),n(5),r.Radio.channel("bumblr"),y=m.renderable(function(){return m.div(".mytoolbar.row",function(){return m.ul(".pager",function(){return m.li(".previous",function(){return m.i("#prev-page-button.fa.fa-arrow-left.btn.btn-default")}),m.li(function(){return m.i("#slideshow-button.fa.fa-play.btn.btn-default")}),m.li(".next",function(){return m.i("#next-page-button.fa.fa-arrow-right.btn.btn-default")})})}),m.div("#posts-container.row")}),g=m.renderable(function(s){return m.div(".listview-list-entry",function(){return m.span(function(){var t,e,n,o,i,r;for(t=null,n=e=0,o=(i=s.photos[0].alt_sizes).length;n<o;n++)(r=i[n]).width>e&&r.width<250&&(e=(t=r).width);return r=t,m.a({href:s.post_url,target:"_blank"},function(){return m.img({src:r.url})})})})}),d=function(){var t=(u(e,c.View),e);function e(){return s(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return t.prototype.template=g,t.prototype.className="post",t}.call(void 0),h=function(){var t=(u(r,c.CollectionView),o(r,[{key:"manage_slideshow",value:function(){return this.ui.slideshow_button.hasClass("fa-play")?this.start_slideshow():this.stop_slideshow()}},{key:"start_slideshow",value:function(){var t=this;return console.log("start slideshow"),this.slideshow_handler=setInterval(function(){return console.log("getting next page"),t.get_next_page()},6e3),this.ui.slideshow_button.removeClass("fa-play"),this.ui.slideshow_button.addClass("fa-stop")}},{key:"stop_slideshow",value:function(){return clearInterval(this.slideshow_handler),this.ui.slideshow_button.removeClass("fa-stop"),this.ui.slideshow_button.addClass("fa-play")}},{key:"get_next_page",value:function(){var t=this;return this.collection.getNextPage().done(function(){return t.set_image_layout()})}},{key:"get_prev_page",value:function(){var t=this;return this.collection.getPreviousPage().done(function(){return t.set_image_layout()})}},{key:"get_another_page",value:function(t){var e,n=this;switch(t){case"prev":e=this.collection.getPreviousPage();break;case"next":e=this.collection.getNextPage();break;default:e=null}if(e)return e.done(function(){return n.set_image_layout()})}},{key:"handle_key_command",value:function(t){if("prev"===t||"next"===t)return this.get_another_page(t)}},{key:"keydownHandler",value:function(t){var e,n,o,i;for(e in function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,r),o=[],n=this.keycommands)i=n[e],t.keyCode===i?o.push(this.handle_key_command(e)):o.push(void 0);return o}},{key:"set_image_layout",value:function(){var t,e=this;return t=l(".post"),f(t,function(){return e.ui.posts.show(),e.masonry.reloadItems(),e.masonry.layout()})}},{key:"onDomRefresh",value:function(){return l("html").keydown(this.keydownHandler),this.masonry=new p("#posts-container",{gutter:2,isInitLayout:!1,itemSelector:".post"}),this.set_image_layout()}},{key:"onBeforeDestroy",value:function(){return l("html").unbind("keydown",this.keydownHandler),this.stop_slideshow(),this.masonry.destroy()}}]),r);function r(){s(this,r);var t=a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments));return t.keydownHandler=t.keydownHandler.bind(t),t}return t.prototype.template=y,t.prototype.childView=d,t.prototype.childViewContainer="#posts-container",t.prototype.ui={posts:"#posts-container",slideshow_button:"#slideshow-button",next_button:"#next-page-button",prev_putton:"#prev-page-button"},t.prototype.events={"click @ui.prev_putton":"get_prev_page","click @ui.next_button":"get_next_page","click @ui.slideshow_button":"manage_slideshow"},t.prototype.keycommands={prev:65,next:90},t}.call(void 0),t.exports=h},396:function(t,e,n){"use strict";var o=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l,r,h,c,p,d,f,y,g,m,v;l=n(4),r=n(1),c=n(2),p=n(87),f=n(94),v=n(3),n(5),r.Radio.channel("bumblr"),g=v.renderable(function(){return v.div(".mytoolbar.row",function(){return v.div(".btn-group",function(){return v.button(".previous.btn.btn-default",function(){return v.i("#prev-page-button.fa.fa-arrow-left")}),v.button(".slideshow-button.btn.btn-default",function(){return v.i(".fa.fa-play")}),v.button(".next.btn.btn-default",function(){return v.i("#next-page-button.fa.fa-arrow-right")})})}),v.div("#posts-container.row")}),y="position:fixed;top:0;bottom:0;"+(y="vertical-align:middle;height:100%;max-width:100%;max-height:100%;"),m=v.renderable(function(n){return v.div(".listview-list-entry",{style:"height:100%;width:100%;"},function(){return v.span(function(){var t,e;return t=n.photos[0],0,null,console.log("photo",t),e=t.original_size.url,v.a({href:n.post_url,target:"_blank"},function(){return v.img({src:e,style:y})})})})}),d=function(){var t=(u(e,c.View),e);function e(){return s(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return t.prototype.template=m,t.prototype.className="post",t}.call(void 0),h=function(){var t=(u(r,c.CollectionView),o(r,[{key:"manage_slideshow",value:function(){return this.ui.slideshow_button.hasClass("fa-play")?this.start_slideshow():this.stop_slideshow()}},{key:"start_slideshow",value:function(){var t=this;return console.log("start slideshow"),this.slideshow_handler=setInterval(function(){return console.log("getting next page"),t.get_next_page()},6e3),this.ui.slideshow_button.removeClass("fa-play"),this.ui.slideshow_button.addClass("fa-stop")}},{key:"stop_slideshow",value:function(){return clearInterval(this.slideshow_handler),this.ui.slideshow_button.removeClass("fa-stop"),this.ui.slideshow_button.addClass("fa-play")}},{key:"get_next_page",value:function(){var t=this;return this.collection.getNextPage().done(function(){return t.set_image_layout()})}},{key:"get_prev_page",value:function(){var t=this;return this.collection.getPreviousPage().done(function(){return t.set_image_layout()})}},{key:"get_another_page",value:function(t){var e,n=this;switch(t){case"prev":e=this.collection.getPreviousPage();break;case"next":e=this.collection.getNextPage();break;default:e=null}if(e)return e.done(function(){return n.set_image_layout()})}},{key:"handle_key_command",value:function(t){if("prev"===t||"next"===t)return this.get_another_page(t)}},{key:"keydownHandler",value:function(t){var e,n,o,i;for(e in function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,r),o=[],n=this.keycommands)i=n[e],t.keyCode===i?o.push(this.handle_key_command(e)):o.push(void 0);return o}},{key:"set_image_layout",value:function(){var t,e=this;return t=l(".post"),f(t,function(){return e.ui.posts.show(),e.masonry.reloadItems(),e.masonry.layout()})}},{key:"onDomRefresh",value:function(){return l("html").keydown(this.keydownHandler),this.masonry=new p("#posts-container",{gutter:2,isInitLayout:!1,itemSelector:".post"}),this.set_image_layout()}},{key:"onBeforeDestroy",value:function(){return l("html").unbind("keydown",this.keydownHandler),this.stop_slideshow(),this.masonry.destroy()}}]),r);function r(){s(this,r);var t=a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments));return t.keydownHandler=t.keydownHandler.bind(t),t}return t.prototype.template=g,t.prototype.childView=d,t.prototype.childViewContainer="#posts-container",t.prototype.ui={posts:"#posts-container",slideshow_button:".slideshow-button",next_button:"#next-page-button",prev_putton:"#prev-page-button"},t.prototype.events={"click @ui.prev_putton":"get_prev_page","click @ui.next_button":"get_next_page","click @ui.slideshow_button":"manage_slideshow"},t.prototype.keycommands={prev:65,next:90},t}.call(void 0),t.exports=h},94:function(t,n,o){var i,r;
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e){"use strict";i=[o(103)],void 0===(r=function(t){return function(e,t){"use strict";var i=e.jQuery,r=e.console;function s(t,e){for(var n in e){t[n]=e[n]}return t}var n=Array.prototype.slice;function a(t){if(Array.isArray(t)){return t}var e=typeof t=="object"&&typeof t.length=="number";if(e){return n.call(t)}return[t]}function u(t,e,n){if(!(this instanceof u)){return new u(t,e,n)}var o=t;if(typeof t=="string"){o=document.querySelectorAll(t)}if(!o){r.error("Bad element for imagesLoaded "+(o||t));return}this.elements=a(o);this.options=s({},this.options);if(typeof e=="function"){n=e}else{s(this.options,e)}if(n){this.on("always",n)}this.getImages();if(i){this.jqDeferred=new i.Deferred}setTimeout(this.check.bind(this))}(u.prototype=Object.create(t.prototype)).options={},u.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this)},u.prototype.addElementImages=function(t){if(t.nodeName=="IMG"){this.addImage(t)}if(this.options.background===true){this.addElementBackgroundImages(t)}var e=t.nodeType;if(!e||!l[e]){return}var n=t.querySelectorAll("img");for(var o=0;o<n.length;o++){var i=n[o];this.addImage(i)}if(typeof this.options.background=="string"){var r=t.querySelectorAll(this.options.background);for(o=0;o<r.length;o++){var s=r[o];this.addElementBackgroundImages(s)}}};var l={1:true,9:true,11:true};function o(t){this.img=t}function h(t,e){this.url=t;this.element=e;this.img=new Image}return u.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var n=/url\((['"])?(.*?)\1\)/gi,o=n.exec(e.backgroundImage);null!==o;){var i=o&&o[2];i&&this.addBackground(i,t),o=n.exec(e.backgroundImage)}},u.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},u.prototype.addBackground=function(t,e){var n=new h(t,e);this.images.push(n)},u.prototype.check=function(){var o=this;function e(t,e,n){setTimeout(function(){o.progress(t,e,n)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},u.prototype.progress=function(t,e,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&r&&r.log("progress: "+n,t,e)},u.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},(o.prototype=Object.create(t.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},o.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(h.prototype=Object.create(o.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},h.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},h.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},u.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((i=t).fn.imagesLoaded=function(t,e){return new u(this,t,e).jqDeferred.promise(i(this))})},u.makeJQueryPlugin(),u}(e,t)}.apply(n,i))||(t.exports=r)}("undefined"!=typeof window?window:this)}}]);
//# sourceMappingURL=bumblr-view-blog-view-a46deca9e94d2684e466.js.map