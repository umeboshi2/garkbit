(self.webpackJsonp=self.webpackJsonp||[]).push([[25],{608:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(609),o=(i=r)&&i.__esModule?i:{default:i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s,d=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};s=function(e){function t(){u(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.valid=e.valid.bind(e),e.invalid=e.invalid.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"valid",value:function(e,n){var i;return d(this,t),(i=this.$("[data-validation="+n+"]")).parent().removeClass("has-danger").addClass("has-success"),i.removeClass("is-invalid").addClass("is-valid")}},{key:"invalid",value:function(e,n){var i;return d(this,t),this.failure(this.model),(i=this.$("[data-validation="+n+"]")).parent().removeClass("has-success").addClass("has-danger"),i.removeClass("is-valid").addClass("is-invalid")}}]),t}(o.default),t.default=s},609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=l(n(7)),r=l(n(0)),o=n(3),u=l(n(107));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c,f=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};c=function(){var e=function(e){function t(){s(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.valid=e.valid.bind(e),e.invalid=e.invalid.bind(e),e.listenTo(e,"render",e.hideActivityIndicator),e.listenTo(e,"render",e.prepareModel),e.listenTo(e,"save:form:success",e.success),e.listenTo(e,"save:form:failure",e.failure),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"delegateEvents",value:function(e){return this.ui=r.default.extend(this._baseUI(),r.default.result(this,"ui")),this.events=r.default.extend(this._baseEvents(),r.default.result(this,"events")),function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delegateEvents",this).call(this,e)}},{key:"_baseUI",value:function(){return{submit:'input[type="submit"]',activityIndicator:".spinner"}}},{key:"_baseEvents",value:function(){var e;return(e={"change [data-validation]":this.validateField,"blur [data-validation]":this.validateField,"keyup [data-validation]":this.validateField})["click "+this.ui.submit]=this.processForm,e}},{key:"createModel",value:function(){throw new Error("implement #createModel in your FormView subclass to return a Backbone model")}},{key:"prepareModel",value:function(){return this.model=this.createModel(),this.setupValidation()}},{key:"validateInput",value:function(e){var t,n,i;return n=e.attr("data-validation"),i=e.val(),(t=this.model.preValidate(n,i))?(e.parent().children(".invalid-feedback").text(t),this.invalid(this,n)):this.valid(this,n)}},{key:"validateField",value:function(e){var t;return t=(0,a.default)(e.target),this.validateInput(t)}},{key:"processForm",value:function(e){var t;return e.preventDefault(),this.showActivityIndicator(),t=(0,a.default)("[data-validation]"),this.validateInput(t),this.updateModel(),this.saveModel()}},{key:"updateModel",value:function(){throw new Error("implement #updateModel in your FormView subclass to update the attributes of @model")}},{key:"saveModel",value:function(){var e,t=this;return e={success:function(){return t.trigger("save:form:success",t.model)},error:function(){return t.trigger("save:form:failure",t.model)}},this.model.save({},e)}},{key:"success",value:function(e){return this.render(),this.onSuccess(e)}},{key:"onSuccess",value:function(){return null}},{key:"failure",value:function(e){return this.hideActivityIndicator(),this.onFailure(e)}},{key:"onFailure",value:function(){return null}},{key:"showActivityIndicator",value:function(){return this.ui.activityIndicator.show(),this.ui.submit.hide()}},{key:"hideActivityIndicator",value:function(){return this.ui.activityIndicator.hide(),this.ui.submit.show()}},{key:"setupValidation",value:function(){return u.default.unbind(this),u.default.bind(this,{valid:this.valid,invalid:this.invalid})}},{key:"valid",value:function(e,n){return f(this,t),this.$("[data-validation="+n+"]").removeClass("invalid").addClass("valid")}},{key:"invalid",value:function(e,n){return f(this,t),this.failure(this.model),this.$("[data-validation="+n+"]").removeClass("valid").addClass("invalid")}}]),t}(o.View);return e.prototype.tagName="form",e.prototype.className="needs-validation",e}.call(void 0),t.default=c},610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.name_content_form=t.login_form=t.make_login_form=t.make_field_select=t.make_field_textarea=t.make_field_input=t.form_group_input_div=void 0;var i,a,r,o,u,l,s,d,c=n(6),f=(i=c)&&i.__esModule?i:{default:i},p=n(0);t.form_group_input_div=a=f.default.renderable((function(e){return f.default.div(".form-group",(function(){var t,n,i;return f.default.label(".control-label",{for:e.input_id},e.label),i="#"+e.input_id+".form-control",t=e.input_attributes,n=f.default.input,(null!=e?e.input_type:void 0)?(n=f.default[e.input_type])(i,t,(function(){return f.default.text(null!=e?e.content:void 0)})):n(i,t),f.default.div(".invalid-feedback")}))})),t.make_field_input=o=function(e){return f.default.renderable((function(t){return a({input_id:"input_"+e,label:(0,p.capitalize)(e),input_attributes:{name:e,placeholder:e,value:t[e],data:{validation:e}}})}))},t.make_field_textarea=l=function(e){return f.default.renderable((function(t){return a({input_id:"input_"+e,input_type:"textarea",label:(0,p.capitalize)(e),input_attributes:{name:e,placeholder:e,data:{validation:e}},content:t[e]})}))},t.make_field_select=u=function(e,t){return f.default.renderable((function(n){return f.default.div(".form-group",(function(){return f.default.label(".control-label",{for:"select_"+e}),(0,p.capitalize)(e)})),f.default.select(".form-control",{name:"select_"+e},(function(){var i,a,r,o;for(o=[],i=0,a=t.length;i<a;i++)r=t[i],n[e]===r?o.push(f.default.option({selected:null,value:r},r)):o.push(f.default.option({value:r},r));return o}))}))},t.make_login_form=s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";return f.default.renderable((function(){return f.default.form({role:"form",method:t,action:e},(function(){return a({input_id:"input_username",label:"User Name",input_attributes:{name:"username",placeholder:"User Name"}}),a({input_id:"input_password",label:"Password",input_attributes:{name:"password",type:"password",placeholder:"Type your password here...."}}),f.default.button(".btn.btn-secondary",{type:"submit"},"login")}))}))},t.login_form=r=s(),t.name_content_form=d=f.default.renderable((function(){return a({input_id:"input_name",label:"Name",input_attributes:{name:"name",placeholder:"Name"}}),a({input_id:"input_content",input_type:f.default.textarea,label:"Content",input_attributes:{name:"content",placeholder:"..."}}),f.default.input(".btn.btn-secondary.btn-sm",{type:"submit",value:"Add"})})),t.form_group_input_div=a,t.make_field_input=o,t.make_field_textarea=l,t.make_field_select=u,t.make_login_form=s,t.login_form=r,t.name_content_form=d},920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),l=f(n(6)),s=f(n(608)),d=n(610),c=f(n(582));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i=u.Radio.channel("bumblr"),r=l.default.renderable((function(){return(0,d.form_group_input_div)({input_id:"input_blogname",label:"Blog Name",input_attributes:{name:"blog_name",placeholder:"",value:"dutch-and-flemish-painters"}}),l.default.input(".btn.btn-default.btn-xs",{type:"submit",value:"Add Blog"})})),a=function(){var e=function(e){function t(){return p(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"updateModel",value:function(){return this.collection=i.request("get-local-blogs"),this.model=this.collection.addBlog(this.ui.blog_name.val())}},{key:"onSuccess",value:function(){return(0,c.default)("#bumblr/listblogs")}},{key:"createModel",value:function(){return new u.Model({url:"/"})}}]),t}(s.default);return e.prototype.template=r,e.prototype.ui={blog_name:'[name="blog_name"]'},e}.call(void 0),t.default=a}}]);
//# sourceMappingURL=bumblr-view-add-blog-b14b2200499fca93e57a.js.map