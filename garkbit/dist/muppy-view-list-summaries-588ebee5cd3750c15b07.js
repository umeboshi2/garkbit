(self.webpackJsonp=self.webpackJsonp||[]).push([[63],{524:function(t,e,n){"use strict";function u(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:u(r,e,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0}var o,r,i,a,l,p,c,f,s,m,d,y,b,h,v,_,k,g,w,O,j=function(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),t};function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}o=n(4),i=n(1),m=n(2),w=n(3),g=n(5).default,n(11);var R=n(17);k=R.modal_close_button,s=i.Radio.channel("global"),d=i.Radio.channel("messages"),i.Radio.channel("muppy"),r=s.request("main:app:AuthModel"),s.request("main:app:AuthCollection"),a=s.request("crud:view:item"),l=s.request("crud:view:list"),O={name:"summary",entryField:"name",routeName:"muppy"},h=s.request("crud:template:list",O),b=function(o){return w.renderable(function(n){var t;return t=".btn.btn-secondary.btn-sm",w.span(".mr-auto",function(){var t,e;return t="#"+o.routeName+"/"+o.name+"/view/"+n.id,e=n[o.entryField]+" - "+n.content.length,w.a({href:t},e)}),w.span(".ml-auto.btn-group.pull-right",function(){return w.button(".mark-item."+t+".btn-info.fa.fa-spinner"," mark"),w.button(".edit-item."+t+".btn-info.fa.fa-edit"," edit"),w.button(".delete-item."+t+".btn-danger.fa.fa-close"," delete")})})}(O),v=[],_=w.renderable(function(t){return w.div(".modal-dialog.modal-lg",function(){return w.div(".modal-content",function(){return w.h3(".center","Diff of Summaries"),w.div(".modal-body",function(){return w.pre({style:"font-size:.2rem;"},t.output)}),w.div(".modal-footer",function(){return w.ul(".list-inline",function(){return"btn.btn-default.btn-sm",w.li("#confirm-delete-button",function(){return k("OK","check")}),w.li("#cancel-delete-button",function(){return k("Cancel")})})})})})}),y=function(){var t=(q(e,m.View),j(e,[{key:"onDomRefresh",value:function(){return o("#modal").addClass("fade")}}]),e);function e(){return P(this,e),D(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return t.prototype.template=_,t}.call(void 0),c=function(){var t=(q(e,a),j(e,[{key:"ui",value:function(){var t;return(t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ui",this).call(this)).markItem=".mark-item",t}},{key:"events",value:function(){var t;return(t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"events",this).call(this))["click @ui.markItem"]="markItemClicked",t}},{key:"markItemClicked",value:function(){return v.length<=1?(v.push(this.model),this.ui.markItem.removeClass("btn-info"),this.ui.markItem.addClass("btn-primary")):this.ui.markItem.hide(),2===v.length&&o(".mark-item.btn-info").hide(),console.log(v)}}]),e);function e(){return P(this,e),D(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return t.prototype.route_name="muppy",t.prototype.template=b,t.prototype.item_type="summary",t}.call(void 0),p=function(){var t=(q(e,r),e);function e(){return P(this,e),D(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return t.prototype.url="api/dev/memdiff",t}.call(void 0),f=function(){var t=(q(e,l),j(e,[{key:"onDomRefresh",value:function(){var t;for(t=[];v.length;)t.push(v.pop());return t}},{key:"addSummaryClicked",value:function(){return g("#muppy")}},{key:"showDiffClicked",value:function(){var e,t,n,o,r=this;return console.log("MARKEDMODELS",v),t=v[0],n=v[1],(o=(e=new p({sum1:t.id,sum2:n.id})).save()).done(function(){var t;return t=new y({model:e}),r._show_modal(t,!1),d.request("info","diff should be performed"),console.log(e.attributes)}),o.fail(function(){return d.request("danger","something bad happened")})}},{key:"_show_modal",value:function(t,e){var n;return(n=s.request("main:app:object").getView().getRegion("modal")).backdrop=e,n.show(t)}}]),e);function e(){return P(this,e),D(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return t.prototype.template=w.renderable(function(){return w.button(".add-summary-button.btn.btn-default","Add summary"),w.button(".diff-summaries-button.btn.btn-default","Show diff"),h()}),t.prototype.ui={addSummaryBtn:".add-summary-button",showDiffBtn:".diff-summaries-button"},t.prototype.events={"click @ui.addSummaryBtn":"addSummaryClicked","click @ui.showDiffBtn":"showDiffClicked"},t.prototype.route_name="muppy",t.prototype.childView=c,t.prototype.template2=h,t.prototype.childViewContainer="#summary-container",t.prototype.item_type="summary",t}.call(void 0),t.exports=f}}]);
//# sourceMappingURL=muppy-view-list-summaries-588ebee5cd3750c15b07.js.map