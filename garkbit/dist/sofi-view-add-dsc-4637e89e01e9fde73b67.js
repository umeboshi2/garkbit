(self.webpackJsonp=self.webpackJsonp||[]).push([[12],{253:function(e,t,o){"use strict";var i,n,r,s,a,d,u,l,c,f,p,h,v,b,y=function(e,t,o){return t&&m(e.prototype,t),o&&m(e,o),e};function m(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}f=o(0),n=o(1),s=o(33),h=o(37),v=o(5),u=o(165),o(169),o(220),b=o(3);var k=o(31);function O(){return _(this,O),g(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}function M(){return _(this,M),g(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}p=k.make_field_input,k.make_field_select,n.Radio.channel("global"),l=n.Radio.channel("messages"),i=n.Radio.channel("sofi"),a=b.renderable(function(e){var t,o,i;for(b.div(".listview-header","Document"),t=0,o=(i=["name","title"]).length;t<o;t++)p(i[t])(e);return b.div("#editor-mode-button.btn.btn-default","Change to handlebars mode"),b.div("#ace-editor",{style:"position:relative;width:100%;height:40em;"}),b.input(".btn.btn-default",{type:"submit",value:"Submit"}),b.div(".spinner.fa.fa-spinner.fa-spin")}),w(O,r=function(){var e=(w(t,s),y(t,[{key:"ui",value:function(){var e,t;return e={editor:"#ace-editor",edit_mode_btn:"#editor-mode-button"},t=h(this.fieldList),f.extend(t,e),t}},{key:"set_edit_mode",value:function(e){return this.editorMode=e,this.editor.getSession().setMode("ace/mode/"+this.editorMode)}},{key:"change_edit_mode",value:function(){var e;return this.ui.edit_mode_btn.text("Change to "+this.editorMode+" mode"),e="markdown"===this.editorMode?"handlebars":"markdown",this.set_edit_mode(e)}},{key:"afterDomRefresh",value:function(){var e;if(this.set_edit_mode(this.editorMode),this.model.has("content"))return e=this.model.get("content"),this.editor.setValue(e)}},{key:"updateModel",value:function(){var e,t,o,i;for(t=0,o=(i=this.fieldList).length;t<o;t++)e=i[t],this.model.set(e,this.ui[e].val());return this.model.set("content",this.editor.getValue())}},{key:"onSuccess",value:function(e){var t;return t=this.model.get("name"),l.request("success",t+" saved successfully."),v("#sofi/dsc/view/"+this.model.id)}}]),t);function t(){return _(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return e.prototype.editorMode="markdown",e.prototype.editorContainer="ace-editor",e.prototype.fieldList=["name","title"],e.prototype.template=a,e.prototype.events={"click @ui.edit_mode_btn":"change_edit_mode"},e.prototype.behaviors={HasAceEditor:{behaviorClass:u}},e}.call(void 0)),y(O,[{key:"createModel",value:function(){return i.request("db:ebdsc:new")}},{key:"saveModel",value:function(){return i.request("db:ebdsc:collection").add(this.model),function e(t,o,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"saveModel",this).call(this)}},{key:"onSuccess",value:function(e){return v("#sofi/dsc/view/"+e.id)}}]),c=O,w(M,r),y(M,[{key:"createModel",value:function(){return this.model}}]),d=M,e.exports={NewFormView:c,EditFormView:d}}}]);
//# sourceMappingURL=sofi-view-add-dsc-4637e89e01e9fde73b67.js.map