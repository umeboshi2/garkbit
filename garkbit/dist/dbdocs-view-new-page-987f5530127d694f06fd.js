(self.webpackJsonp=self.webpackJsonp||[]).push([[8],{206:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditPageView=t.NewPageView=void 0;var r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i,a,u,l,s,c,f,d=m(o(0)),p=m(o(1)),h=m(o(3)),v=m(o(35)),y=m(o(40)),b=(m(o(5)),m(o(156))),_=o(33);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(){return g(this,P),w(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}function k(){return g(this,k),w(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}p.default.Radio.channel("global"),l=p.default.Radio.channel("messages"),c=p.default.Radio.channel("resources"),f=["name","title","description"],a=h.default.renderable(function(e){var t,o,r;for(h.default.div(".listview-header","Document"),o=0,r=f.length;o<r;o++)t=f[o],(0,_.make_field_input)(t)(e);return(0,_.make_field_select)(t,["html","markdown"])(e),h.default.div("#ace-editor",{style:"position:relative;width:100%;height:40em;"}),h.default.input(".btn.btn-default",{type:"submit",value:"Submit"}),h.default.div(".spinner.fa.fa-spinner.fa-spin")}),i=function(){var e=(O(t,v.default),r(t,[{key:"ui",value:function(){var e;return e=(0,y.default)(this.fieldList),d.default.extend(e,{editor:"#ace-editor"}),e}},{key:"afterDomRefresh",value:function(){var e;if(this.model.has("content"))return e=this.model.get("content"),this.editor.setValue(e)}},{key:"updateModel",value:function(){var e,t,o,r;for(t=0,o=(r=this.fieldList).length;t<o;t++)e=r[t],this.model.set(e,this.ui[e].val());return this.model.set("content",this.editor.getValue())}},{key:"onSuccess",value:function(e){var t;return t=this.model.get("name"),l.request("success",t+" saved successfully.")}}]),t);function t(){return g(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return e.prototype.editorMode="html",e.prototype.editorContainer="ace-editor",e.prototype.fieldList=f,e.prototype.template=a,e.prototype.behaviors={HasAceEditor:{behaviorClass:b.default}},e}.call(void 0),t.NewPageView=(O(P,i),r(P,[{key:"createModel",value:function(){return c.request("new-document")}},{key:"saveModel",value:function(){return c.request("document-collection").add(this.model),function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(r):void 0}(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"saveModel",this).apply(this,arguments)}}]),s=P),t.EditPageView=(O(k,i),r(k,[{key:"createModel",value:function(){return this.model}}]),u=k),t.NewPageView=s,t.EditPageView=u}}]);
//# sourceMappingURL=dbdocs-view-new-page-987f5530127d694f06fd.js.map