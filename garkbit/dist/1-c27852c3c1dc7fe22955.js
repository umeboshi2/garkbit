(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{113:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o=n(1),d=n(177),r=o.Radio.channel("hubby"),p=(s="/rest/v0/main")+"/meeting",c=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,o.Model),t}();return e.prototype.urlRoot=p,e}.call(void 0),u=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,o.Model),t}();return e.prototype.urlRoot=p,e}.call(void 0),a=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,o.Collection),h(t,[{key:"parse",value:function(e){return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e.data)}}]),t}();return e.prototype.model=c,e.prototype.url=p,e}.call(void 0),l=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,o.Model),t}();return e.prototype.urlRoot="/rest/v0/main/item",e}.call(void 0),i=function(){var e=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,o.Collection),h(t,[{key:"url",value:function(){return s+"/item/search?"+d.stringify(this.searchParams)}}]),t}();return e.prototype.model=l,e}.call(void 0),f=new a,r.reply("meetinglist",function(){return f}),e.exports={apiroot:s,MeetingCollection:a,MainMeetingModel:u,ItemCollection:i}},131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClzPageCollection=t.EbDescCollection=t.EbConfigCollection=void 0;var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,_,w,m,g,O,j,P,k,C,R,E,x,M,S,q,N,L,T,V,I,D,z,A,F,B,U,W=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},J=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),H=n(195),X=(o=H)&&o.__esModule?o:{default:o};function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}q=n(0),l=n(1),F=n(108);var $=n(194);j=$.LocalStorage,P=l.Radio.channel("global"),r=l.Radio.channel("sofi"),a=P.request("main:app:AuthModel"),u=P.request("main:app:AuthCollection"),L=(N="/api/dev/bapi/sofi")+"/ebcsvcfg",z=N+"/ebcsvdsc",D={channelName:"sofi"},R=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,l.Model),t}();return e.prototype.url="/assets/data/superheroes.json",e}.call(void 0),A=new R,r.reply("get-superheroes-model",function(){return A}),c=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,l.Model),J(t,[{key:"initialize",value:function(){return this.fetch(),this.on("change",this.save,this)}},{key:"fetch",value:function(){return this.set(JSON.parse(localStorage.getItem(this.id)))}},{key:"save",value:function(e,t){return localStorage.setItem(this.id,JSON.stringify(this.toJSON()))}},{key:"destroy",value:function(e){return localStorage.removeItem(this.id)}},{key:"isEmpty",value:function(){return q.size(this.attributes<=1)}}]),t}(),_=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,l.Collection),t}();return e.prototype.localStorage=new j("ComicPhotoNames"),e}.call(void 0),r.reply("ComicPhotoNames",function(){return _}),r.reply("get-comic-image-urls",function(){return new c({id:"comic-image-urls"}).toJSON()}),r.reply("add-comic-image-url",function(e,t){return new c({id:"comic-image-urls"}).set(e,t)}),r.reply("clear-comic-image-urls",function(){var e;return(e=new c({id:"comic-image-urls"})).destroy(),console.log("localStorage",localStorage[e.id])}),m=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,a),J(t,[{key:"parse",value:function(e,n){return"string"==typeof e.content&&(e.content=JSON.parse(e.content)),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e,n)}}]),t}();return e.prototype.urlRoot=L,e}.call(void 0),t.EbConfigCollection=w=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url=L,e.prototype.model=m,e}.call(void 0),new X.default(q.extend(D,{modelName:"ebcfg",modelClass:m,collectionClass:w})),O=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,a),t}();return e.prototype.urlRoot=z,e}.call(void 0),t.EbDescCollection=g=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url=z,e.prototype.model=O,e}.call(void 0),new X.default(q.extend(D,{modelName:"ebdsc",modelClass:O,collectionClass:g})),h=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,a),J(t,[{key:"parse",value:function(e,n){return console.warn("ClzPage is deprecated"),"string"==typeof e.clzdata&&(e.clzdata=JSON.parse(e.clzdata)),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e,n)}}]),t}();return e.prototype.urlRoot=N+"/ebclzpage",e}.call(void 0),t.ClzPageCollection=y=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),J(t,[{key:"fetch",value:function(e){return console.warn("ClzPageCollection is deprecated"),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}}]),t}();return e.prototype.url=N+"/ebclzpage",e.prototype.model=h,e}.call(void 0),new X.default(q.extend(D,{modelName:"clzpage",modelClass:h,collectionClass:y})),I=["id","comic_id","list_id","bpcomicid","bpseriesid","rare","publisher","releasedate","seriesgroup","series","issue","issueext","quantity","currentprice","url","image_src","created_at","updated_at"],r.reply("dbComicColumns",function(){return I}),V=["collectionStatus","photos","workspace"],T=["ReleaseDate"],p=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,a),J(t,[{key:"parse",value:function(e,n){var o;return"string"==typeof e.content&&(e.content=JSON.parse(e.content)),"string"==typeof e.releasedate&&(o=F(e.releasedate),e.ReleaseDate=o.format("ddd MMM DD, YYYY")),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e,n)}},{key:"fetch",value:function(e){var n;return(e=e||{}).data=e.data||{},(null!=(n=e.data)?n.withRelated:void 0)||(e.data.withRelated=V),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}},{key:"save",value:function(e,n){var o=this;return V.concat(T).forEach(function(e){if(o.has(e))return o.unset(e)}),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"save",this).call(this,e,n)}}]),t}();return e.prototype.urlRoot=N+"/ebclzcomic",e}.call(void 0),d=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),J(t,[{key:"fetch",value:function(e){var n;return(e=e||{}).data=e.data||{},(null!=(n=e.data)?n.withRelated:void 0)||(e.data.withRelated=V),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}}]),t}();return e.prototype.url=N+"/ebclzcomic",e.prototype.model=p,e}.call(void 0),new X.default(q.extend(D,{modelName:"clzcomic",modelClass:p,collectionClass:d})),C=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url=N+"/ebclzcomic",e.prototype.model=r.request("db:clzcomic:modelClass"),e.prototype.state={firstPage:0,pageSize:1e4,sortColumn:"seriesgroup",sortDirection:"asc"},e}.call(void 0),r.reply("db:clzcomic:SeriesGroupCollection",function(){return C}),k=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url=N+"/ebclzcomic",e.prototype.model=r.request("db:clzcomic:modelClass"),e.prototype.state={firstPage:0,pageSize:1e4,sortColumn:"publisher",sortDirection:"asc"},e}.call(void 0),r.reply("db:clzcomic:PublisherCollection",function(){return k}),s=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,a),t}();return e.prototype.urlRoot=N+"/clzcollectionstatus",e}.call(void 0),f=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url=N+"/clzcollectionstatus",e.prototype.model=s,e}.call(void 0),new X.default(q.extend(D,{modelName:"clzcollectionstatus",modelClass:s,collectionClass:f})),U=["comic"],B=[],M=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,a),J(t,[{key:"save",value:function(e,n){var o=this;return U.concat(B).forEach(function(e){if(o.has(e))return o.unset(e)}),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"save",this).call(this,e,n)}}]),t}();return e.prototype.urlRoot=N+"/ebcomicworkspace",e}.call(void 0),S=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),J(t,[{key:"fetch",value:function(e){var n;return(e=e||{}).data=e.data||{},(null!=(n=e.data)?n.withRelated:void 0)||(e.data.withRelated=U),W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}}]),t}();return e.prototype.url=N+"/ebcomicworkspace",e.prototype.model=M,e}.call(void 0),new X.default(q.extend(D,{modelName:"ebcomicworkspace",modelClass:M,collectionClass:S})),x=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url=N+"/ebcomicworkspace",e.prototype.model=r.request("db:clzcomic:modelClass"),e.prototype.state={firstPage:0,pageSize:1e4,sortColumn:"name",sortDirection:"asc"},e}.call(void 0),r.reply("db:ebcomicworkspace:WorkspaceCollection",function(){return x}),E=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url="/api/dev/misc/unattached-comics",e.prototype.model=p,e}.call(void 0),r.reply("db:unattached:collectionClass",function(){return E}),v=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,a),t}();return e.prototype.urlRoot=N+"/comicphotoname",e}.call(void 0),b=function(){var e=function(e){function t(){return Y(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,u),t}();return e.prototype.url=N+"/comicphotoname",e.prototype.model=v,e}.call(void 0),new X.default(q.extend(D,{modelName:"comicphotoname",modelClass:v,collectionClass:b})),i={},r.reply("locals:get",function(e){return i[e]}),r.reply("locals:set",function(e,t){return i[e]=t}),r.reply("locals:delete",function(e){return delete i[e]}),r.request("locals:set","currentQueryWhere",{}),t.EbConfigCollection=w,t.EbDescCollection=g,t.ClzPageCollection=y},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=(a(n(1)),a(n(2)));function a(e){return e&&e.__esModule?e:{default:e}}r=n(86),n(85),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Behavior),i(t,[{key:"options",value:function(){return{jviewSelector:".jsonview"}}},{key:"ui",value:function(){return{jsonView:this.getOption("jviewSelector")}}},{key:"onDomRefresh",value:function(){var e;return e=this.view.model.toJSON(),this.view.jsonView=new r(e),this.ui.jsonView.prepend(this.view.jsonView.dom)}}]),t}(),t.default=o},138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsView=t.ThemeSwitchView=t.FrontDoorMainView=void 0;var o,r,i,u,a,l,c,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},d=w(n(178)),h=w(n(4)),y=w(n(1)),v=(w(n(2)),w(n(3))),b=w(n(31)),_=w(n(137));function w(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i=y.default.Radio.channel("global"),u=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,b.default.Renderer),f(t,[{key:"link",value:function(e,n,o){var r;return e.startsWith("#")?p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"link",this).call(this,e,n,o):("."===(r=d.default.dirname(location.hash))&&(r="#frontdoor/view"),e.startsWith("http")||(e=d.default.join(r,e)),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"link",this).call(this,e,n,o))}}]),t}(),s=new u,o=v.default.renderable(function(e){return v.default.article(".document-view.content",function(){return v.default.div(".body",function(){return v.default.raw((0,b.default)(e.content,{renderer:s}))})})}),l=["vanilla","cornsilk","BlanchedAlmond","DarkSeaGreen","LavenderBlush"],t.ThemeSwitchView=c=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,y.default.Marionette.View),f(t,[{key:"events",value:function(){return{"click @ui.theme":"switch_theme"}}},{key:"templateContext",value:function(){return{ui:this.ui}}},{key:"switch_theme",value:function(e){var t;return t=(0,h.default)(e.target).html(),this.performSwitch(t)}},{key:"performSwitch",value:function(e){return console.log("performSwitch",e),i.request("main:app:set-theme",e),i.request("main:app:switch-theme",e)}}]),t}();return e.prototype.ui={stylesheet:"#main-stylesheet",theme:".theme"},e.prototype.template=v.default.renderable(function(e){return v.default.div(function(){return l.forEach(function(e){return v.default.div(".theme.btn.btn-default",e)})})}),e}.call(void 0),t.FrontDoorMainView=r=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,y.default.Marionette.View),t}();return e.prototype.template=o,e}.call(void 0),t.StatsView=a=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,y.default.Marionette.View),t}();return e.prototype.template=v.default.renderable(function(e){return v.default.div(".jsonview.listview-list-entry",{style:"overflow:auto"})}),e.prototype.behaviors={HasJsonView:{behaviorClass:_.default}},e}.call(void 0),t.FrontDoorMainView=r,t.ThemeSwitchView=c,t.StatsView=a},143:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,w,m,g,O,j,P,k,C=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),R=M(n(4)),E=M(n(1)),x=n(101);function M(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}v=E.default.Radio.channel("global"),o=E.default.Radio.channel("ebcsv"),O=v.request("main:app:dbConn","ebcsv"),s=new x.LoveStore(O,"Config"),f=new x.LoveStore(O,"Description"),c=new x.LoveStore(O,"ComicUrl"),p=function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Model),t}();return e.prototype.loveStore=s,e}.call(void 0),d=function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Collection),t}();return e.prototype.loveStore=s,e.prototype.model=p,e}.call(void 0),y=function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Model),t}();return e.prototype.loveStore=f,e}.call(void 0),h=function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Collection),t}();return e.prototype.loveStore=f,e.prototype.model=y,e}.call(void 0),a=function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Model),C(t,[{key:"idAttrubute",value:function(){return"url"}}]),t}();return e.prototype.loveStore=c,e}.call(void 0),l=function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Collection),t}();return e.prototype.loveStore=c,e.prototype.model=a,e}.call(void 0),P=new d,k=new h,g=new l,o.reply("get_local_configs",function(){return P}),o.reply("get-config-model",function(){return p}),o.reply("configCollection",function(){return d}),o.reply("get_local_descriptions",function(){return k}),o.reply("get-description-model",function(){return y}),o.reply("descCollection",function(){return h}),o.reply("get_comic_urls",function(){return g}),o.reply("get-comic-url-model",function(){return a}),o.reply("get-comic-url-collection",function(){return l}),u=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Model),C(t,[{key:"initialize",value:function(){return this.fetch(),this.on("change",this.save,this)}},{key:"fetch",value:function(){return this.set(JSON.parse(localStorage.getItem(this.id)))}},{key:"save",value:function(e,t){return localStorage.setItem(this.id,JSON.stringify(this.toJSON())),R.default.ajax({success:t.success,error:t.error})}},{key:"destroy",value:function(e){return localStorage.removeItem(this.id)}},{key:"isEmpty",value:function(){return _.size(this.attributes<=1)}}]),t}(),w=["format","location","returnsacceptedoption","duration","quantity","startprice","dispatchtimemax","conditionid"],o.reply("csv-req-fieldnames-local",function(){return w}),b=["postalcode","paymentprofilename","returnprofilename","shippingprofilename","scheduletime"],o.reply("csv-opt-fieldnames-local",function(){return b}),i=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,u),t}(),function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,i),t}();return e.prototype.fieldType="required",e.prototype.fieldNames=w,e}.call(void 0),function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,i),t}();return e.prototype.fieldType="optional",e.prototype.fieldNames=b,e}.call(void 0),o.reply("get-comic-image-urls",function(){return console.warn("get-comic-image-urls"),new u({id:"comic-image-urls"}).toJSON()}),o.reply("add-comic-image-url",function(e,t){return new u({id:"comic-image-urls"}).set(e,t)}),o.reply("clear-comic-image-urls",function(){var e;return(e=new u({id:"comic-image-urls"})).destroy(),console.log("localStorage",localStorage[e.id])}),r={},o.reply("applet:local:get",function(e){return r[e]}),o.reply("applet:local:set",function(e,t){return r[e]=t}),o.reply("applet:local:delete",function(e){return delete r[e]}),o.reply("set-current-csv-action",function(e){return o.request("applet:local:set","currentCsvAction",e)}),o.reply("get-current-csv-action",function(){return o.request("applet:local:get","currentCsvAction")}),o.reply("set-current-csv-cfg",function(e){return o.request("applet:local:set","currentCsvCfg",e)}),o.reply("get-current-csv-cfg",function(){return o.request("applet:local:get","currentCsvCfg")}),o.reply("set-current-csv-dsc",function(e){return o.request("applet:local:set","currentCsvDsc",e)}),o.reply("get-current-csv-dsc",function(){return o.request("applet:local:get","currentCsvDsc")}),m=function(){var e=function(e){function t(){return S(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,E.default.Model),t}();return e.prototype.url="/assets/data/superheroes.json",e}.call(void 0),j=new m,o.reply("get-superheroes-model",function(){return j})},158:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,a,l,c,s,f,p,d,h;l=n(1),h=n(157).make_dbchannel,f=l.Radio.channel("global"),p=l.Radio.channel("resources"),d="/api/dev/sitedocuments",a=f.request("main:app:AuthModel"),u=f.request("main:app:AuthCollection"),c=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a),t}();return e.prototype.urlRoot=d,e}.call(void 0),s=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,u),t}();return e.prototype.url=d,e.prototype.model=c,e}.call(void 0),h(p,"document",c,s),e.exports={DocumentCollection:s}},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(2)),i=(u(n(5)),u(n(45)));function u(e){return e&&e.__esModule?e:{default:e}}var a,l,c,s=[].indexOf;l=Backbone.Radio.channel("global"),c=Backbone.Radio.channel("messages"),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.AppRouter),o(t,[{key:"before",value:function(){var e;e=l.request("main:app:decode-auth-token"),(0,i.default)(e)||s.call(e.groups,"admin")<0&&c.request("danger","Admin access only!")}}]),t}(),t.default=a},193:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o=n(4),r=n(1),n(2),f=n(3),s=n(31),a=r.Radio.channel("global"),i=f.renderable(function(e){return f.article(".document-view.content",function(){return f.div(".body",function(){return f.raw(s(e.content))})})}),l=["vanilla","cornsilk","BlanchedAlmond","DarkSeaGreen","LavenderBlush"],c=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,r.Marionette.View),p(t,[{key:"events",value:function(){return{"click @ui.theme":"switch_theme"}}},{key:"templateContext",value:function(){return{ui:this.ui}}},{key:"switch_theme",value:function(e){var t;return t=o(e.target).html(),this.performSwitch(t)}},{key:"performSwitch",value:function(e){return console.log("performSwitch",e),a.request("main:app:set-theme",e),a.request("main:app:switch-theme",e)}}]),t}();return e.prototype.ui={stylesheet:"#main-stylesheet",theme:".theme"},e.prototype.template=f.renderable(function(e){return f.div(function(){return l.forEach(function(e){return f.div(".theme.btn.btn-default",e)})})}),e}.call(void 0),u=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,r.Marionette.View),t}();return e.prototype.template=i,e}.call(void 0),e.exports={FrontDoorMainView:u,ThemeSwitchView:c}},200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=y(n(1)),f=(y(n(2)),y(n(3)),y(n(6)),y(n(88))),p=n(33),d=n(34),h=(y(n(5)),y(n(35)));function y(e){return e&&e.__esModule?e:{default:e}}i=s.default.Radio.channel("global"),u=s.default.Radio.channel("messages"),o=s.default.Radio.channel("wikipages"),a=[],l=new s.default.Collection(a),o.reply("get-toolbar-entries",function(){return l}),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.MainController),c(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new f.default({collection:l}),this.layout.showChildView("toolbar",e)}},{key:"_load_view",value:function(e,t,n){var o,r=this;return t.isEmpty()||!t.has("created_at")?((o=t.fetch()).done(function(){return r._show_view(e,t),(0,h.default)()}),o.fail(function(){var e;return e="Failed to load "+n+" data.",u.request("danger",e)})):this._show_view(e,t)}},{key:"list_wikipages",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(87).then(function(){var t,o,r;return t=n(199).default,r=new t({collection:e.collection}),(o=e.collection.fetch()).done(function(){var t;if(e.layout.showChildView("content",r),!e.collection.length)return u.request("warning","adding initial page"),(t=new(i.request("main:app:AuthModel"))).url="/api/dev/bsapi/main/wikipages/X32_ABI",t.fetch().done(function(){return window.location.hash="#"})}),o.fail(function(){return u.request("danger","Failed to load wikipages.")})}.bind(null,n)).catch(n.oe)}},{key:"view_wikipage",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(86).then(function(){var r,i;return r=n(196),i=o.request("get-wikipage",e),console.log("MODEL",i),t._load_view(r,i,"wikipage")}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=d.ToolbarAppletLayout,e.prototype.collection=o.request("wikipage-collection"),e}.call(void 0),t.default=r},201:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiPageCollection=void 0;var o,r,i,u,a,l,c,s,f=n(1),p=(o=f)&&o.__esModule?o:{default:o},d=n(157);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=p.default.Radio.channel("global"),r=p.default.Radio.channel("wikipages"),u=a.request("main:app:AuthModel"),i=a.request("main:app:AuthCollection"),s="/api/dev/bsapi/main/wikipages",l=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,u),t}();return e.prototype.urlRoot=s,e}.call(void 0),t.WikiPageCollection=c=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,i),t}();return e.prototype.url=s,e.prototype.model=l,e}.call(void 0),new c,(0,d.make_dbchannel)(r,"wikipage",l,c),t.WikiPageCollection=c},202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(1)),r=s(n(2)),i=s(n(89));n(201);var u,a,l,c=s(n(200));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.default.Radio.channel("global"),o.default.Radio.channel("wikipages"),a=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,r.default.AppRouter),t}();return e.prototype.appRoutes={wikipages:"list_wikipages","wikipages/view/:name":"view_wikipage"},e}.call(void 0),l=[{button:"#list-button",label:"List",url:"#wikipages",icon:".fa.fa-list"}],u=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,i.default),t}();return e.prototype.Controller=c.default,e.prototype.Router=a,e.prototype.appletEntries=[{label:"Wikipages Menu",menu:l}],e}.call(void 0),t.default=u},204:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},y=(_(n(4)),_(n(1))),v=n(101),b=_(n(36));function _(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u=y.default.Radio.channel("global"),o=y.default.Radio.channel("usgov"),s=u.request("main:app:dbConn","usgov"),a=new v.LoveStore(s,"Role"),r=function(){var e=function(e){function t(){return w(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,y.default.Model),t}();return e.prototype.loveStore=a,e}.call(void 0),i=function(){var e=function(e){function t(){return w(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,y.default.Collection),t}();return e.prototype.loveStore=a,e.prototype.model=r,e}.call(void 0),f=new i,o.reply("get_local_roles",function(){return f}),o.reply("get-role-model",function(){return r}),o.reply("get-role-collection",function(){return i}),c="https://www.govtrack.us/api/v2",l=function(){var e=function(e){function t(){return w(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,b.default),d(t,[{key:"url",value:function(){return c+"/role?current=true"}},{key:"fetcher",value:function(e){var n;return e=e||{},n=this.state.currentPage*this.state.pageSize,e.offset=n,e.dataType="jsonp",h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetcher",this).call(this,e)}},{key:"parse",value:function(e){return console.log("parse(response)",e),this.state.pageSize=e.meta.limit,this.state.totalRecords=e.meta.total_count,this.state.totalPages=Math.ceil(this.state.totalRecords/this.state.pageSize),this.state.lastPage=this.state.totalPages-1,console.log("@state.totalRecords",this.state.totalRecords,this.state.totalPages),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e.objects)}}]),t}();return e.prototype.mode="server",e.prototype.full=!0,e.prototype.baseURL=c,e.prototype.state={firstPage:0,pageSize:20},e.prototype.queryParams={pageSize:"limit",offset:function(){return this.state.currentPage*this.state.pageSize},currentPage:"offset"},e}.call(void 0),p=new l,o.reply("get-roles-collection",function(){return p})},205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=c(n(1)),a=(c(n(2)),c(n(3)),c(n(6)),c(n(88)),n(33)),l=n(34);function c(e){return e&&e.__esModule?e:{default:e}}n(204),n(5),n(35),u.default.Radio.channel("global"),u.default.Radio.channel("messages"),u.default.Radio.channel("resources"),o=u.default.Radio.channel("usgov"),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.MainController),i(t,[{key:"view_index",value:function(){var e=this;return this.setupLayoutIfNeeded(),0,n.e(85).then(function(){var t,r;return t=n(203),(r=o.request("get-roles-collection")).fetch().done(function(){var n;return n=new t({collection:r}),e.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=l.ToolbarAppletLayout,e}.call(void 0),t.default=r},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=f(n(1)),a=f(n(2)),l=f(n(89)),c=f(n(18)),s=f(n(205));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u.default.Radio.channel("global"),u.default.Radio.channel("usgov"),i=[{button:"#list-button",label:"List",url:"#usgov",icon:".fa.fa-list"},{button:"#calendar-button",label:"Calendar",url:"#usgov/calendar",icon:".fa.fa-calendar"}],r=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,a.default.AppRouter),t}();return e.prototype.appRoutes={usgov:"view_index"},e}.call(void 0),o=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,l.default),t}();return e.prototype.Controller=s.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,c.default)("usgov")+" Menu",menu:i}],e}.call(void 0),t.default=o},217:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s=n(3),c=n(5).default;var b=n(33);u=b.MainController;var _=n(34);a=_.ToolbarAppletLayout,i=Backbone.Radio.channel("global"),Backbone.Radio.channel("messages"),o=Backbone.Radio.channel("userprofile"),f=new Backbone.Model({entries:[{name:"Profile",url:"#profile"},{name:"Map",url:"#profile/mapview"},{name:"Settings",url:"#profile/editconfig"},{name:"Change Password",url:"#profile/chpassword"}]}),p=s.renderable(function(e){return s.div(".btn-group.btn-group-justified",function(){var t,n,o,r,i,u;for(u=[],n=0,r=(i=e.entries).length;n<r;n++)t=i[n],o=(null!=t?t.icon:void 0)||"info",u.push(s.div(".toolbar-button.btn.btn-default",{"button-url":t.url},function(){return s.span(".fa.fa-"+o," "+t.name)}));return u})}),l=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,Backbone.Marionette.View),d(t,[{key:"toolbarButtonPressed",value:function(e){var t;return console.log("toolbarButtonPressed",e),t=e.currentTarget.getAttribute("button-url"),c(t)}}]),t}();return e.prototype.template=p,e.prototype.ui={toolbarButton:".toolbar-button"},e.prototype.events={"click @ui.toolbarButton":"toolbarButtonPressed"},e}.call(void 0),r=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,u),d(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new l({model:f}),this.layout.showChildView("toolbar",e)}},{key:"show_profile",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(84).then(function(){var t,o,r;return t=n(216),o=i.request("main:app:decode-auth-token"),r=new t({model:new Backbone.Model(o)}),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}},{key:"view_map",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(21),n.e(83)]).then(function(){var t,o,r;return t=n(215),o=i.request("main:app:decode-auth-token"),r=new t({model:new Backbone.Model(o)}),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}},{key:"editConfig",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(82).then(function(){var t,o,r;return t=n(208).default,o=i.request("main:app:decode-auth-token"),r=new t({model:new Backbone.Model(o)}),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}},{key:"change_password",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(81).then(function(){var t;return t=new(0,n(207).default)({model:o.request("new-password-model")}),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=a,e}.call(void 0),e.exports=r},219:function(e,t,n){"use strict";var o,r,i,u,a,l;o=n(4),n(0),u=n(1),n(2);var c=n(218);c.User,c.CurrentUser,a=u.Radio.channel("global"),u.Radio.channel("messages"),(r=u.Radio.channel("userprofile")).reply("update-user-config",function(){return console.log("update-user-config called")}),i=a.request("main:app:AuthModel"),a.request("main:app:AuthCollection"),l=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),t}();return e.prototype.url="/auth/chpass",e.prototype.validation={password:{required:!0,minLength:8},confirm:function(e){var t;return e===(t=o('input[name="password"]').val())&&o('input[type="submit"]').show(),e!==t}},e}.call(void 0),r.reply("new-password-model",function(){return new l}),e.exports={}},220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=f(n(2)),i=f(n(89));n(219);var u,a,l,c,s=f(n(217));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Backbone.Radio.channel("global"),u=Backbone.Radio.channel("userprofile"),c=[{label:"Main",url:"#profile"},{label:"Edit Config",url:"#profile/editconfig"},{label:"Change Password",url:"#profile/chpassword"},{label:"View Map",url:"#profile/mapview"}],l=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,r.default.AppRouter),t}();return e.prototype.appRoutes={profile:"show_profile","profile/editconfig":"editConfig","profile/chpassword":"change_password","profile/mapview":"view_map"},e}.call(void 0),a=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,i.default),o(t,[{key:"onBeforeStart",value:function(){var e=this;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onBeforeStart",this).call(this,arguments),u.reply("main-controller",function(){return console.warn("Stop using 'main-controller' request on AppChannel"),e.router.controller})}}]),t}();return e.prototype.Controller=s.default,e.prototype.Router=l,e.prototype.appletEntries=[{label:"User Profile",menu:c}],e}.call(void 0),t.default=a},221:function(e,t,n){e.exports=function(){return new Worker(n.p+"6f4514501ecddd4c27b1.worker.js")}},240:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(1),h=(o=d)&&o.__esModule?o:{default:o},y=n(101);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=h.default.Radio.channel("global"),r=h.default.Radio.channel("tvmaze"),c=a.request("main:app:dbConn","tvmaze"),l=new y.LoveStore(c,"TVMazeEpisode"),s=["id","show_id","name","url","self","season","number","airdate","airtime","runtime","summary","img_med","img_orig","content"],i=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,h.default.Model),p(t,[{key:"toJSON",value:function(){var e,t=this;return e={},s.forEach(function(n){return e[n]=t.get(n)}),e}}]),t}();return e.prototype.loveStore=l,e}.call(void 0),u=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,h.default.Collection),t}();return e.prototype.loveStore=l,e.prototype.model=i,e}.call(void 0),f=new u,r.reply("get-local-episodes",function(){return f}),r.reply("get-local-episode-model",function(){return i}),r.reply("get-local-episode-collection",function(){return u}),r.reply("save-local-episode",function(e){var t,n,o,r,u,a,l,c,s;return t=new i({id:e.id,show_id:e.show_id,name:e.content.name,url:e.content.url,self:null!=(n=e.content._links)?n.self.href:void 0,season:e.content.season,number:e.content.number,airdate:new Date(e.content.airdate),airtime:e.content.airtime,runtime:(null!=(o=e.content)?o.runtime:void 0)||"",summary:(null!=(r=e.content)?r.summary:void 0)||"",img_med:(null!=(u=e.content)&&null!=(a=u.image)?a.medium:void 0)||"",img_orig:(null!=(l=e.content)&&null!=(c=l.image)?c.original:void 0)||"",content:e.content}),s=!0,t.isNew=function(){return!!s&&(s=!1,!0)},f.add(t),t.save()})},241:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=b(n(1)),y=n(101),v=b(n(36));function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=h.default.Radio.channel("global"),r=h.default.Radio.channel("tvmaze"),s=a.request("main:app:dbConn","tvmaze"),l=new y.LoveStore(s,"TVMazeShow"),p=["id","name","url","self","premiered","runtime","network_name","imdb","status","summary","img_med","img_orig","content"],i=function(){var e=function(e){function t(){return _(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,h.default.Model),d(t,[{key:"toJSON",value:function(){var e,t=this;return e={},p.forEach(function(n){return e[n]=t.get(n)}),e}}]),t}();return e.prototype.loveStore=l,e}.call(void 0),u=function(){var e=function(e){function t(){return _(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,v.default),t}();return e.prototype.loveStore=l,e.prototype.model=i,e.prototype.mode="client",e}.call(void 0),o=function(){var e=function(e){function t(){return _(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,h.default.Collection),t}();return e.prototype.loveStore=l,e.prototype.model=i,e}.call(void 0),c=new o,f=new u,r.reply("get-all-local-tvshows",function(){return c}),r.reply("get-local-tvshows",function(){return f}),r.reply("get-local-tvshow-model",function(){return i}),r.reply("get-local-tvshow-collection",function(){return u}),r.reply("save-local-show",function(e){var t,n,o,r,u,a;return t=new i({id:e.id,name:e.name,url:e.url,self:e._links.self.href,premiered:new Date(e.premiered),runtime:(null!=e?e.runtime:void 0)||"",network_name:(null!=e&&null!=(n=e.network)?n.name:void 0)||"NO NETWORK",imdb:(null!=(o=e.externals)?o.imdb:void 0)||"",status:(null!=e?e.status:void 0)||"",summary:(null!=e?e.summary:void 0)||"",img_med:(null!=e&&null!=(r=e.image)?r.medium:void 0)||"",img_orig:(null!=e&&null!=(u=e.image)?u.original:void 0)||"",content:e}),a=!0,t.isNew=function(){return!!a&&(a=!1,!0)},f.add(t),t.save()})},242:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=(p(n(4)),p(n(1)));n(101),p(n(36));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(241),n(240),f.default.Radio.channel("global"),o=f.default.Radio.channel("tvmaze"),c="//api.tvmaze.com",l=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Model),s(t,[{key:"url",value:function(){var e;return e=this.searchName,c+"/singlesearch/shows?q="+e}}]),t}(),o.reply("single-show-search",function(e){var t;return(t=new l).searchName=e,t}),a=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Collection),s(t,[{key:"url",value:function(){return c+"/search/shows"}}]),t}(),o.reply("new-tv-show-search",function(e){return new a(e=e||{})}),o.reply("tv-show-search-collection",function(){return a}),o.reply("search-tv-shows",function(e){return new a}),u=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Model),s(t,[{key:"urlRoot",value:function(){return c+"/shows"}}]),t}(),o.reply("get-remote-show",function(e){return new u({id:e})}),r=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Model),s(t,[{key:"url",value:function(){return this.get("_links").self.href}}]),t}(),i=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Collection),s(t,[{key:"url",value:function(){return c+"/shows/"+this.showId+"/episodes"}}]),t}();return e.prototype.model=r,e}.call(void 0),o.reply("get-remote-episodes",function(e){var t;return(t=new i).showId=e,t})},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=c(n(1)),a=(c(n(2)),c(n(3)),c(n(6)),c(n(88)),n(33)),l=n(34);c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}n(242),n(35),u.default.Radio.channel("global"),u.default.Radio.channel("messages"),u.default.Radio.channel("resources"),o=u.default.Radio.channel("tvmaze"),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.MainController),i(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(80).then(function(){var t,r,i;return i=o.request("get-local-tvshows"),t=o.request("tv-show-search-collection"),r=n(239),i.fetch().then(function(){var n;return n=new r({collection:new t}),e.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}},{key:"viewShowList",value:function(){return this.viewShowListCards()}},{key:"viewShowListCards",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),n.e(79).then(function(){var o;return o=n(235),t._loadView(o,e,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"viewShowListPackery",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),Promise.all([n.e(2),n.e(23),n.e(78)]).then(function(){var o;return o=n(234),t._loadView(o,e,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"viewShowListMasonry",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),Promise.all([n.e(2),n.e(77)]).then(function(){var o;return o=n(229),t._loadView(o,e,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"viewShowListFlat",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),window.tvshows=e,n.e(76).then(function(){var o;return o=n(228),e.fetch().done(function(){var n;return n=new o({collection:e}),t.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}},{key:"viewSearchShow",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(75).then(function(){var t;return t=new(n(227)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewShow",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(74).then(function(){var r,i;return r=n(226),i=new(o.request("get-local-tvshow-model"))({id:e}),t._loadView(r,i,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"importSampleData",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(73).then(function(){var t,r;return r=o.request("get-all-local-tvshows"),o.request("tv-show-search-collection"),t=n(224),r.fetch().then(function(){var n;return n=new t,e.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}},{key:"viewCalendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(8),n.e(72)]).then(function(){var t,r;return r=o.request("get-local-tvshows"),o.request("tv-show-search-collection"),t=n(222),r.fetch().then(function(){var n;return n=new t,e.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=l.ToolbarAppletLayout,e}.call(void 0),t.default=r},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});d(n(4));var o,r,i,u,a,l=d(n(1)),c=d(n(2)),s=d(n(89)),f=d(n(18)),p=d(n(243));d(n(221));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}l.default.Radio.channel("global"),o=l.default.Radio.channel("tvmaze"),u=[{label:"List Shows",url:"#tvmaze/shows",icon:".fa.fa-list"},{label:"Search Show",url:"#tvmaze/searchshow",icon:".fa.fa-search"},{label:"Import Sample Data",url:"#tvmaze/import-sample-data",icon:".fa.fa-download"},{label:"Calendar",url:"#tvmaze/calendar",icon:".fa.fa-calendar"}],i=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,c.default.AppRouter),t}();return e.prototype.appRoutes={tvmaze:"viewIndex","tvmaze/searchshow":"viewSearchShow","tvmaze/shows":"viewShowList","tvmaze/shows/flat":"viewShowListFlat","tvmaze/shows/view/:id":"viewShow","tvmaze/import-sample-data":"importSampleData","tvmaze/calendar":"viewCalendar"},e}.call(void 0),r=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,s.default),t}();return e.prototype.Controller=p.default,e.prototype.Router=i,e.prototype.appletEntries=[{label:(0,f.default)("tvmaze")+" Menu",menu:u},{label:"List Shows",url:"#tvmaze/shows"}],e}.call(void 0),a=void 0,o.reply("maincalendar:set-date",function(e){return a=e.fullCalendar("getDate")}),o.reply("maincalendar:get-date",function(){return a}),t.default=r},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=d(n(1)),s=(d(n(2)),d(n(3)),d(n(6)),d(n(88))),f=n(33),p=n(34);d(n(5)),d(n(35));function d(e){return e&&e.__esModule?e:{default:e}}c.default.Radio.channel("global"),i=c.default.Radio.channel("messages"),c.default.Radio.channel("resources"),o=c.default.Radio.channel("todos"),u=[],a=new c.default.Collection(u),o.reply("get-toolbar-entries",function(){return a}),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.MainController),l(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new s.default({collection:a}),this.layout.showChildView("toolbar",e)}},{key:"_isModelPresent",value:function(e){return e.isEmpty()||!e.has("created_at")}},{key:"list_certain_todos",value:function(e){var t=this;return this.setupLayoutIfNeeded(),0,n.e(71).then(function(){var e,o,r;return e=n(247).default,r=new e({collection:t.collection}),(o=t.collection.fetch()).done(function(){return console.log(t.collection),t.layout.showChildView("content",r)}),o.fail(function(){return i.request("danger","Failed to load todos.")})}.bind(null,n)).catch(n.oe)}},{key:"list_completed_todos",value:function(){return this.list_certain_todos(!0)}},{key:"list_todos",value:function(){return this.list_certain_todos(!1)}},{key:"new_todo",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(20).then(function(){var t;return t=n(159).NewView,e.layout.showChildView("content",new t)}.bind(null,n)).catch(n.oe)}},{key:"edit_todo",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(20).then(function(){var r,i;return r=n(159).EditView,i=o.request("get-todo",e),t._loadView(r,i,"todo")}.bind(null,n)).catch(n.oe)}},{key:"view_todo",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(70).then(function(){var r,i;return r=n(246),i=o.request("get-todo",e),t._loadView(r,i,"todo")}.bind(null,n)).catch(n.oe)}},{key:"view_calendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(8),n.e(69)]).then(function(){var t;return t=n(245),e.layout.showChildView("content",new t)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=p.ToolbarAppletLayout,e.prototype.collection=o.request("todo-collection"),e}.call(void 0),t.default=r},249:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,a,l,c,s,f,p,d,h,y,v,b,_;u=n(4),c=n(1),v=n(157).make_dbchannel,s=c.Radio.channel("global"),d=c.Radio.channel("todos"),l=s.request("main:app:AuthModel"),a=s.request("main:app:AuthCollection"),_="/api/dev/bapi/todos",f=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,l),t}();return e.prototype.urlRoot=_,e.prototype.defaults={completed:!1},e}.call(void 0),new(h=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a),t}();return e.prototype.url=_,e.prototype.model=f,e}.call(void 0)),v(d,"todo",f,h),p=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a),t}();return e.prototype.url="/api/dev/basic/todos/create-cal",e.prototype.model=f,e}.call(void 0),b=new p,d.reply("todocal-collection",function(){return b}),y=void 0,d.reply("maincalendar:set-date",function(){var e;return e=u("#maincalendar"),y=e.fullCalendar("getDate")}),d.reply("maincalendar:get-date",function(){return y}),e.exports={TodoCollection:h}},250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(1)),r=c(n(2)),i=c(n(89));n(249);var u,a,l=c(n(248));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.default.Radio.channel("global"),o.default.Radio.channel("todos"),a=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,r.default.AppRouter),t}();return e.prototype.appRoutes={todos:"list_todos","todos/completed":"list_completed_todos","todos/calendar":"view_calendar","todos/todos/new":"new_todo","todos/todos/edit/:id":"edit_todo","todos/todos/view/:id":"view_todo"},e}.call(void 0),u=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,i.default),t}();return e.prototype.Controller=l.default,e.prototype.Router=a,e.prototype.appletEntries=[{label:"Todos Menu",menu:[{label:"list todos",icon:".fa.fa-list",url:"#todos"},{label:"Calendar",url:"#todos/calendar",icon:".fa.fa-calendar"},{label:"new todo",icon:".fa.fa-plus",url:"#todos/todos/new"}]}],e}.call(void 0),t.default=u},254:function(e,t,n){"use strict";var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(4),o=n(1),n(2),n(3),n(6),n(33).ExtraController,u=o.Radio.channel("global"),o.Radio.channel("messages"),o.Radio.channel("sofi"),r=u.request("main:app:CrudController"),i=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),a(t,[{key:"initialize",value:function(e){return this.applet=u.request("main:applet:get-applet","sofi"),this.mainController=this.applet.router.controller,this.channel=this.getChannel()}},{key:"list_descriptions",value:function(){var e=this;return n.e(68).then(function(){var t;return t=n(253),e.listItems(t)}.bind(null,n)).catch(n.oe)}},{key:"add_new_description",value:function(){var e=this;return Promise.all([n.e(3),n.e(6),n.e(19)]).then(function(){var t;return t=n(160).NewFormView,e.addItem(t)}.bind(null,n)).catch(n.oe)}},{key:"view_description",value:function(e){var t=this;return n.e(67).then(function(){var o;return o=n(251),t.viewItem(o,e)}.bind(null,n)).catch(n.oe)}},{key:"edit_description",value:function(e){var t=this;return Promise.all([n.e(3),n.e(6),n.e(19)]).then(function(){var o;return o=n(160).EditFormView,t.editItem(o,e)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.channelName="sofi",e.prototype.objName="description",e.prototype.modelName="ebdsc",e}.call(void 0),e.exports=i},255:function(e,t,n){"use strict";var o,r,i;i=n(2),o=n(254),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.AppRouter),t}();return e.prototype.appRoutes={"sofi/dsc":"list_descriptions","sofi/dsc/list":"list_descriptions","sofi/dsc/add":"add_new_description","sofi/dsc/view/:name":"view_description","sofi/dsc/edit/:name":"edit_description","sofi/ebdscs/new":"add_new_description","sofi/ebdscs/view/:id":"view_description","sofi/ebdscs/edit/:id":"edit_description"},e}.call(void 0),e.exports={router:r,controller:o}},259:function(e,t,n){"use strict";var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(4),o=n(1),n(2),n(3),n(6),n(33).ExtraController,u=o.Radio.channel("global"),o.Radio.channel("messages"),o.Radio.channel("sofi"),i=u.request("main:app:CrudController"),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),a(t,[{key:"initialize",value:function(e){return this.applet=u.request("main:applet:get-applet","sofi"),this.mainController=this.applet.router.controller,this.channel=this.getChannel(),console.log("@channel",this.channel)}},{key:"list_configs",value:function(){var e=this;return n.e(66).then(function(){var t;return t=n(258),e.listItems(t)}.bind(null,n)).catch(n.oe)}},{key:"add_new_config",value:function(){var e=this;return n.e(18).then(function(){var t;return t=n(161).NewFormView,e.addItem(t)}.bind(null,n)).catch(n.oe)}},{key:"view_config",value:function(e){var t=this;return n.e(65).then(function(){var o;return o=n(256),t.viewItem(o,e)}.bind(null,n)).catch(n.oe)}},{key:"edit_config",value:function(e){var t=this;return n.e(18).then(function(){var o;return o=n(161).EditFormView,t.editItem(o,e)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.channelName="sofi",e.prototype.objName="config",e.prototype.modelName="ebcfg",e}.call(void 0),e.exports=r},260:function(e,t,n){"use strict";var o,r,i;i=n(2),o=n(259),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.AppRouter),t}();return e.prototype.appRoutes={"sofi/cfg":"list_configs","sofi/cfg/list":"list_configs","sofi/cfg/add":"add_new_config","sofi/cfg/view/:name":"view_config","sofi/cfg/edit/:name":"edit_config","sofi/ebcfgs/new":"add_new_config","sofi/ebcfgs/view/:id":"view_config","sofi/ebcfgs/edit/:id":"edit_config"},e}.call(void 0),e.exports={router:r,controller:o}},282:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s;n(4),r=n(1),n(2),l=n(3),n(6),n(33).MainController,u=n(88).default,n(40),n(38),n(5),n(35),r.Radio.channel("global"),r.Radio.channel("messages"),r.Radio.channel("resources"),o=r.Radio.channel("sofi"),c=[],s=new r.Collection(c),o.reply("get-toolbar-entries",function(){return s}),a="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",i=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u),t}();return e.prototype.options={entryTemplate:l.renderable(function(e){var t;return t={style:a},l.span(t,function(){return l.i(e.icon),l.text(" "),l.text(e.label)})})},e}.call(void 0),e.exports=i},283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=(f(n(4)),f(n(0))),i=f(n(1)),u=(f(n(2)),f(n(3))),a=(f(n(6)),n(33)),l=f(n(88)),c=(f(n(40)),f(n(38)),n(34)),s=f(n(282));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y,v,b,_,w,m,g=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};i.default.Radio.channel("global"),b=i.default.Radio.channel("messages"),i.default.Radio.channel("resources"),y=i.default.Radio.channel("sofi"),_="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",m=["id","name"],w=y.request("dbComicColumns"),function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,l.default),t}();return e.prototype.options={entryTemplate:u.default.renderable(function(e){var t;return t={style:_},u.default.span(t,function(){return u.default.i(e.icon),u.default.text(" "),u.default.text(e.label)})})},e}.call(void 0),v=function(){var e=function(e){function t(){p(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._show_main_view=e._show_main_view.bind(e),e._show_create_csv_view=e._show_create_csv_view.bind(e),e._show_preview_csv_view=e._show_preview_csv_view.bind(e),e.create_csv=e.create_csv.bind(e),e._showLocalComics=e._showLocalComics.bind(e),e}return h(t,a.MainController),o(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new s.default({collection:y.request("get-toolbar-entries")}),this.layout.showChildView("toolbar",e)}},{key:"_show_main_view",value:function(){var e=this;return g(this,t),Promise.all([n.e(2),n.e(7),n.e(64)]).then(function(){var t;return y.request("get-comics"),t=new(n(281)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"_show_create_csv_view",value:function(){var e=this;return g(this,t),Promise.all([n.e(2),n.e(7),n.e(63)]).then(function(){var t,o;return t=y.request("get-comics"),o=new(n(276))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_show_preview_csv_view",value:function(){var e=this;return g(this,t),Promise.all([n.e(2),n.e(62)]).then(function(){var t,o;return t=y.request("get-comics"),o=new(n(275))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_need_comics_view",value:function(e){return y.request("get-comics").length?e():this.navigate_to_url("#sofi/xml/upload")}},{key:"create_csv",value:function(){var e,n,o,i,u=this;return g(this,t),this.setupLayoutIfNeeded(),e=y.request("db:ebcfg:collection"),o=y.request("db:ebdsc:collection"),i={data:{columns:m}},n=r.default.clone(i),e.fetch(i).then(function(){return o.fetch(n).then(function(){return u._show_create_csv_view()})})}},{key:"preview_csv",value:function(){var e,t,n,o=this;if(this.setupLayoutIfNeeded(),console.log("preview_csv"),e=y.request("locals:get","currentCsvCfg"),t=y.request("locals:get","currentCsvDsc"),n=y.request("get-superheroes-model"),void 0!==e)return console.log("fetching cfg",e),e.fetch().then(function(e){return console.log("dsc is",t),console.log("foo is",e),t.fetch().then(function(){return n.fetch().then(function(){return o._show_preview_csv_view()})})});this.navigate_to_url("#sofi")}},{key:"main_view",value:function(){return this.setupLayoutIfNeeded(),this._show_main_view()}},{key:"dbcomics_main",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(4),n.e(5),n.e(61)]).then(function(){var t,o;return(t=y.request("db:clzcomic:collection")).state.sortColumn=["seriesgroup","series","issue"],(o=t.fetch({data:{columns:w}})).done(function(){var o;return o=new(n(274))({collection:t}),e.layout.showChildView("content",o)}),o.fail(function(){return b.request("danger","Failed to get comics.")})}.bind(null,n)).catch(n.oe)}},{key:"_showLocalComics",value:function(){var e=this;return g(this,t),Promise.all([n.e(2),n.e(7)]).then(function(){var t,o;return t=y.request("get-comics"),o=new(n(130))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"view_local_comics",value:function(){return this.setupLayoutIfNeeded(),this._need_comics_view(this._showLocalComics)}},{key:"upload_xml",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(60)]).then(function(){var t,o;return t=y.request("get-comics"),o=new(n(270))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"view_cached_comics",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(59)]).then(function(){var t;return t=new(n(269)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"manageComicPhotos",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(13),n.e(58)]).then(function(){var o;return(o=y.request("db:clzcomic:collection")).fetch({data:{where:{comic_id:e}}}).done(function(){var e;return e=new(n(268))({model:o.pop()}),t.layout.showChildView("content",e)})}.bind(null,n)).catch(n.oe)}},{key:"showWorkspaceMainView",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(4),n.e(5),n.e(57)]).then(function(){var t;return t=new(n(266)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"showWorkspaceView",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(4),n.e(5),n.e(9),n.e(56)]).then(function(){var o;return o=new(n(265))({workspace:e}),t.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"createWorkspaceView",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(4),n.e(5),n.e(9),n.e(55)]).then(function(){var o;return o=new(n(262))({workspace:e}),t.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"setPhotoNames",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(54).then(function(){var t;return t=new(n(261)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=c.ToolbarAppletLayout,e}.call(void 0),t.default=v},284:function(e,t,n){"use strict";var o,r;n(4),o=n(1),n(2),n(3),n(6),n(33).MainController,n(88).default,n(40),n(38),n(5),n(35),o.Radio.channel("global"),o.Radio.channel("messages"),o.Radio.channel("resources"),o.Radio.channel("sofi"),r=[{label:"Sofi Menu",menu:[{id:"main",label:"Main View",url:"#sofi",icon:".fa.fa-eye"},{id:"dbcomics",label:"DbComics",url:"#sofi/comics",icon:".fa.fa-list"},{id:"workspace",label:"Workspace",url:"#sofi/comics/workspace",icon:".fa.fa-dashboard"},{id:"cfglist",label:"Configs",url:"#sofi/cfg/list",icon:".fa.fa-list"},{id:"dsclist",label:"Descriptions",url:"#sofi/dsc/list",icon:".fa.fa-list"},{id:"uploadxml",label:"Upload CLZ/XML",url:"#sofi/xml/upload",icon:".fa.fa-upload"},{id:"mkcsv",label:"Create CSV",url:"#sofi/csv/create",icon:".fa.fa-cubes"},{id:"cached",label:"Cached Images",url:"#sofi/clzpage",icon:".fa.fa-image"},{id:"setPhotoNames",label:"Set Photo Names",url:"#sofi/comics/set-photo-names",icon:".fa.fa-photo"}]}],e.exports=r},285:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,a,l,c,s,f,p,d;a=n(1),d=n(95),n(6),n(83),n(98),n(31),n(18),c=a.Radio.channel("messages"),u=a.Radio.channel("sofi"),p=new d.Parser({explicitArray:!1,async:!1}),u.reply("get-xmlparser",function(){return p}),s=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a.Model),t}(),f=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a.Collection),t}();return e.prototype.model=s,e}.call(void 0),l=new f,u.reply("set-comics",function(e){return l.set(e)}),u.reply("get-comics",function(){return l}),u.reply("parse-all-comics-xml",function(e,t){return p.parseString(e,function(e,n){var o;return(null!=(o=n.comicinfo.comiclist.comic)?o.length:void 0)||(console.warn("Single comic!"),o=[o]),u.request("set-comics",o),t()})}),u.reply("parse-comics-xml",function(e,t){return p.parseString(e,function(e,n){var o,r,i,a,l,s,f,p,d,h;for((null!=(i=n.comicinfo.comiclist.comic)?i.length:void 0)||(i=[i]),a=[],s=[],o=[],l=0,f=i.length;l<f;l++)"For Sale"===(h=(r=i[l]).collectionstatus._)?r.links?a.push(r):o.push(r):"In Collection"===h?s.push(r):(d="Cannot determine comic status of ("+((p=r.mainsection).series.displayname+" #"+p.issue)+")!",c.request("danger",d));return s.length&&(d=s.length+" ignored!!",c.request("warning",d)),a.length||c.request("danger","No comics for sale!"),o.length&&(d="There was some bad xml, skipped "+o.length+" comics.",c.request("danger",d)),u.request("set-comics",a),t()})}),e.exports={}},286:function(e,t,n){"use strict";var o,r,i,u,a,l=[].indexOf;o=n(1),i=n(98),u=n(31),r=o.Radio.channel("messages"),o.Radio.channel("sofi"),a=function(e,t){var n,o,a,c,s,f;return n=t.comic,t.clzcomic,n.photos,a=t.desc,(f=i.compile(a.get("title"))(t)).length>80&&(c=(c="Title too long.\n")+(f+" ----\x3e ")+(s=f.substring(0,79)),r.request("danger",c),f=s),e.Title=f,o=i.compile(a.get("content"))(t),(o=(o=(o=u(o)).split("\r").join("")).split("\n").join("")).length>32700&&(c=o.length+" characters in description",r.request("warning",c)),l.call(o,"\n")>=0&&r.request("danger","newline in description"),e.Description=o},e.exports=a},287:function(e,t,n){"use strict";var o,r;o=n(1),n(131),o.Radio.channel("messages"),o.Radio.channel("sofi"),r=function(e,t){var n;return n=t.comic,e.PicURL=n.image_src},e.exports=r},288:function(e,t,n){"use strict";var o,r,i,u,a;(r=n(1)).Radio.channel("messages"),o=r.Radio.channel("sofi"),i={platinum:{start:1897,end:1937},golden:{start:1938,end:1955},silver:{start:1956,end:1969},bronze:{start:1970,end:1983},copper:{start:1984,end:1991},modern:{start:1992,end:2100}},u=function(e){var t,n;for(n in i)if(e>=(t=i[n]).start&&e<=t.end)return n;return!1},o.reply("get-comic-ages",function(){return i}),o.reply("find-age",function(e){return u(e)}),a=function(e,t){var n,o;return n=u(e),o=[],t.forEach(function(e){if(e.age===n)return o.push(e)}),o},o.reply("get-heroes-by-age",function(e,t){return a(e,t)}),e.exports={}},289:function(e,t,n){"use strict";var o,r,i,u;r=n(1),n(131),n(288),i=r.Radio.channel("messages"),o=r.Radio.channel("sofi"),u=function(e,t){var n,r,u,a,l,c,s,f,p,d,h,y,v,b;for(r=t.clzcomic,c=o.request("get-superheroes-model").get("rows"),(b=null!=(y=r.publicationdate)?y.year:void 0)||(b=r.releasedate.year,console.warn("Using releasedate")),b||(console.warn("Bad date for comic",r),i.request("danger","Bad Date for comic "+r.id)),b=parseInt(b.displayname),v=r.mainsection.series.displayname.toLowerCase(),n=o.request("find-age",b),h=void 0,l={},p=0,d=(f=o.request("get-heroes-by-age",b,c)).length;p<d;p++)(s=f[p]).superhero.startsWith("Other ")&&(h=s),l[s.superhero.toLowerCase()]=s;for(a in null==h&&i.request("danger","No category found for "+n),u=h,l)if(v.indexOf(a)>=0){u=l[a];break}return e["*Category"]=u.id},e.exports=u},290:function(e,t,n){"use strict";var o;o=function(e,t){var n,o;if(null!=(n=t.comic)?n.isbn:void 0)return 14===(o=n.isbn).length&&(o=o.substring(0,o.length-2)),13===o.length&&(o=o.substring(1,o.length)),e["Product:UPC"]=o},e.exports=o},291:function(e,t,n){"use strict";var o,r,i;r=n(6),o=n(83),i=function(e,t){var n,i,u,a;return(a=r(e.scheduletime))?(i=(new Date).valueOf()+a,n=new Date(i),u="yyyy-mm-dd HH:MM:ss",e.scheduletime=o(n,u)):e.scheduletime=""},e.exports=i},292:function(e,t,n){"use strict";var o;o=function(e,t){var n,o;if(null!=(n=t.clzcomic)?n.currentprice:void 0){for(o=n.currentprice;o.startsWith("$");)o=o.substring(1,o.length);return e.startprice=o}},e.exports=o},293:function(e,t,n){"use strict";var o,r,i,u,a,l,c=f(n(1)),s=(f(n(95)),f(n(6)),f(n(83)),f(n(98)),f(n(31)),f(n(18)));function f(e){return e&&e.__esModule?e:{default:e}}c.default.Radio.channel("messages"),o=c.default.Radio.channel("sofi"),i=["Title","PicURL","Description","Product:EAN","Product:UPC","Product:ISBN","*Category"],a=["format","location","returnsacceptedoption","duration","quantity","startprice","dispatchtimemax","conditionid"],o.reply("csv-req-fieldnames",function(){return a}),u=["postalcode","paymentprofilename","returnprofilename","shippingprofilename","scheduletime"],o.reply("csv-opt-fieldnames",function(){return u}),l=function(){var e,t,n,o,r,l,c,f;for(t={action:"*Action"},n=0,l=a.length;n<l;n++)t[e=a[n]]="*"+(0,s.default)(e);for(o=0,c=u.length;o<c;o++)t[e=u[o]]=e;for(r=0,f=i.length;r<f;r++)t[e=i[r]]=e;return t},o.reply("create-csv-header",function(){return create-csv-header()}),r=l(),o.reply("get-csv-header",function(){return r}),o.reply("grouped-csv-fields",function(){return{ReqFieldNames:a,OptFieldNames:u,EbayFields:i}})},294:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d;r=n(1),n(95),n(6),n(83),n(98),n(31),n(18),n(293),p=n(292),f=n(291),s=n(290),l=n(289),c=n(287),d=n(286),r.Radio.channel("messages"),o=r.Radio.channel("sofi"),a=o.request("grouped-csv-fields"),i=function(e){var t,n;return n={},t=e.cfg.get("content"),n.action=e.action,a.ReqFieldNames.forEach(function(e){return n[e]=t[e]}),a.OptFieldNames.forEach(function(e){return n[e]=t[e]}),a.EbayFields.forEach(function(e){return n[e]=""}),n},u=function(e){var t,n,o,r,u;return"string"==typeof(t=(n=e.comic).content)&&(t=JSON.parse(t)),e.clzcomic=t,o={},n.photos.forEach(function(e){return o[e.name]=e.filename}),console.log("PHOTOS",o,n),e.photos=o,e.cfg.get("content"),(u=i(e)).quantity!==t.quantity&&(u.quantity=t.quantity),p(u,e),f(u,e),s(u,e),l(u,e),c(u,e),(null!=(r=n.mainsection)?r.plot:void 0)&&(n.mainsection.plot=n.mainsection.plot.split("<br>").join("\n"),n.mainsection.plot=n.mainsection.plot.split("<BR>").join("\n")),d(u,e),u},o.reply("create-csv-row-object",function(e){return u(e)}),e.exports={}},295:function(e,t,n){"use strict";var o;o=n(1),n(294),n(285),o.Radio.channel("sofi").reply("fix-image-url",function(e){return e.indexOf("/lg/")&&(e=e.replace("/lg/","/sm/")),e.startsWith("http://")&&(e=e.replace("http://","//")),e})},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(1)),r=s(n(2)),i=s(n(89));n(131),n(295);var u,a,l=s(n(284)),c=s(n(283));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.default.Radio.channel("global"),o.default.Radio.channel("resources"),a=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,r.default.AppRouter),t}();return e.prototype.appRoutes={sofi:"main_view","sofi/comics":"dbcomics_main","sofi/comics/local":"view_local_comics","sofi/comics/photos/:comic_id":"manageComicPhotos","sofi/comics/workspace":"showWorkspaceMainView","sofi/comics/workspace/view/:name":"showWorkspaceView","sofi/comics/workspace/create/:name":"createWorkspaceView","sofi/comics/workspace/add/:name":"createWorkspaceView","sofi/xml/upload":"upload_xml","sofi/csv/create":"create_csv","sofi/csv/preview":"preview_csv","sofi/clzpage":"view_cached_comics","sofi/comics/set-photo-names":"setPhotoNames"},e}.call(void 0),u=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,i.default),t}();return e.prototype.appletName="sofi",e.prototype.channelName="sofi",e.prototype.Controller=c.default,e.prototype.Router=a,e.prototype.extraRouters={cfg:n(260),dsc:n(255)},e.prototype.appletEntries=l.default,e}.call(void 0),t.default=u},304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=c(n(1)),a=(c(n(2)),c(n(3)),c(n(6)),c(n(88)),n(33)),l=n(34);c(n(5)),c(n(35));function c(e){return e&&e.__esModule?e:{default:e}}u.default.Radio.channel("global"),u.default.Radio.channel("messages"),u.default.Radio.channel("resources"),o=u.default.Radio.channel("otrr"),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.MainController),i(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(53).then(function(){var t;return t=new(n(303)),e.layout.showChildView("content",t),e.scrollTop()}.bind(null,n)).catch(n.oe)}},{key:"viewMetadata",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(52).then(function(){var r,i,u;return i=n(297),r=o.request("get-metadata-model"),(u=new r({id:e})).fetch().done(function(){var e;return e=new i({model:u}),t.layout.showChildView("content",e),t.scrollTop()})}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=l.ToolbarAppletLayout,e}.call(void 0),t.default=r},305:function(e,t,n){"use strict";var o,r,i,u,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(4),i=(r=n(1)).Radio.channel("global"),o=r.Radio.channel("otrr"),i.request("main:app:AuthModel"),i.request("main:app:AuthCollection"),a="https://archive.org/metadata",u=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Model),l(t,[{key:"fileUrl",value:function(e){var t,n;return this.get("files"),n=this.get("server"),t=this.get("dir"),"/api/dev/proxy/https://"+n+t+"/"+e}}]),t}();return e.prototype.urlRoot=a,e}.call(void 0),o.reply("get-metadata-model",function(){return u}),e.exports={TodoCollection:u}},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=f(n(1)),r=f(n(2)),i=f(n(89)),u=f(n(18));n(305);var a,l,c,s=f(n(304));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.default.Radio.channel("global"),o.default.Radio.channel("otrr"),c=[{label:"List",url:"#otrr",icon:".fa.fa-list"},{label:"Calendar",url:"#otrr/calendar",icon:".fa.fa-calendar"}],l=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,r.default.AppRouter),t}();return e.prototype.appRoutes={otrr:"viewIndex","otrr/view/:id":"viewMetadata"},e}.call(void 0),a=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,i.default),t}();return e.prototype.Controller=s.default,e.prototype.Router=l,e.prototype.appletEntries=[{label:(0,u.default)("otrr")+" Menu",menu:c}],e}.call(void 0),t.default=a},307:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=b(n(1)),y=n(101),v=b(n(36));function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=h.default.Radio.channel("global"),r=h.default.Radio.channel("msleg"),s=a.request("main:app:dbConn","msleg"),l=new y.LoveStore(s,"XMLObject"),p=["url","content"],i=function(){var e=function(e){function t(){return _(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,h.default.Model),d(t,[{key:"toJSON",value:function(){var e,t=this;return e={},p.forEach(function(n){return e[n]=t.get(n)}),e}}]),t}();return e.prototype.loveStore=l,e.prototype.idAttribute="url",e}.call(void 0),u=function(){var e=function(e){function t(){return _(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,v.default),t}();return e.prototype.loveStore=l,e.prototype.mode="client",e}.call(void 0),o=function(){var e=function(e){function t(){return _(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,h.default.Collection),t}();return e.prototype.loveStore=l,e.prototype.model=i,e}.call(void 0),c=new o,f=new u,r.reply("get-all-local-xmlobjects",function(){return c}),r.reply("get-local-xmlobjects",function(){return f}),r.reply("get-local-xmlobject-model",function(){return i}),r.reply("get-local-xmlobject-collection",function(){return u}),r.reply("save-local-xmlObject",function(e){var t,n;return t=new i({url:e.url,content:e}),n=!0,t.isNew=function(){return!!n&&(n=!1,!0)},local_shows.add(t),t.save()})},312:function(e,t,n){"use strict";var o,r;o="http://billstatus.ls.state.ms.us",r="//cors-anywhere.herokuapp.com",e.exports={production:{allmsrs:r+"/"+o+"/2017/pdf/all_measures/allmsrs.xml",hr_membs:r+"/"+o+"/members/hr_membs.xml"},developmentNew:{allmsrs:r+"/"+o+"/2017/pdf/all_measures/allmsrs.xml",hr_membs:r+"/"+o+"/members/hr_membs.xml"},development:{allmsrs:"/assets/allmsrs.xml",hr_membs:"/assets/hr_membs.xml"}}},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(n(1)),l=(s(n(2)),s(n(3)),s(n(6)),s(n(88)),n(33)),c=n(34);s(n(5)),s(n(35));function s(e){return e&&e.__esModule?e:{default:e}}a.default.Radio.channel("global"),a.default.Radio.channel("messages"),a.default.Radio.channel("resources"),o=a.default.Radio.channel("msleg"),i=n(312).production,o.reply("get-msleg-config",function(){return i}),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.MainController),u(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),0,n.e(51).then(function(){var t;return t=new(n(311)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=c.ToolbarAppletLayout,e}.call(void 0),t.default=r},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=f(n(1)),a=f(n(2)),l=f(n(89)),c=f(n(18)),s=f(n(313));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(307),u.default.Radio.channel("global"),u.default.Radio.channel("msleg"),i=[{label:"List House Members",url:"#msleg",icon:".fa.fa-list"},{label:"Calendar",url:"#msleg/calendar",icon:".fa.fa-calendar"}],r=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,a.default.AppRouter),t}();return e.prototype.appRoutes={msleg:"viewIndex"},e}.call(void 0),o=function(){var e=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,l.default),t}();return e.prototype.Controller=s.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:(0,c.default)("msleg")+" Menu",menu:i}],e}.call(void 0),t.default=o},357:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o=n(1),n(2),c=n(3),n(6),u=n(33).MainController,n(34).ToolbarAppletLayout,l=n(5).default,o.Radio.channel("global"),a=o.Radio.channel("messages"),i=o.Radio.channel("hubby"),function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,o.Marionette.View),s(t,[{key:"show_calendar",value:function(){return"#hubby","#hubby"===window.location.hash?i.request("main-controller").mainview():l("#hubby")}},{key:"list_meetings",value:function(){return l("#hubby/listmeetings")}},{key:"search_hubby",value:function(){var e,t;return e=i.request("main-controller"),t={searchParams:{title:this.ui.search_entry.val()}},console.log("search for",t),e.view_items(t)}}]),t}();return e.prototype.template=c.renderable(function(){return c.div(".btn-group.btn-group-justified",function(){return c.div("#show-calendar-button.btn.btn-default",function(){return c.i(".fa.fa-calendar"," Calendar")}),c.div("#list-meetings-button.btn.btn-default",function(){return c.i(".fa.fa-list"," List Meetings")})}),c.div(".input-group",function(){return c.input(".form-control",{type:"text",placeholder:"search",name:"search"}),c.span(".input-group-btn",function(){return c.button("#search-button.btn.btn-default",function(){return c.i(".fa.fa-search","Search")})})})}),e.prototype.ui={search_bth:"#search-button",show_cal_btn:"#show-calendar-button",list_btn:"#list-meetings-button",search_entry:".form-control"},e.prototype.events={"click @ui.show_cal_btn":"show_calendar","click @ui.list_btn":"list_meetings","click @ui.search_bth":"search_hubby"},e}.call(void 0),r=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,u),s(t,[{key:"show_calendar",value:function(e,t){return Promise.all([n.e(8),n.e(47)]).then(function(){var o,r,i;return o=n(356),r={},"minicalendar"===t&&(r.minicalendar=!0,r.layout=e),i=new o(r),e.showChildView(t,i)}.bind(null,n)).catch(n.oe)}},{key:"mainview",value:function(){return this.setupLayoutIfNeeded(),this.show_calendar(this.layout,"content")}},{key:"list_meetings",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(46).then(function(){var t,o,r;return n(113).MainMeetingModel,o=i.request("meetinglist"),t=n(352),(r=o.fetch()).done(function(){var n;return n=new t({collection:o}),e.layout.showChildView("content",n)}),r.fail(function(){return a.request("danger","Failed to load meeting list")})}.bind(null,n)).catch(n.oe)}},{key:"show_meeting",value:function(e,t,o){return Promise.all([n.e(4),n.e(45)]).then(function(){var r,i,u,l;return r=n(113).MainMeetingModel,i=n(351),(l=(u=new r({id:o})).fetch()).done(function(){var n;return n=new i({model:u}),e.showChildView(t,n)}),l.fail(function(){return a.request("danger","Failed to load meeting")})}.bind(null,n)).catch(n.oe)}},{key:"view_meeting",value:function(e){return this.setupLayoutIfNeeded(),this.show_meeting(this.layout,"content",e)}},{key:"view_items",value:function(e){return this.setupLayoutIfNeeded(),this.list_items(this.layout,"content",e)}},{key:"list_items",value:function(e,t,o){return n.e(44).then(function(){var r,i,u;return r=n(113).ItemCollection,i=n(344),(u=new r([])).searchParams=o.searchParams,console.log("ItemCollection",u),u.fetch().done(function(){var n;return n=new i({collection:u}),e.showChildView(t,n)})}.bind(null,n)).catch(n.oe)}}]),t}(),e.exports=r},358:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=d(n(4)),s=d(n(2)),f=d(n(89)),p=d(n(357));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(113),Backbone.Radio.channel("global"),r=Backbone.Radio.channel("hubby"),u=[{label:"Main",url:"#hubby"},{label:"list",url:"#hubby/listmeetings"},{label:"search",url:"#hubby/search"}],i=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,s.default.AppRouter),t}();return e.prototype.appRoutes={hubby:"mainview","hubby/listmeetings":"list_meetings","hubby/viewmeeting/:id":"view_meeting","hubby/search":"view_items"},e}.call(void 0),o=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,f.default),l(t,[{key:"onBeforeStart",value:function(e){var n;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onBeforeStart",this).call(this,e),n=this.router.controller,r.reply("main-controller",function(){return n}),r.reply("view-calendar",function(e,t){return n.show_calendar(e,t)}),r.reply("view-meeting-orig",function(e,t,o){return n.show_meeting(e,t,o)}),r.reply("view-meeting",function(e){return n.show_meeting(e.layout,e.region,e.id)}),r.reply("view-items",function(e,t,o){return n.list_items(e,t,o)})}}]),t}();return e.prototype.Controller=p.default,e.prototype.Router=i,e.prototype.appletEntries=[{label:"Hubby Menu",menu:u}],e}.call(void 0),a=void 0,a=new Date("2016-10-15"),r.reply("maincalendar:set-date",function(){var e;return e=(0,c.default)("#maincalendar"),a=e.fullCalendar("getDate")}),r.reply("maincalendar:get-date",function(){return a}),t.default=o},364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c,s,f,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=m(n(4)),h=m(n(1)),y=m(n(2)),v=m(n(3)),b=m(n(37)),_=m(n(5)),w=m(n(32));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=n(30);c=P.form_group_input_div,i=h.default.Radio.channel("global"),a=h.default.Radio.channel("messages"),s=v.default.renderable(function(e){return c({input_id:"input_username",label:"User Name",input_attributes:{name:"username",placeholder:"User Name"}}),c({input_id:"input_password",label:"Password",input_attributes:{name:"password",type:"password",placeholder:"Type your password here...."}}),v.default.input(".btn.btn-default",{type:"submit",value:"login"}),v.default.div(".spinner.fa.fa-spinner.fa-spin")}),o=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,w.default),p(t,[{key:"ui",value:function(){return(0,b.default)(this.fieldList)}},{key:"createModel",value:function(){return new h.default.Model}},{key:"onSuccess",value:function(){return(0,_.default)("/")}}]),t}(),r=function(){var e=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,o),p(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("username",this.ui.username.val()),this.model.set("password",this.ui.password.val())}},{key:"saveModel",value:function(){var e,t,n,o=this;return t=this.model.get("username"),e=this.model.get("password"),n=d.default.ajax({url:"/login",type:"POST",data:{username:t,password:e},dataType:"json",success:function(e){var t;return t=e.token,i.request("main:app:set-auth-token",t),o.trigger("save:form:success",o.model)},error:function(e){var t;return t=e.responseJSON,a.request("danger",t.message),o.trigger("save:form:failure",o.model)}}),console.log("returning xhr",n)}}]),t}();return e.prototype.template=s,e.prototype.fieldList=["username","password"],e}.call(void 0),f=v.default.renderable(function(e){return c({input_id:"input_token",label:"Auth Token",input_attributes:{name:"token",placeholder:"xxxxxxxxxxxxxxx"}}),v.default.input(".btn.btn-default",{type:"submit",value:"login"}),v.default.div(".spinner.fa.fa-spinner.fa-spin")}),l=function(){var e=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,o),p(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("token",this.ui.token.val())}},{key:"saveModel",value:function(){var e,t,n,o=this;return n=this.model.get("token"),i.request("main:app:set-auth-token",n),e=new(i.request("main:app:AuthRefresh")),(t=e.fetch()).fail(function(){var e;return e=t.responseJSON,a.request("danger",e.message),o.trigger("save:form:failure",o.model)}),t.done(function(){return o.trigger("save:form:success",o.model)})}}]),t}();return e.prototype.template=f,e.prototype.fieldList=["token"],e}.call(void 0),u=function(){var e=function(e){function t(){return g(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,y.default.View),p(t,[{key:"onRender",value:function(){return this.showChildView("login",new r),this.showChildView("token",new l)}}]),t}();return e.prototype.template=v.default.renderable(function(e){return v.default.div("#login-form"),v.default.div("#token-form")}),e.prototype.regions={login:"#login-form",token:"#token-form"},e}.call(void 0),t.default=u},365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},i=(s(n(178)),s(n(1))),u=(s(n(2)),s(n(38))),a=s(n(5)),l=n(34),c=s(n(364));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h,y,v,b,_,w,m,g,O,j,P=[].indexOf,k=n(33);w=k.MainController,n(30).login_form,n(158),_=i.default.Radio.channel("global"),m=i.default.Radio.channel("messages"),i.default.Radio.channel("static-documents"),i.default.Radio.channel("resources"),j=n(3);var C=n(138);v=C.FrontDoorMainView,h=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,i.default.Model),o(t,[{key:"fetch",value:function(e){return(e=e||{}).dataType="text",r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}},{key:"parse",value:function(e){return{content:e}}}]),t}(),function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,i.default.Collection),t}();return e.prototype.urlRoot="/assets/documents",e}.call(void 0),g=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,h),t}();return e.prototype.url="/assets/documents/intro.md",e}.call(void 0),O=j.renderable(function(){return j.div(".row",function(){return j.div("#main-content")})}),b=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,l.BaseAppletLayout),o(t,[{key:"regions",value:function(){return{content:new u.default({el:"#main-content",speed:"slow"})}}}]),t}();return e.prototype.template=O,e}.call(void 0),y=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,w),o(t,[{key:"setupLayoutIfNeeded",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),this.layout.controller=this}},{key:"_viewResource",value:function(e){var t;return this.setupLayoutIfNeeded(),t=new v({model:e}),this.layout.showChildView("content",t)}},{key:"_viewLogin",value:function(){var e;return e=new c.default,this.layout.showChildView("content",e)}},{key:"_viewUpload",value:function(){var e=this;return Promise.all([n.e(13),n.e(43)]).then(function(){var t;return t=new(n(363)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"uploadView",value:function(){return this.setupLayoutIfNeeded(),this._viewUpload()}},{key:"frontdoor_needuser",value:function(){var e;return e=_.request("main:app:decode-auth-token"),P.call(Object.keys(e),"name")>=0?this.frontdoor_hasuser(e):this.show_login()}},{key:"showLogin",value:function(){return this.setupLayoutIfNeeded(),this._viewLogin()}},{key:"showLogout",value:function(){return _.request("main:app:destroy-auth-token"),(0,a.default)("/")}},{key:"frontdoor_hasuser",value:function(e){return this.defaultView()}},{key:"view_readme",value:function(){var e,t,n=this;return this.setupLayoutIfNeeded(),(t=(e=new g).fetch()).done(function(){return n._viewResource(e)}),t.fail(function(){return m.request("warning","failed to get readme")})}},{key:"viewPage",value:function(e){var t,n,o=this;return console.log("NAME IS",e),this.setupLayoutIfNeeded(),t=_.request("main:app:get-document",e),console.log("MODEL IS",t),(n=t.fetch()).done(function(){return o._viewResource(t)}),n.fail(function(){return m.request("warning","failed to get "+e)})}},{key:"defaultView",value:function(){return this.setupLayoutIfNeeded(),this.view_readme()}},{key:"frontdoor",value:function(){var e;return(null!=(e=_.request("main:app:config"))?e.needLogin:void 0)?this.frontdoor_needuser():this.defaultView()}},{key:"themeSwitcher",value:function(){var e;return this.setupLayoutIfNeeded(),e=new(0,n(138).ThemeSwitchView),this.layout.showChildView("content",e),console.log("themeSwitcher")}},{key:"statsView",value:function(){var e,t,o=this;this.setupLayoutIfNeeded();var r=n(138);return e=r.StatsView,(t=new i.default.Model).url="/stats.json",t.fetch().done(function(){var n;return n=new e({model:t}),o.layout.showChildView("content",n)})}},{key:"viewEmojis",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(42).then(function(){var t;return t=new(n(362)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewDbAdmin",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(41).then(function(){var t;return t=new(n(361)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=b,e}.call(void 0),t.default=y},366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(n(2)),l=s(n(89)),c=s(n(365));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Backbone.Radio.channel("global"),Backbone.Radio.channel("frontdoor"),i=[{id:"dbadmin",label:"Db Admin",url:"#frontdoor/dbadmin",icon:".fa.fa-database"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,a.default.AppRouter),t}();return e.prototype.appRoutes={"":"frontdoor",frontdoor:"frontdoor","frontdoor/view":"frontdoor","frontdoor/view/*name":"viewPage","frontdoor/login":"showLogin","frontdoor/logout":"showLogout","pages/:name":"viewPage","frontdoor/upload":"uploadView","frontdoor/themes":"themeSwitcher","frontdoor/stats":"statsView","frontdoor/emojilist":"viewEmojis"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,l.default),u(t,[{key:"onStop",value:function(){return console.log("(Child) Stopping frontdoor",this.isRunning()),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStop",this).call(this)}}]),t}();return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:"Main Menu",menu:i}],e}.call(void 0),t.default=o},367:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,a,l,c,s,f,p,d,h;a=n(1),h=n(95),n(6),n(83),n(98),n(31),n(18),s=a.Radio.channel("messages"),u=a.Radio.channel("ebcsv"),d=new h.Parser({explicitArray:!1,async:!1}),u.reply("get-xmlparser",function(){return d}),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a.Model),t}(),p=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a.Collection),t}();return e.prototype.model=f,e}.call(void 0),l=new p,u.reply("set-comics",function(e){return l.set(e)}),u.reply("get-comics",function(){return l}),c=new p,u.reply("set-all-comics",function(e){return c.set(e)}),u.reply("get-all-comics",function(){return c}),u.reply("parse-all-comics-xml",function(e,t){return d.parseString(e,function(e,n){var o;return(null!=(o=n.comicinfo.comiclist.comic)?o.length:void 0)||(console.warn("Single comic!"),o=[o]),u.request("set-all-comics",forsale),t()})}),u.reply("parse-comics-for-sale",function(e,t){return d.parseString(e,function(e,n){var o,r,i,a,l,c,f,p,d,h;for((null!=(i=n.comicinfo.comiclist.comic)?i.length:void 0)||(i=[i]),a=[],c=[],o=[],l=0,f=i.length;l<f;l++)"For Sale"===(h=(r=i[l]).collectionstatus._)?r.links?a.push(r):o.push(r):"In Collection"===h?c.push(r):(d="Cannot determine comic status of ("+((p=r.mainsection).series.displayname+" #"+p.issue)+")!",s.request("danger",d));return c.length&&(d=c.length+" ignored!!",s.request("warning",d)),a.length||s.request("danger","No comics for sale!"),o.length&&(d="There was some bad xml, skipped "+o.length+" comics.",s.request("danger",d)),u.request("set-comics",a),t()})}),u.reply("parse-comics-xml",function(e,t){return d.parseString(e,function(e,n){var o;return(null!=(o=n.comicinfo.comiclist.comic)?o.length:void 0)||(o=[o]),u.request("set-comics",o),t()})}),e.exports={}},368:function(e,t,n){"use strict";var o,r,i,u,a,l=[].indexOf;o=n(1),i=n(98),u=n(31),r=o.Radio.channel("messages"),o.Radio.channel("ebcsv"),a=function(e,t){var n,o,a,c,s;return t.comic,o=t.desc,(s=i.compile(o.get("title"))(t)).length>80&&(a=(a="Title too long.\n")+(s+" ----\x3e ")+(c=s.substring(0,79)),r.request("danger",a),s=c),e.Title=s,n=i.compile(o.get("content"))(t),(n=(n=(n=u(n)).split("\r").join("")).split("\n").join("")).length>32700&&(a=n.length+" characters in description",r.request("warning",a)),l.call(n,"\n")>=0&&r.request("danger","newline in description"),e.Description=n},e.exports=a},369:function(e,t,n){"use strict";var o,r,i;r=n(1),n(143),r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),i=function(e,t){var n,r,i;return n=t.comic,i=o.request("get-comic-image-urls"),r=n.links.link.url,t.image_src=i[r].replace("http://","//"),e.PicURL=i[n.links.link.url]},e.exports=i},370:function(e,t,n){"use strict";var o,r,i,u,a;(r=n(1)).Radio.channel("messages"),o=r.Radio.channel("ebcsv"),i={platinum:{start:1897,end:1937},golden:{start:1938,end:1955},silver:{start:1956,end:1969},bronze:{start:1970,end:1983},copper:{start:1984,end:1991},modern:{start:1992,end:2100}},u=function(e){var t,n;for(n in i)if(e>=(t=i[n]).start&&e<=t.end)return n;return!1},o.reply("get-comic-ages",function(){return i}),o.reply("find-age",function(e){return u(e)}),a=function(e,t){var n,o;return n=u(e),o=[],t.forEach(function(e){if(e.age===n)return o.push(e)}),o},o.reply("get-heroes-by-age",function(e,t){return a(e,t)}),e.exports={}},371:function(e,t,n){"use strict";var o,r,i,u;r=n(1),n(143),n(370),i=r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),u=function(e,t){var n,r,u,a,l,c,s,f,p,d,h,y,v,b;for(r=t.comic,c=o.request("get-superheroes-model").get("rows"),(b=null!=(y=r.publicationdate)?y.year:void 0)||(b=r.releasedate.year,console.warn("Using releasedate")),b||(console.warn("Bad date for comic",r),i.request("danger","Bad Date for comic "+r.id)),b=parseInt(b.displayname),v=r.mainsection.series.displayname.toLowerCase(),n=o.request("find-age",b),h=void 0,l={},p=0,d=(f=o.request("get-heroes-by-age",b,c)).length;p<d;p++)(s=f[p]).superhero.startsWith("Other ")&&(h=s),l[s.superhero.toLowerCase()]=s;for(a in null==h&&i.request("danger","No category found for "+n),u=h,l)if(v.indexOf(a)>=0){u=l[a];break}return e["*Category"]=u.id},e.exports=u},372:function(e,t,n){"use strict";var o;o=function(e,t){var n,o;if(null!=(n=t.comic)?n.isbn:void 0)return 14===(o=n.isbn).length&&(o=o.substring(0,o.length-2)),13===o.length&&(o=o.substring(1,o.length)),e["Product:UPC"]=o},e.exports=o},373:function(e,t,n){"use strict";var o,r,i;r=n(6),o=n(83),i=function(e,t){var n,i,u,a;return(a=r(e.scheduletime))?(i=(new Date).valueOf()+a,n=new Date(i),u="yyyy-mm-dd HH:MM:ss",e.scheduletime=o(n,u)):e.scheduletime=""},e.exports=i},374:function(e,t,n){"use strict";var o;o=function(e,t){var n,o;if(null!=(n=t.comic)?n.currentprice:void 0){for(o=n.currentprice;o.startsWith("$");)o=o.substring(1,o.length);return e.startprice=o}},e.exports=o},375:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s;r=n(1),n(95),n(6),n(83),n(98),n(31),c=n(18).default,r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),u=["Title","PicURL","Description","Product:EAN","Product:UPC","Product:ISBN","*Category"],l=["format","location","returnsacceptedoption","duration","quantity","startprice","dispatchtimemax","conditionid"],o.reply("csv-req-fieldnames",function(){return l}),a=["postalcode","paymentprofilename","returnprofilename","shippingprofilename","scheduletime"],o.reply("csv-opt-fieldnames",function(){return a}),s=function(){var e,t,n,o,r,i,s,f;for(t={action:"*Action"},n=0,i=l.length;n<i;n++)t[e=l[n]]="*"+c(e);for(o=0,s=a.length;o<s;o++)t[e=a[o]]=e;for(r=0,f=u.length;r<f;r++)t[e=u[r]]=e;return t},o.reply("create-csv-header",function(){return create-csv-header()}),i=s(),o.reply("get-csv-header",function(){return i}),o.reply("grouped-csv-fields",function(){return{ReqFieldNames:l,OptFieldNames:a,EbayFields:u}}),e.exports={}},384:function(e,t){},386:function(e,t){},392:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d;r=n(1),n(95),n(6),n(83),n(98),n(31),n(18),n(375),p=n(374),f=n(373),s=n(372),l=n(371),c=n(369),d=n(368),r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),a=o.request("grouped-csv-fields"),i=function(e){var t,n;return n={},t=e.cfg.get("content"),n.action=e.action,a.ReqFieldNames.forEach(function(e){return n[e]=t[e]}),a.OptFieldNames.forEach(function(e){return n[e]=t[e]}),a.EbayFields.forEach(function(e){return n[e]=""}),n},u=function(e){var t,n,o;return t=e.comic,e.cfg.get("content"),(o=i(e)).quantity!==t.quantity&&(o.quantity=t.quantity),p(o,e),f(o,e),s(o,e),l(o,e),c(o,e),(null!=(n=t.mainsection)?n.plot:void 0)&&(t.mainsection.plot=t.mainsection.plot.split("<br>").join("\n"),t.mainsection.plot=t.mainsection.plot.split("<BR>").join("\n")),d(o,e),o},o.reply("create-csv-row-object",function(e){return u(e)}),e.exports={}},393:function(e,t,n){"use strict";n(392),n(367)},409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1));r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.Radio.channel("ebcsv")},410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=(d(n(4)),d(n(1))),i=(d(n(2)),d(n(3))),u=d(n(6)),a=d(n(88)),l=d(n(40)),c=d(n(38)),s=d(n(5)),f=d(n(35)),p=d(n(409));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b,_,w,m,g,O,j,P,k=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};_=n(33).MainController,r.default.Radio.channel("global"),w=r.default.Radio.channel("messages"),r.default.Radio.channel("resources"),m=r.default.Radio.channel("navbar"),g={id:"addcfg",label:"Create Cfg",url:"#ebcsv/configs/add",icon:".fa.fa-plus"},O={id:"adddsc",label:"Create Description",url:"#ebcsv/descriptions/add",icon:".fa.fa-plus"},function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,r.default.Marionette.View),o(t,[{key:"regions",value:function(){var e;return(e=new c.default({el:"#main-content"})).slide_speed=(0,u.default)(".01s"),{content:e,toolbar:"#main-toolbar"}}}]),t}();return e.prototype.behaviors={ShowInitialEmptyContent:{behaviorClass:l.default}},e.prototype.template=i.default.renderable(function(e){return i.default.div(".col-md-12",function(){return i.default.div(".row",function(){return i.default.div("#main-toolbar.col-md-10.col-md-offset-1")}),i.default.div(".row",function(){return i.default.div("#main-content.col-md-10.col-md-offset-1")})})}),e}.call(void 0),P=new r.default.Collection([]),p.default.reply("get-toolbar-entries",function(){return P}),j="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a.default),t}();return e.prototype.options={entryTemplate:i.default.renderable(function(e){var t;return t={style:j},i.default.span(t,function(){return i.default.i(e.icon),i.default.text(" "),i.default.text(e.label)})})},e}.call(void 0),b=function(e){function t(){h(this,t);var e=y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._showMainView=e._showMainView.bind(e),e._show_create_csv_view=e._show_create_csv_view.bind(e),e._show_preview_csv_view=e._show_preview_csv_view.bind(e),e.create_csv=e.create_csv.bind(e),e}return v(t,_),o(t,[{key:"_showMainView",value:function(){var e=this;return k(this,t),Promise.all([n.e(2),n.e(10),n.e(40)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(408))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_show_create_csv_view",value:function(){var e=this;return k(this,t),Promise.all([n.e(2),n.e(10),n.e(39)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(402))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_show_preview_csv_view",value:function(){var e=this;return k(this,t),Promise.all([n.e(2),n.e(38)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(401))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_needComicsView",value:function(e){return p.default.request("get-comics").length?e():(0,s.default)("#ebcsv/xml/upload")}},{key:"create_csv",value:function(){var e,n,o=this;return k(this,t),this.setupLayoutIfNeeded(),e=p.default.request("get_local_configs"),n=p.default.request("get_local_descriptions"),e.fetch().then(function(){return n.fetch().then(function(){return o._needComicsView(o._show_create_csv_view)})})}},{key:"preview_csv",value:function(){var e,t,n,o=this;if(this.setupLayoutIfNeeded(),e=p.default.request("get-current-csv-cfg"),t=p.default.request("get-current-csv-dsc"),n=p.default.request("get-superheroes-model"),void 0!==e)return e.fetch().then(function(){return t.fetch().then(function(){return n.fetch().then(function(){return o._needComicsView(o._show_preview_csv_view)})})});(0,s.default)("#ebcsv")}},{key:"main_view",value:function(){return this.setupLayoutIfNeeded(),this._needComicsView(this._showMainView)}},{key:"upload_xml",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(37)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(400))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"view_cached_comics",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(36)]).then(function(){var t;return t=new(n(399)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"_setCfgEntries",value:function(){return m.request("get-entries","view").set([g])}},{key:"list_configs",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),n.e(35).then(function(){var t;return(t=p.default.request("get_local_configs")).fetch().done(function(o){var r;return console.log("ROWS",o,t),r=new(n(397))({collection:t}),e.layout.showChildView("content",r)})}.bind(null,n)).catch(n.oe)}},{key:"add_new_config",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),n.e(17).then(function(){var t;return t=new(n(189).NewFormView),e.layout.showChildView("content",t),(0,f.default)()}.bind(null,n)).catch(n.oe)}},{key:"view_config",value:function(e){var t=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),n.e(34).then(function(){var o,r,i;return o=n(396),r=p.default.request("get_local_configs"),(i=new r.model({id:e})).fetch().done(function(e){var n;return n=new o({model:i}),t.layout.showChildView("content",n),(0,f.default)()})}.bind(null,n)).catch(n.oe)}},{key:"edit_config",value:function(e){var t=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),n.e(17).then(function(){var o,r,i;return o=n(189),r=p.default.request("get_local_configs"),(i=new r.model({id:e})).fetch().done(function(e){var n;return n=new o.EditFormView({model:i}),t.layout.showChildView("content",n),(0,f.default)()})}.bind(null,n)).catch(n.oe)}},{key:"_setDscEntries",value:function(){return m.request("get-entries","view").set([O])}},{key:"list_descriptions",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),n.e(33).then(function(){var t,o;return(o=(t=p.default.request("get_local_descriptions")).fetch()).done(function(o){var r;return r=new(n(395))({collection:t}),e.layout.showChildView("content",r)}),o.fail(function(){return w.request("danger","Failed to get descriptions")})}.bind(null,n)).catch(n.oe)}},{key:"add_new_description",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),Promise.all([n.e(3),n.e(6),n.e(16)]).then(function(){var t;return t=new(n(188).NewFormView),e.layout.showChildView("content",t),(0,f.default)()}.bind(null,n)).catch(n.oe)}},{key:"view_description",value:function(e){var t=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),n.e(32).then(function(){var o,r,i;return o=n(394),r=p.default.request("get_local_descriptions"),(i=new r.model({id:e})).fetch().done(function(e){var n;return n=new o({model:i}),t.layout.showChildView("content",n),(0,f.default)()})}.bind(null,n)).catch(n.oe)}},{key:"edit_description",value:function(e){var t,o=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),t=p.default.request("get_local_descriptions"),Promise.all([n.e(3),n.e(6),n.e(16)]).then(function(){var r,i;return r=n(188),t=p.default.request("get_local_descriptions"),(i=new t.model({id:e})).fetch().done(function(e){var t;return t=new r.EditFormView({model:i}),o.layout.showChildView("content",t),(0,f.default)()})}.bind(null,n)).catch(n.oe)}}]),t}(),t.default=b},411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=s(n(1)),a=s(n(2)),l=s(n(89)),c=s(n(410));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(143),n(393),u.default.Radio.channel("global"),u.default.Radio.channel("resources"),i=[{id:"main",label:"Main View",url:"#ebcsv",icon:".fa.fa-eye"},{id:"cfglist",label:"Configs",url:"#ebcsv/configs/list",icon:".fa.fa-list"},{id:"dsclist",label:"Descriptions",url:"#ebcsv/descriptions/list",icon:".fa.fa-list"},{id:"uploadxml",label:"Upload CLZ/XML",url:"#ebcsv/xml/upload",icon:".fa.fa-upload"},{id:"mkcsv",label:"Create CSV",url:"#ebcsv/csv/create",icon:".fa.fa-cubes"},{id:"cached",label:"Cached Images",url:"#ebcsv/clzpage",icon:".fa.fa-image"},{id:"addcfg",label:"Create Cfg",url:"#ebcsv/configs/add",icon:".fa.fa-plus"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,a.default.AppRouter),t}();return e.prototype.appRoutes={ebcsv:"main_view","ebcsv/xml/upload":"upload_xml","ebcsv/csv/create":"create_csv","ebcsv/csv/preview":"preview_csv","ebcsv/clzpage":"view_cached_comics","ebcsv/configs":"list_configs","ebcsv/configs/list":"list_configs","ebcsv/configs/add":"add_new_config","ebcsv/configs/view/:name":"view_config","ebcsv/configs/edit/:name":"edit_config","ebcsv/descriptions":"list_descriptions","ebcsv/descriptions/list":"list_descriptions","ebcsv/descriptions/add":"add_new_description","ebcsv/descriptions/view/:name":"view_description","ebcsv/descriptions/edit/:name":"edit_description"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,l.default),t}();return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:"Ebcsv Menu",menu:i}],e.prototype.state={currentCsvAction:void 0,currentCsvConfig:void 0,currentCsvDsc:void 0},e}.call(void 0),t.default=o},418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=n(33),p=n(88),d=(o=p)&&o.__esModule?o:{default:o},h=n(34);Backbone.Radio.channel("global"),u=Backbone.Radio.channel("messages"),a=Backbone.Radio.channel("resources"),r=Backbone.Radio.channel("dbdocs"),l=[],c=new Backbone.Collection(l),r.reply("get-toolbar-entries",function(){return c}),i=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.MainController),s(t,[{key:"setupLayoutIfNeeded",value:function(){var e;return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new d.default({collection:c}),this.layout.showChildView("toolbar",e)}},{key:"list_pages",value:function(){var e=this;return this.setupLayoutIfNeeded(),console.log("List Pages"),n.e(31).then(function(){var t,o,r;return t=n(417),r=new t({collection:e.collection}),(o=e.collection.fetch()).done(function(){return e.layout.showChildView("content",r)}),o.fail(function(){return u.request("danger","Failed to load documents.")})}.bind(null,n)).catch(n.oe)}},{key:"edit_page",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(15)]).then(function(){var o,r;return o=n(191).EditPageView,r=a.request("get-document",e),t._loadView(o,r)}.bind(null,n)).catch(n.oe)}},{key:"view_page",value:function(e){var t=this;return this.setupLayoutIfNeeded(),n.e(30).then(function(){var o,r;return o=n(412),r=a.request("get-document",e),t._loadView(o,r)}.bind(null,n)).catch(n.oe)}},{key:"new_page",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(15)]).then(function(){var t;return t=new(0,n(191).NewPageView),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=h.ToolbarAppletLayout,e.prototype.collection=a.request("document-collection"),e}.call(void 0),t.default=i},419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});c(n(2));var o=c(n(89)),r=c(n(192));n(158);var i,u,a,l=c(n(418));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Backbone.Radio.channel("global"),Backbone.Radio.channel("resources"),a=[{button:"#list-button",label:"List",url:"#dbdocs/documents",icon:".fa.fa-list"},{label:"Add New Document",url:"#dbdocs/documents/new",icon:".fa.fa-plus"}],u=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,r.default),t}();return e.prototype.appRoutes={dbdocs:"list_pages","dbdocs/documents":"list_pages","dbdocs/documents/new":"new_page","dbdocs/documents/view/:id":"view_page","dbdocs/documents/edit/:id":"edit_page"},e}.call(void 0),i=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,o.default),t}();return e.prototype.Controller=l.default,e.prototype.Router=u,e.prototype.appletEntries=[{label:"Site Doc Menu",menu:a}],e}.call(void 0),t.default=i},436:function(e,t,n){"use strict";var o,r,i,u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(4),o=n(1),n(2),n(3),n(6),n(33).ExtraController,u=o.Radio.channel("global"),i=u.request("crud:Controller"),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),a(t,[{key:"initialize",value:function(e){this.applet=u.request("main:applet:get-applet","adminpanel"),this.mainController=this.applet.router.controller}},{key:"listUsers",value:function(){var e=this;n.e(25).then(function(){var t;return t=n(435),e.listItems(t)}.bind(null,n)).catch(n.oe)}},{key:"viewUser",value:function(e){var t=this;n.e(24).then(function(){var o;return o=n(434),t.viewItem(o,e)}.bind(null,n)).catch(n.oe)}},{key:"addNewUser",value:function(){var e;e=u.request("crud:view:new-item"),this.addItem(e)}},{key:"editUser",value:function(e){var t;t=u.request("crud:view:edit-item"),this.editItem(t,e)}}]),t}();return e.prototype.defaultColumns=["id","username","fullname"],e.prototype.viewOptions={fieldList:["username","fullname","email"],entryField:"fullname",modelName:"user",label:"user",routeName:"adminpanel"},e.prototype.channelName="useradmin",e}.call(void 0),e.exports=r},437:function(e,t,n){"use strict";var o,r,i;r=n(2),o=n(436),i=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.AppRouter),t}();return e.prototype.appRoutes={"adminpanel/useradmin":"listUsers","adminpanel/user/list":"listUsers","adminpanel/user/add":"addNewUser","adminpanel/user/view/:id":"viewUser","adminpanel/user/edit/:id":"editUser"},e}.call(void 0),e.exports={router:i,controller:o}},44:function(e,t,n){var o={"./adminpanel/main":445,"./bumblr/main":433,"./dbdocs/main":419,"./ebcsv/main":411,"./frontdoor/main":366,"./hubby/main":358,"./moviedb/main":343,"./msleg/main":314,"./otrr/main":306,"./sofi/main":296,"./todos/main":250,"./tvmaze/main":244,"./userprofile/main":220,"./usgov/main":206,"./wikipages/main":202};function r(e){var t=i(e);return n(t)}function i(e){var t=o[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=44},442:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,_,w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o=n(4),r=n(1),s=n(2),b=n(3),y=n(37).default,v=n(5).default;var j=n(30);d=j.form_group_input_div,u=n(32).default,l=r.Radio.channel("global"),f=r.Radio.channel("messages"),h=b.renderable(function(e){return d({input_id:"input_username",label:"User Name",input_attributes:{name:"username",placeholder:"User Name"}}),d({input_id:"input_password",label:"Password",input_attributes:{name:"password",type:"password",placeholder:"Type your password here...."}}),b.input(".btn.btn-default",{type:"submit",value:"login"}),b.div(".spinner.fa.fa-spinner.fa-spin")}),i=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,u),w(t,[{key:"ui",value:function(){return y(this.fieldList)}},{key:"createModel",value:function(){return new r.Model}},{key:"onSuccess",value:function(){return v("/admin")}}]),t}(),a=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,i),w(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("username",this.ui.username.val()),this.model.set("password",this.ui.password.val())}},{key:"saveModel",value:function(){var e,t,n,r=this;return t=this.model.get("username"),e=this.model.get("password"),n=o.ajax({url:"/login",type:"POST",data:{username:t,password:e},dataType:"json",success:function(e){var t;return t=e.token,l.request("main:app:set-auth-token",t),r.trigger("save:form:success",r.model)},error:function(e){var t;return t=e.responseJSON,f.request("danger",t.message),r.trigger("save:form:failure",r.model)}}),console.log("returning xhr",n)}}]),t}();return e.prototype.template=h,e.prototype.fieldList=["username","password"],e}.call(void 0),_=b.renderable(function(e){return d({input_id:"input_token",label:"Auth Token",input_attributes:{name:"token",placeholder:"xxxxxxxxxxxxxxx"}}),b.input(".btn.btn-default",{type:"submit",value:"login"}),b.div(".spinner.fa.fa-spinner.fa-spin")}),p=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,i),w(t,[{key:"updateModel",value:function(){return console.log("updateModel called"),this.model.set("token",this.ui.token.val())}},{key:"saveModel",value:function(){var e,t,n=this;return t=this.model.get("token"),l.request("main:app:set-auth-token",t),(e=(new(l.request("main:app:AuthRefresh"))).fetch()).fail(function(){return n.trigger("save:form:failure",n.model)}),e.done(function(){return n.trigger("save:form:success",n.model)})}}]),t}();return e.prototype.template=_,e.prototype.fieldList=["token"],e}.call(void 0),c=function(){var e=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,s.View),w(t,[{key:"onRender",value:function(){return this.showChildView("login",new a),this.showChildView("token",new p)}}]),t}();return e.prototype.template=b.renderable(function(e){return b.div("#login-form"),b.div("#token-form")}),e.prototype.regions={login:"#login-form",token:"#token-form"},e}.call(void 0),e.exports=c},443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},i=c(n(1)),u=(c(n(2)),n(33)),a=(n(30),c(n(38))),l=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(158);var d,h,y,v,b,_,w,m=[].indexOf;h=i.default.Radio.channel("global"),y=i.default.Radio.channel("messages"),i.default.Radio.channel("static-documents"),b=i.default.Radio.channel("resources"),w=n(3),v=function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,i.default.Model),o(t,[{key:"fetch",value:function(e){return(e=e||{}).dataType="text",r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}},{key:"parse",value:function(e){return{content:e}}}]),t}();return e.prototype.url="https://raw.githubusercontent.com/umeboshi2/garkbit/master/README.md",e}.call(void 0),_=w.renderable(function(){return w.div(".row",function(){return w.div("#main-content")})}),function(){var e=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,i.default.Marionette.View),o(t,[{key:"regions",value:function(){return{content:new a.default({el:"#main-content",speed:"slow"})}}},{key:"onBeforeDestroy",value:function(e){0}}]),t}();return e.prototype.template=_,e}.call(void 0),d=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,u.MainController),o(t,[{key:"setupLayoutIfNeeded",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),this.layout.controller=this}},{key:"_view_resource",value:function(e){var t;return this.setupLayoutIfNeeded(),t=new(0,n(193).FrontDoorMainView)({model:e}),this.layout.showChildView("content",t)}},{key:"_view_login",value:function(){var e;return e=new(n(442)),this.layout.showChildView("content",e)}},{key:"_view_upload",value:function(){var e=this;return Promise.all([n.e(13),n.e(43)]).then(function(){var t;return t=new(n(441)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"upload_view",value:function(){return this.setupLayoutIfNeeded(),this._view_upload()}},{key:"view_page",value:function(e){var t,n,o=this;return(n=(t=b.request("get-document",e)).fetch()).done(function(){return t.get("content")||t.set("content","# Need a front page."),o._view_resource(t)}),n.fail(function(){return y.request("danger","Failed to get document")})}},{key:"frontdoor_needuser",value:function(){var e;return e=h.request("main:app:decode-auth-token"),m.call(Object.keys(e),"name")>=0?this.frontdoor_hasuser(e):this.show_login()}},{key:"show_login",value:function(){return this.setupLayoutIfNeeded(),this._view_login()}},{key:"show_logout",value:function(){return h.request("main:app:destroy-auth-token"),(0,l.default)("/")}},{key:"frontdoor_hasuser",value:function(e){return this.default_view()}},{key:"view_readme",value:function(){var e,t,n=this;return this.setupLayoutIfNeeded(),(t=(e=new v).fetch()).done(function(){return n._view_resource(e)}),t.fail(function(){return y.request("warning","failed to get readme")})}},{key:"default_view",value:function(){return this.setupLayoutIfNeeded(),this.view_readme()}},{key:"frontdoor",value:function(){var e;return(null!=(e=h.request("main:app:config"))?e.needLogin:void 0)?this.frontdoor_needuser():this.default_view()}},{key:"themeSwitcher",value:function(){var e;return this.setupLayoutIfNeeded(),e=new(0,n(193).ThemeSwitchView),this.layout.showChildView("content",e),console.log("themeSwitcher")}}]),t}(),t.default=d},444:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h,y=n(195),v=(o=y)&&o.__esModule?o:{default:o};function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}p=n(0),l=n(1),n(108),n(194).LocalStorage,c=l.Radio.channel("global"),r=l.Radio.channel("useradmin"),window.AppChannel=r,a=c.request("main:app:AuthModel"),u=c.request("main:app:AuthCollection"),d={channelName:"useradmin"},h="/api/dev/bapi/useradmin"+"/users",f=function(){var e=function(e){function t(){return b(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,a),t}();return e.prototype.urlRoot=h,e}.call(void 0),s=function(){var e=function(e){function t(){return b(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,u),t}();return e.prototype.url=h,e.prototype.model=f,e}.call(void 0),new v.default(p.extend(d,{modelName:"user",modelClass:f,collectionClass:s})),i={},r.reply("locals:get",function(e){return i[e]}),r.reply("locals:set",function(e,t){return i[e]=t}),r.reply("locals:delete",function(e){return delete i[e]})},445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=(s(n(2)),s(n(89)));s(n(5));n(444);var i,u,a,l=s(n(443)),c=s(n(192));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Backbone.Radio.channel("global"),Backbone.Radio.channel("messages"),a=[{label:"User Admin",menu:[{label:"List Users",url:"#adminpanel/user/list",icon:".fa.fa-list"},{label:"Add New User",url:"#adminpanel/user/add",icon:".fa.fa-plus"}]}],u=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,c.default),t}();return e.prototype.appRoutes={"":"frontdoor",adminpanel:"frontdoor","adminpanel/view":"frontdoor","adminpanel/login":"show_login","adminpanel/logout":"show_logout"},e}.call(void 0),i=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,r.default),o(t,[{key:"onStop",value:function(){return console.log("(Child) Stopping adminpanel",this.isRunning()),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStop",this).call(this)}}]),t}();return e.prototype.Controller=l.default,e.prototype.Router=u,e.prototype.appletEntries=a,e.prototype.extraRouters={useradmin:n(437)},e}.call(void 0),t.default=i}}]);
//# sourceMappingURL=1-c27852c3c1dc7fe22955.js.map